[{"content":"\nCAì™€ CAì—ì„œ Digital Certificateì„ ë°œê¸‰ë°›ì•„ì„œ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.\nIndex\nCA CAì—ì„œ ì¸ì¦ì„œ ìƒì„±í•˜ê¸° ì¸ì¦ì„œ ì ìš©í•˜ê¸° Chain of Trust (plus) ì¸ì¦ì„œê°€ ì‚¬ìš©ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ ëª¨ì‹ë„ CA CAëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê¸°ê´€ì— ì˜í•´ ìš´ì˜ë˜ëŠ”ë°, ì£¼ìš” ì—…ë¬´ëŠ” ê³µê°œí‚¤ ë“±ë¡ ì‹œ ë³¸ì¸ ì¸ì¦ê³¼ X.509ì™€ ê°™ì€ ë””ì§€í„¸ ì¸ì¦ì„œ ìƒì„± ë° ë°œìƒ ë“±ì´ ìˆë‹¤.\nCAì˜ í•„ìš”ì„± ê³µê°œí‚¤ì™€ ë¹„ë°€í‚¤ë§Œì„ ì´ìš©í•´ ì•”í˜¸í™”ëŠ” ìˆ˜í–‰í•˜ë©´ ë³´ì•ˆì— ë§¤ìš° ì·¨ì•½í•´ì§„ë‹¤. [Picture 1] ì—ì„œ í•´ì»¤ê°€ ì‚¬ìš©ì Bì—ê²Œ í•´ì»¤ì˜ ê³µê°œí‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë³´ë‚¼ ê²½ìš° ì‚¬ìš©ì BëŠ” ì‚¬ìš©ì Aê°€ ë³´ë‚¸ ë°ì´í„°ë¼ì°©ê°í•  ìˆ˜ ìˆë‹¤. ì´ì™€ ê°™ì€ í•´ì»¤ì˜ ê³µê²© ë°©ì‹ì„ MTM(Man in the Middle Attack)ì´ë¼ê³  í•œë‹¤. ì´ì™€ ê°™ì€ ì·¨ì•½ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ CA(Certificate Authority) ë¼ëŠ” ì¸ì¦ ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\n[Picture 1] Man in Middle Attack PKIì—ì„œ CAê°€ ì‚¬ìš©ë˜ëŠ” ê³¼ì • ì‚¬ìš©ì Aê°€ ìì‹ ì˜ ê³µê°œí‚¤ë¥¼ CAì— ë“±ë¡í•œë‹¤. (ë³¸ì¸ ì¸ì¦ì„ ê±°ì¹œë‹¤) ì‚¬ìš©ì Bê°€ ì‚¬ìš©ì Aì˜ ê³µê°œí‚¤ê°€ í•„ìš”í•  ê²½ìš° CAì— ê°€ì„œ ì‚¬ìš©ì Aì˜ ê³µê°œí‚¤ë¥¼ ìš”ì²­í•œë‹¤. CAëŠ” ì‚¬ìš©ì Aì˜ ê³µê°œí‚¤ë¥¼ ì•”í™”í™”í•˜ì—¬ ì‚¬ìš©ì Bì—ê²Œ ì „ë‹¬í•œë‹¤. ì‚¬ìš©ì BëŠ” í•´ë‹¹ ê³µê°œí‚¤ë§Œì„ ì‚¬ìš©ì Aì˜ ê³µê°œí‚¤ë¼ê³  ë¯¿ê²Œ ëœë‹¤. [Picture 2] PKIì—ì„œ CAê°€ ì‚¬ìš©ë˜ëŠ” ê³¼ì • CA ì—…ì²´ ìœ ëª…í•œ CAë“¤ì€ [Picture 3] ê°™ë‹¤. CAì˜ ì¸ì¦ì„œë¥¼ ëŒ€ë¦¬ êµ¬ë§¤í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ë“¤ì´ ì™¸êµ­ì—ë„, í•œêµ­ì—ë„ ìˆì§€ë§Œ ì§ì ‘ CAì— ê°€ì„œ ì‚¬ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤. CAì— ì§ì ‘ ê°€ì„œ êµ¬ë§¤í–ˆì„ ë•Œ QnAë‚˜ ëŒ€ì‘ë„ ë” ë¹ ë¥´ê³ , ìì„¸í•˜ë©° ë‚˜ì¤‘ì— ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•  ë•Œì—ë„ ë” í¸í–ˆë‹¤.\n[Picture 3] ìœ ëª…í•œ CA\" CAì—ì„œ ì¸ì¦ì„œ ìƒì„±í•˜ê¸° CAì—ì„œ ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” SANê³¼ CSRì„ ì œì¶œí•´ì•¼ í•œë‹¤. CA ì—…ì²´ì— ë”°ë¼ì„œ ì¶”ê°€ ì„œë¥˜ë¥¼ ì œì¶œí•´ì•¼ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ë°œê¸‰ ì „ì— í™•ì¸í•´ì•¼ í•œë‹¤.\nSAN Subject Alternative Name ì˜ ì•½ìì´ë‹¤. Optional ì´ê³ , ì„ íƒí•œ ì¸ì¦ì„œì˜ ê°€ê²©ì— ë”°ë¼ì„œ ë³´ì¥í•˜ëŠ” SANì˜ ê°œìˆ˜ì—ë„ ì°¨ì´ê°€ ìˆë‹¤. í•˜ë‚˜ì˜ ì¸ì¦ì„œë¡œ ì—¬ëŸ¬ê°œì˜ FQDN (Fully Qualified Domain Name)ë¥¼ ë³´ì¥í•  ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ IPë¡œ í–¥í–ëŠ” ë„ë©”ì¸ì´ ì—¬ëŸ¬ê°œê°€ ìˆì„ ë•Œ ìì£¼ ì‚¬ìš©ì´ ëœë‹¤. SAN ì˜ˆì‹œ\nwww.digicert.com knowledge.digicert.com www.thawte.com CSR Certificate signing request ì˜ ì•½ìì´ë‹¤. CAì—ì„œ certificate ë°œê¸‰ë°›ê¸° ìœ„í•´ ë³´ë‚´ëŠ” ë©”ì„¸ì§€ì´ë‹¤. ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” í¬ë§·ì€ PKCS #10ì´ë‹¤. CSR ì„ ë§Œë“¤ê¸° ì „ì— PrivateKeyë¥¼ ë§Œë“œëŠ”ë°, ì´ PrivateKeyê°€ ë°”ë¡œ PKIì—ì„œ ì‚¬ìš©ë˜ëŠ” ê·¸ PrivateKeyë¡œ ì•„ë¬´í•œí…Œë„ ë…¸ì¶œí•˜ë©´ ì•ˆëœë‹¤. [gogetssl] ì²˜ëŸ¼ ì¸ì¦ì„œ ì¤‘ê°„ ìœ í†µ ì—…ì²´ë“¤ì´ ë•Œë•Œë¡œ CSRê³¼ PrivateKeyë¥¼ ì‚¬ìš©ìì—ê²Œ ì£¼ê¸°ë„ í•œë‹¤. OpenSSLë¡œ CSR ìƒì„±í•˜ê¸° openssl req -new -newkey rsa:2048 -sha256 -nodes -keyout server.key -out server.csr Private keyì„ ìƒì„±í•œë‹¤. ìƒì„±í•œ Private keyë¥¼ ì‚¬ìš©í•˜ì—¬ CSRì„ ìƒì„±í•œë‹¤. CSRì„ ìƒì„±í•  ë•Œ [Picture 4] ì— ëŒ€í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì•¼ í•œë‹¤. [Picture 4] CSR ì…ë ¥ ì‚¬í•­ Common Name SANì´ ë‚˜ì˜¤ê³  ë‚˜ì„œë¶€í„° Common Nameì€ ì‹¤ì œì ì¸ íš¨ë ¥ ë³´ë‹¤ëŠ” ê³¼ê±°ì˜ ë ˆê±°ì‹œ í˜•íƒœë¡œ ë‚¨ì•„ìˆë‹¤. ì´ë²ˆì—ë„ CSRì„ ì‘ì„±í•  ë•Œ OVë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Common Nameì— ë„ë©”ì¸ì„ ì“°ì§€ ì•Šê³  íšŒì‚¬ ì´ë¦„ì„ ë„£ì—ˆë‹¤. Comman Nameì— ë„ë©”ì¸ì„ ë„£ëŠ”ë‹¤ë©´ ì¸ì¦ì„œê°€ ì„¤ì¹˜ë˜ëŠ” ì„œë²„ì˜ ì´ë¦„ê³¼ ì •í™•í•˜ê²Œ ë§¤ì¹˜í•´ì•¼ í•œë‹¤. ë§Œì•½ ì„œë¸Œ ë„ë©”ì¸ì„ ìœ„í•´ ì¸ì¦ì„œë¥¼ ë°œê¸‰í–ˆì„ ê²½ìš°ì—ëŠ” full ì„œë¸Œë„ë©”ì¸ì„ ì •í™•í•˜ê²Œ ëª…ì‹œí•´ì¤˜ì•¼í•œë‹¤.\nCommon Name ì˜ˆì‹œ\në„ë©”ì¸: mydomain.com ì„œë¸Œ ë„ë©”ì¸: www common name: www.domain.com Common Name vs SAN common nameì€ ë‹¨ í•˜ë‚˜ì˜ ì—”íŠ¸ë¦¬ë§Œ ì…ë ¥ì„ í•  ìˆ˜ ìˆë‹¤. wildcard ë˜ëŠ” non-wildcard ì´ë¼ë„ ë‹¨ í•˜ë‚˜ë§Œ ì…ë ¥ì„ í• ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì€ ë³€í•¨ì´ ì—†ë‹¤ SANì€ common nameì˜ ì´ëŸ° ì œì•½ì„ ì—†ì• ê¸° ìœ„í•´ ìƒê²¨ë‚¬ë‹¤. SANì´ ìˆê¸° ë•Œë¬¸ì— multi-name SSL ì¸ì¦ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. SANì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ê°’ì„ ë„£ì„ ìˆ˜ ìˆê³ , Common Nameê³¼ ì¤‘ë³µë„ ê°€ëŠ¥í•˜ë‹¤. SANì´ ì„œë²„ ë„¤ì„ì´ ì¼ì¹˜í•˜ëŠ” ê°€ í™•ì¸í•˜ê¸° ìœ„í•œ ìœ ì¼í•œ í•„ìˆ˜ ë ˆí¼ëŸ°ìŠ¤ê°€ ë˜ì—ˆë‹¤. ì¸ì¦ì„œ ê´€ë ¨ ì»¤ë§¨ë“œ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¸ì¦ì„œ ê°€ì ¸ì˜¤ê¸° echo | openssl s_client -servername google.com -connect google.com:443 |\\\\n sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' \u0026gt; certificate.crt ì¸ì¦ì„œ ì—´ì–´ë³´ê¸° openssl x509 -in certificate.crt -noout -text [íŒŒì‹± ê²°ê³¼ ì˜ˆì‹œ] Certificate: Data: Version: 3 (0x2) Serial Number: 59:43:1c:7c:0e:b1:5c:49:0a:01:4e:60:34:b8:2c:b2 Signature Algorithm: sha256WithRSAEncryption Issuer: C=US, O=Google Trust Services LLC, CN=GTS CA 1C3 Validity Not Before: Apr 25 08:31:18 2022 GMT Not After : Jul 18 08:31:17 2022 GMT Subject: CN=*.google.com Subject Public Key Info: Public Key Algorithm: id-ecPublicKey Public-Key: (256 bit) pub: 04:81:63ğŸ†d3:29:a2:15:6c:ee:b7:43:66:55:c5: 88:6e:70:9b:4d:43:40:66:ea:a4:fc:c0:06:8b:4c: fd:60:23:5f:f7:a0:e4:3c:5a:af:7f:e5:36:63:88: 55:dd:e2:60:41:6c:a1:27:3d:48:fb:2e:6a:21:6d: 01:aa:2e:25:7e ASN1 OID: prime256v1 NIST CURVE: P-256 X509v3 extensions: X509v3 Key Usage: critical Digital Signature X509v3 Extended Key Usage: TLS Web Server Authentication X509v3 Basic Constraints: critical CA:FALSE X509v3 Subject Key Identifier: 8B:09:31:88:DD:30:A6:59:D3:86:E5:3D:EA:06:6D:F3:C0:25:96:D5 X509v3 Authority Key Identifier: keyid:8A:74:7F:AF:85:CD:EE:95:CD:3D:9C:D0:E2:46:14:F3:71:35:1D:27 Authority Information Access: OCSP - URI:http://ocsp.pki.goog/gts1c3 CA Issuers - URI:http://pki.goog/repo/certs/gts1c3.der X509v3 Subject Alternative Name: DNS:*.google.com, DNS:*.appengine.google.com, DNS:*.bdn.dev, DNS:*.cloud.google.com, DNS:*.crowdsource.google.com, DNS:*.datacompute.google.com, DNS:*.google.ca, DNS:*.google.cl, DNS:*.google.co.in, DNS:*.google.co.jp, DNS:*.google.co.uk, DNS:*.google.com.ar, DNS:*.google.com.au, DNS:*.google.com.br, DNS:*.google.com.co, DNS:*.google.com.mx, DNS:*.google.com.tr, DNS:*.google.com.vn, DNS:*.google.de, DNS:*.google.es, DNS:*.google.fr, DNS:*.google.hu, DNS:*.google.it, DNS:*.google.nl, DNS:*.google.pl, DNS:*.google.pt, DNS:*.googleadapis.com, DNS:*.googleapis.cn, DNS:*.googlevideo.com, DNS:*.gstatic.cn, DNS:*.gstatic-cn.com, DNS:googlecnapps.cn, DNS:*.googlecnapps.cn, DNS:googleapps-cn.com, DNS:*.googleapps-cn.com, DNS:gkecnapps.cn, DNS:*.gkecnapps.cn, DNS:googledownloads.cn, DNS:*.googledownloads.cn, DNS:recaptcha.net.cn, DNS:*.recaptcha.net.cn, DNS:recaptcha-cn.net, DNS:*.recaptcha-cn.net, DNS:widevine.cn, DNS:*.widevine.cn, DNS:ampproject.org.cn, DNS:*.ampproject.org.cn, DNS:ampproject.net.cn, DNS:*.ampproject.net.cn, DNS:google-analytics-cn.com, DNS:*.google-analytics-cn.com, DNS:googleadservices-cn.com, DNS:*.googleadservices-cn.com, DNS:googlevads-cn.com, DNS:*.googlevads-cn.com, DNS:googleapis-cn.com, DNS:*.googleapis-cn.com, DNS:googleoptimize-cn.com, DNS:*.googleoptimize-cn.com, DNS:doubleclick-cn.net, DNS:*.doubleclick-cn.net, DNS:*.fls.doubleclick-cn.net, DNS:*.g.doubleclick-cn.net, DNS:doubleclick.cn, DNS:*.doubleclick.cn, DNS:*.fls.doubleclick.cn, DNS:*.g.doubleclick.cn, DNS:dartsearch-cn.net, DNS:*.dartsearch-cn.net, DNS:googletraveladservices-cn.com, DNS:*.googletraveladservices-cn.com, DNS:googletagservices-cn.com, DNS:*.googletagservices-cn.com, DNS:googletagmanager-cn.com, DNS:*.googletagmanager-cn.com, DNS:googlesyndication-cn.com, DNS:*.googlesyndication-cn.com, DNS:*.safeframe.googlesyndication-cn.com, DNS:app-measurement-cn.com, DNS:*.app-measurement-cn.com, DNS:gvt1-cn.com, DNS:*.gvt1-cn.com, DNS:gvt2-cn.com, DNS:*.gvt2-cn.com, DNS:2mdn-cn.net, DNS:*.2mdn-cn.net, DNS:googleflights-cn.net, DNS:*.googleflights-cn.net, DNS:admob-cn.com, DNS:*.admob-cn.com, DNS:*.gstatic.com, DNS:*.metric.gstatic.com, DNS:*.gvt1.com, DNS:*.gcpcdn.gvt1.com, DNS:*.gvt2.com, DNS:*.gcp.gvt2.com, DNS:*.url.google.com, DNS:*.youtube-nocookie.com, DNS:*.ytimg.com, DNS:android.com, DNS:*.android.com, DNS:*.flash.android.com, DNS:g.cn, DNS:*.g.cn, DNS:g.co, DNS:*.g.co, DNS:goo.gl, DNS:www.goo.gl, DNS:google-analytics.com, DNS:*.google-analytics.com, DNS:google.com, DNS:googlecommerce.com, DNS:*.googlecommerce.com, DNS:ggpht.cn, DNS:*.ggpht.cn, DNS:urchin.com, DNS:*.urchin.com, DNS:youtu.be, DNS:youtube.com, DNS:*.youtube.com, DNS:youtubeeducation.com, DNS:*.youtubeeducation.com, DNS:youtubekids.com, DNS:*.youtubekids.com, DNS:yt.be, DNS:*.yt.be, DNS:android.clients.google.com, DNS:developer.android.google.cn, DNS:developers.android.google.cn, DNS:source.android.google.cn X509v3 Certificate Policies: Policy: 2.23.140.1.2.1 Policy: 1.3.6.1.4.1.11129.2.5.3 X509v3 CRL Distribution Points: Full Name: URI:http://crls.pki.goog/gts1c3/QOvJ0N1sT2A.crl 1.3.6.1.4.1.11129.2.4.2: ......v.)y...99!.Vs.c.w..W}.` ..M]\u0026amp;\\%]......`........G0E.!......Y.Z...Z.s#...Al...\u0026amp;......Wi. m.-a..._^,...#....D.tZ.j..W.g....w...^.h.O.l..._N\u0026gt;Z.....j^.;.. D\\*s....`..!.....H0F.!..6:.?...f..m.}%.r..........E.....!..U....G...%.$D.mG.B.. Signature Algorithm: sha256WithRSAEncryption 5c:2b:62:ec:f6:ee:92:0c:28:98:92:af:35:f0:78:5b:75:f2: a2:c5:e9:56:04:da:31:ed:0c:92:16:3a:14:47:f9:60:7d:e4: 36:33:82:13:68:54:37:47:81:f8:b6:0e:66:a7:87:c4:f5:82: ca:58:62:a2:15:63:16:28:5b:8e:bc:e7:18:af:97:a2:f4:92: 92:e3:2f:69:df:ba:7a:80:92:20:14:22:4f:3d:26:69:c6:f8: 90:d1:2c:36:57:0a:5c:20:00:86:d2:bd:52:db:19:39:46:12: b0:65:1d:16:3d:f1:58:4b:d6:19:c0:4b:0d:eb:ad:0b:b9:1c: 03:ad:cb:d1:04:33:a2:2c:b8:33:f6:01:7c:71:7f:e8:8a:32: c1:74:9a:11:f7ğŸ†b9:ff:f8:89:99:f3:f9:50:7b:31:c7:fa: fc:71:d1:c6:f2:b4:d2:82:93:84:ae:d8:eb:55:41:d4:de:9d: 7f:47:44:05:4a:fb:a7:09:b2:89:99:a7:7f:64:13:52:be:73: ee:00:b9:1c:ad:e1:44:48:41:a4:77:55:8d:0a:c8:b0:bb:69: fe:9a:84:a5:cd:2d:a9:61:3b:60:92:e4:43:d6:2b:79:d6:5a: 0d:db:f7:7f:7a:fc:7d:c3:59:e3:7d:d7:47:78:c2:b2:7d:6d: f2:7a:75:49 ê°„ë‹¨í•˜ê²Œ ì¸ì¦ì„œ ì¡°íšŒë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” online parserë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. [Online Parser] íŒŒì‹±ì˜ ê²°ê³¼ë¡œ ë‚˜ì˜¨ fieldì— ëŒ€í•œ ì„¤ëª…ì€ [LeeLee- Digital Certificate] í¬ìŠ¤íŠ¸ ì—ì„œ ë” ìì„¸í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì¸ì¦ì„œ ì ìš©í•˜ê¸° CA bundle CAì—ì„œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ìœ¼ë©´ end-entity (ë‚´ application)ì˜ ì¸ì¦ì„œë§Œ ì˜¤ì§€ ì•ŠëŠ”ë‹¤. Root CAì˜ ì¸ì¦ì„œì™€ Intermediate ì¸ì¦ì„œê°€ í•¨ê»˜ ì˜¤ëŠ”ë° ì´ë¥¼ CA bundleì´ë¼ê³  í•œë‹¤. CA bundleì€ ì›¹ ë¸Œë¼ìš°ì € ë“±ì˜ í´ë¼ì´ì–¸íŠ¸ì™€ ì¸ì¦ì„œì˜ í˜¸ì™„ì„±ì„ ë†’íˆê¸° ìœ„í•´ì„œ ì‚¬ìš©ì´ ëœë‹¤.\nCA bundle ì˜ˆì‹œ\nRoot CA ì¸ì¦ì„œ + Intermediate ì¸ì¦ì„œ + end-entity ì¸ì¦ì„œ = Certificate Chain [Picture 5] CA bundle CA bundleì€ *.ca-bundle í™•ì¥ìì˜ zip íŒŒì¼ì´ë‚˜ root, intermediate ê°œë³„ë¡œ ì£¼ì–´ì§„ë‹¤. CA bundleì€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ìˆœì°¨ì ìœ¼ë¡œ ì œê³µì´ ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ëŒ€ê²ŒëŠ” CAì—ì„œ ì´ë¯¸ í•˜ë‚˜ì˜ bundleì„ ë§Œë“¤ì–´ì„œ ì œê³µí•´ì¤€ë‹¤. ë§Œì•½ ê°œë³„ë¡œ ì£¼ì–´ì¡Œì„ ê²½ìš°ì—ëŠ” í•˜ë‚˜ì˜ ca-bundleë¡œ í•©ì³ì•¼ í•œë‹¤\nCA bundle í•©ì¹˜ê¸° ì˜ˆì‹œ\nAddTrustExternalCARoot.crtÂ â€“\u0026gt; Root CA Certificate COMODORSAAddTrustCA.crtÂ â€“\u0026gt; Intermediate CA Certificate 1 COMODORSADomainValidationSecureServerCA.crtÂ â€“\u0026gt; Intermediate CA Certificate 2 yourDomain.crtÂ â€“\u0026gt; Your SSL Certificate cat ComodoRSADomainValidationSecureServerCA.crt ComodoRSAAddTrustCA.crt AddTrustExternalCARoot.crt \u0026gt; yourDomain.ca-bundle Google CA Bundle ì˜ˆì‹œ\në¸Œë¼ìš°ì €ì˜ ë¸Œë¼ìš°ì§• ì°½ì— ğŸ”’ ëª¨ì–‘ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ë„ë©”ì¸ì— ëŒ€í•œ ì¸ì¦ì„œì˜ ì¢…ë¥˜, ìƒíƒœ ë“±ì„ ë³¼ ìˆ˜ ìˆëŠ”ë° google.comì˜ ì¸ì¦ì„œë¥¼ ì—´ì–´ë´¤ì„ ë•Œì—ë„ ì•„ë˜ì²˜ëŸ¼ ì¸ì¦ì„œê°€ ê³„ì¸µì„ ì´ë£¨ê³  ìˆë‹¤.\nend-entity ì¸ì¦ì„œ: *.google.com Intermediate ì¸ì¦ì„œ: GTS CA 1C3 Root ì¸ì¦ì„œ: GTS Root R1 [Picture 6] End Entity Certificate [Picture 7] Intermediate Certificate [Picture 8] Root Certificate Apply CA Bundle CA bundleì„ ì„œë²„ í˜¸ìŠ¤íŠ¸ ì–´ë””ì—”ê°€ ë‹¤ìš´ë¡œë“œí•´ë‘ì—ˆë‹¤ë©´ í•´ë‹¹ ë„ë©”ì¸ì´ ë“±ë¡ë˜ì–´ìˆëŠ” Nginx ë“±ì˜ ì›¹ì„œë²„ì— CA Bundleê°€ ìˆëŠ” pathë¥¼ ì ì–´ì£¼ë©´ ëœë‹¤. ê·¸ëŸ¼ ì•Œì•„ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ CA Bundleì„ í•œêº¼ë²ˆì— ë„˜ê²¨ì¤€ë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ Bundleì„ í†µí•´ì„œ end-entityê°€ ë¯¿ì„ ìˆ˜ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤. ì´ì™€ ê°™ì€ ê³¼ì •ì„ Chain of Trustë¼ê³  í•œë‹¤.\nì¸ì¦ì„œë¥¼ ì„œë²„ì— ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ê²ƒì„ â€˜installedâ€™ í•œë‹¤ê³  í‘œí˜„í•˜ëŠ”ë° ì‹¤ì œë¡œëŠ” ì¸ì¦ì„œë¥¼ ì„œë²„ì— ì„¤ì¹˜í•œë‹¤ê¸° ë³´ë‹¤ëŠ” íŠ¹ì • ë””ë ‰í„°ë¦¬ì— ë„£ì–´ë‘”ë‹¤.\nLetâ€™s encrypt ë¥¼ ì¸ì¦ì„œë¡œ ì‚¬ìš©í–ˆì„ ë•Œ Nginxì˜ configuration ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 server { root /var/www/html; index index.html index.htm index.nginx-debian.html; server_name www.test.me test.me; location / { try_files $uri $uri/ =404; } listen [::]:443 ssl http2; # managed by Certbot listen 443 ssl http2; # managed by Certbot ssl_certificate /etc/letsencrypt/live/test.me/fullchain.pem; # managed by Certbot ssl_certificate_key /etc/letsencrypt/live/test.me/privkey.pem; # managed by Certbot include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot } 14ë²ˆ ì¤„ì˜ ì˜ fullchain.pemì´ í•˜ë‚˜ë¡œ ì••ì¶•ì´ ëœ CA bundleì´ë‹¤. Letâ€™s encryptì—ì„œëŠ” ì²˜ìŒë¶€í„° í•˜ë‚˜ë¡œ ì••ì¶•ëœ ca-bundleì„ pem í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤.\nChain of Trust CAê°€ ì„œëª…í•œ ì¸ì¦ì„œì˜ ë‚´ë¶€ êµ¬ì¡° CAê°€ ì„œëª…ì„ end-entityì˜ ì¸ì¦ì„œì— ì„œëª…ì„ í•˜ê²Œ ë˜ë©´ end-entityì˜ ì¸ì¦ì„œì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì •ë³´ê°€ ì¶”ê°€ë˜ì–´ ë°œê¸‰ëœë‹¤.\nëˆ„ê°€ ì„œëª…ì„ í–ˆëŠ”ì§€ (Issuer name) Issuerì˜ Digital Signature (Issuerì˜ Private keyë¡œ ì„œëª…) end-entity (Subject)ì˜ public key [Picture 9] End Entity Certificate ë‚´ë¶€ êµ¬ì¡° Chain of Trust ê³¼ì • Chain of TrustëŠ” ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAê°€ Issuerë¡œ ìˆëŠ” ì¸ì¦ì„œë¥¼ ì°¾ê¸° ê¹Œì§€ ëª¨ë“  layerì˜ ì¸ì¦ì„œë¥¼ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ë‹¤ë¥¸ ë§ë¡œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAê°€ ë°œê¸‰í•œ ì¸ì¦ì„œë¥¼ ì¦ëª…í•˜ëŠ” ê³¼ì •ì´ë‹¤. ì°¸ê³ ë¡œ ë¸Œë¼ìš°ì €ì— Root CAì˜ ì¸ì¦ì„œë¥¼ ë³´ë‚´ë„ ëŒ€ë¶€ë¶„ì€ ê·¸ ì¸ì¦ì„œë¥¼ ì“°ì§€ ì•Šê³ , ë¸Œë¼ìš°ì €ì— ì´ë¯¸ ìì²´ì ìœ¼ë¡œ ì €ì¥ì´ ë˜ì–´ìˆëŠ” Root CA ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•œë‹¤.\nChain ì‹œë‚˜ë¦¬ì˜¤ End-entityì˜ ì¸ì¦ì„œ ì œì¶œ End-entityëŠ” ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAê°€ ì•„ë‹ˆë‹¤. End-entityì˜ Issuerë¥¼ í™•ì¸í•œë‹¤. Intermediate CAê°€ Issuerë¡œ ë˜ì–´ìˆë‹¤. Intermediate CAëŠ” ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAê°€ ì•„ë‹ˆë‹¤. intermediate CAì˜ Issuerë¥¼ í™•ì¸í•œë‹¤. Root CAê°€ Issuerë¡œ ë˜ì–´ìˆë‹¤. Root CAëŠ” ë¸Œë¼ìš°ì €ê°€ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAë‹¤. Root CAì˜ digital signatureë¥¼ ë¸Œë¼ìš°ì €ê°€ ì´ë¯¸ ê°€ì§€ê³  ìˆëŠ” Root CAì˜ public keyë¡œ verifyí•œë‹¤. Root CA digital signature verify ì™„ë£Œ. Root CA â†’ Intermediate CA â†’ End-entity ëª¨ë‘ chain of trustë¥¼ í†µí•´ì„œ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì¸ì¦ì„œê°€ ëœë‹¤. [Picture 10] Chain of Trust ê³¼ì • Chain ê³„ì¸µ [Picture 11] Chain ê³„ì¸µ Root Certificate AKA Trust Anchor ìµœìƒë‹¨ì¸ RootëŠ” ë³´ì¦í•´ ì¤„ ê³³ì´ ì—†ê¸° ë•Œë¬¸ì— Root CAëŠ” self-signedì„ í•œë‹¤. OS, ì„œë“œíŒŒí‹° ì›¹ ë¸Œë¼ìš°ì €, í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ Root CAì˜ ì¸ì¦ì„œë¥¼ ì‚¬ì „ì— ì„¤ì¹˜í•´ë‘”ë‹¤. clinetëŠ” chain of trustë¥¼ í†µí•´ì„œ end-entityê°€ Root ì— ì¸ì¦ì´ ë˜ì—ˆëŠ”ì§€ ì‹ë³„í•  ìˆ˜ ìˆë‹¤. Rootê°€ end-entityì— ì§ì ‘ ì„œëª…í•˜ëŠ” ì¼ì€ ê±°ì˜ ì—†ê³ , ì¤‘ê°„ì— í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ Intermediate CAê°€ ì„œëª…ì„ í•œë‹¤. Rootì˜ Private keyê°€ ë³€ê²½ì´ ë˜ì—ˆë‹¤ë©´ í•´ë‹¹ Private keyë¡œ ë°œê¸‰ë°›ì€ ëª¨ë“  ì¸ì¦ì„œë¥¼ ì¬ë°œê¸‰ í•´ì•¼ í•œë‹¤. Intermediate Certificate ê±°ì˜ ëª¨ë“  SSL ì¸ì¦ì„œ chainì—ëŠ” ìµœì†Œ í•˜ë‚˜ì˜ Intermediate CAê°€ ë“¤ì–´ê°€ ìˆë‹¤. Intermediate CAëŠ” Root CAì˜ ì‹ ë¢°ì„±(trustworthy)ì˜ í™•ì¥ì— í•„ìˆ˜ì ì¸ ì—°ê²°ì ì´ê³ , Root CAì™€ end-entityì— ì¶”ê°€ì ì¸ ë³´ì•ˆ ë ˆë²¨ì´ ëœë‹¤. End-entity Certificate End-entityì˜ ì¸ì¦ì„œëŠ” ë³´ì•ˆ, í™•ì¥ì„±, CA compliance ë“±ì„ ì œê³µí•˜ì§€ë§Œ, ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì€ ëŒ€ìƒ (subject)ì˜ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ì§€ëŠ” ëª»í•œë‹¤. End-entityëŠ” í¬ë¦¬í‹°ì»¬í•œ ì •ë³´ë¥¼ CSRì— ë‹´ì•„ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì£¼ëŠ” CA(issuer)ì—ê²Œ ì œì¶œí•˜ê³ , CAê°€ íŒë‹¨í•˜ê¸°ì— ì œì¶œëœ ì •ë³´ê°€ ë¯¿ì„ ìˆ˜ ìˆë‹¤ë©´ CAì˜ Private keyë¡œ ì„œëª…ì„ í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì¤€ë‹¤. ì´ ì¸ì¦ì„œê°€ verified ë˜ëŠ” signed ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ SSL connectionì€ ì‹¤íŒ¨í•œë‹¤. (plus)ì¸ì¦ì„œê°€ ì‚¬ìš©ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ ëª¨ì‹ë„ ë¸Œë¼ìš°ì €ì™€ ì„œë²„ì˜ request - response ê³¼ì • ëª¨ì‹ë„\n[Picture 11] request - response ê³¼ì • ëª¨ì‹ë„ ë¸Œë¼ìš°ì €ê°€ youtube.com ì„ ìš”ì²­í•œë‹¤. youtubeê°€ ì¸ì¦ì„œ ë²ˆë“¤ì„ ë¸Œë¼ìš°ì €ì— ì œì¶œí•œë‹¤. ë¸Œë¼ìš°ì €ëŠ” ìì‹ ì˜ CA public key ë¦¬ìŠ¤íŠ¸ë¡œ ì„œë²„ê°€ ì œì¶œí•œ ì¸ì¦ì„œê°€ ì •ë§ë¡œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” CAì— ì˜í•´ ì„œëª…ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤. Intermediate CAëŠ” ì§€ì •ëœ Root CAê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì˜ ì…ì¥ì—ì„œëŠ” ë¯¿ì„ ìˆ˜ ì—†ëŠ” CAë‹¤. ì œì¶œëœ ì¸ì¦ì„œ ë²ˆë“¤ì„ íƒ€ê³  ì˜¬ë¼ê°€ì„œ Root CAê¹Œì§€ ê°„ë‹¤. ì‹ ë¢°í•˜ê¸°ë¡œ í•œ ì¸ì¦ì„œì— ëª…ì‹œë˜ì–´ìˆëŠ” domain nameì´ë‚˜ ipê°€ ë§ë‹¤ë©´, ì„œë²„ì˜ public keyë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ì¹­í‚¤ë¥¼ ìƒì„±í•˜ì—¬ ì„œë²„ì™€ ê³µìœ í•œë‹¤. ì´ ëŒ€ì¹­í‚¤ë¡œ connectionì˜ ëª¨ë“  íŠ¸ë˜í”½ì„ ì•”í˜¸í™”í•œë‹¤. ëŒ€ì¹­í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¹„ëŒ€ì¹­í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì•”í˜¸í™”í•˜ëŠ” ê²ƒë³´ë‹¤ íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì— ëŒ€ì¹­í‚¤ë¥´ë¥´ ì‚¬ìš©í•œë‹¤. ë³µí˜¸í™”ëŠ” private keyë¥¼ ê°€ì§€ê³  ìˆëŠ” ì„œë²„ë§Œ ê°€ëŠ¥í•˜ë‹¤. CA-signed ì¸ì¦ì„œ ë°œê¸‰ ê³¼ì • ëª¨ì‹ë„\n[Picture 12] CA-signed ì¸ì¦ì„œ ë°œê¸‰ ê³¼ì • ëª¨ì‹ë„ Self-signed ì¸ì¦ì„œ ë°œê¸‰ ê³¼ì • ëª¨ì‹ë„\n[Picture 13] Self-signed ì¸ì¦ì„œ ë°œê¸‰ ê³¼ì • ëª¨ì‹ë„","date":"2022-08-27","permalink":"https://leeleelee3264.github.io/post/2022-08-27-digital-certificate-part-final/","tags":["Infra"],"title":"Digital certificate ì ìš©í•˜ê¸°"},{"content":"\noauth2ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” Myinfo API ë¥¼ ì‚¬ìš©í•˜ëŠ” connector clientë¥¼ Python/Djangoë¡œ êµ¬í˜„í•œë‹¤.\n[github]\n[api document]\n[quick start]\nIndex\nMyinfoë€? í”„ë¡œì íŠ¸ ëª©í‘œ í”„ë¡œì íŠ¸ êµ¬í˜„ í”„ë¡œì íŠ¸ íšŒê³  Myinfoë€? ì‹±ê°€í´ Mydata ì„œë¹„ìŠ¤ ì •ë¶€ê°€ ì£¼ë„í•œ Mydata ì„œë¹„ìŠ¤ê°€ ëª‡ ê°œì˜ ë‚˜ë¼ì— ìˆë‹¤ê³  í•˜ëŠ”ë°, ì‹±ê°€í´ ì •ë¶€ì˜ SingpassëŠ” ê·¸ ì¤‘ì—ì„œë„ ëª¨ë²”ì‚¬ë¡€ë¡œ ë½‘íŒë‹¤ê³  í•œë‹¤. SingpassëŠ” ì‹±ê°€í¬ë¥´ì˜ 15ì„¸ ì´ìƒì˜ ì¸êµ¬ ì¤‘ 97% ê°€ ì“°ê³  ìˆëŠ” ì•„ì£¼ í™œë°œí•œ ì„œë¹„ìŠ¤ì´ë‹¤.\nSingpassì— ìˆëŠ” ì—¬ëŸ¬ê°€ì§€ ì„œë¹„ìŠ¤ ì¤‘ MyinfoëŠ” Person Dataë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¡œ, í•œêµ­ì˜ ì¹´ì¹´ì˜¤ë‚˜ ë„¤ì´ë²„ ì•„ì´ë”” ì²˜ëŸ¼ ouath2 ë¡œê·¸ì¸ê³¼ íšŒì›ê°€ì…ì„ í•  ìˆ˜ ìˆë‹¤. [Picture 1] ì—ì„œ singpassì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ë” ìì„¸íˆ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.\n[Picture 1] Introduce Singpass Myinfo oauth2 MyinfoëŠ” [Picture 2] ì™€ ê°™ì€ oauth2 êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.\n[Picture 2] Myinfo oauth2 êµ¬ì¡° Resource Owner Myinfo ì‚¬ìš©ì Application ë‚´ê°€ êµ¬í˜„í•˜ëŠ” connectorë¡œ, Myinfo ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì£¼ì²´ Identify Providers / Service Authorization Platform ì¸ì¦ì„œë²„ ì‚¬ìš©ìì˜ ì¸ì¦ì •ë³´ì™€ ê¶Œí•œ ì •ë³´ë¥¼ ì†Œìœ í•œ ì„œë²„ Singpass ë¡œê·¸ì¸ í˜ì´ì§€ ì œê³µ Resource Server ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì†Œìœ í•œ ì„œë²„ ì¸ì¦ ì„œë²„ì— ë¡œê·¸ì¸ ì„±ê³µ í›„ ì ‘ê·¼ Myinfo Resource API ê¶Œí•œ ì¸ì¦ ìš”ì²­ [authorise api] GET /v3/authorise Singpass ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. ë¡œê·¸ì¸ í›„ Singpassì—ì„œ ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì— ëŒ€í•œ ë™ì˜ë¥¼ ì§„í–‰í•œë‹¤. ì‚¬ìš©ìê°€ ë™ì˜í–ˆì„ ê²½ìš° authcodeë¥¼ return í•œë‹¤. Token ìš”ì²­ [token api] POST /v3/token authocodeë¥¼ ì‚¬ìš©í•˜ì—¬ tokenì„ ìš”ì²­í•œë‹¤. PKIë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„ ì§„í–‰í•œë‹¤. ì¸ì¦ì´ ì™„ë£Œë˜ë©´ tokenì„ return í•œë‹¤. ì‚¬ìš©ì ì •ë³´ ìš”ì²­ [person api] GET /v3/person/{sub} token ì†ì˜ access tokenì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•œë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ return í•œë‹¤. í”„ë¡œì íŠ¸ ëª©í‘œ Singpassê°€ ì œê³µí•˜ëŠ” [Java]ì™€ [node.js] ë²„ì „ì˜ client connector ì²˜ëŸ¼ ì´ë²ˆì— í”„ë¡œì íŠ¸ë¡œ python ë²„ì „ì˜ connectorë¥¼ ë§Œë“¤ì—ˆë‹¤. ì•„ì˜ˆ í•˜ë‚˜ì˜ REST API í˜•íƒœë¡œ ì œê³µì„ í•˜ê¸° ìœ„í•´ í”„ë ˆì„ì›Œí¬ë¡œ Djangoë¥¼ ì„ íƒí–ˆë‹¤.\ní”„ë¡œì íŠ¸ ëª©í‘œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì´ë£¨ê³ ì í•œ ëª©í‘œëŠ” ì•„ë˜ì™€ ê°™ë‹¤. ëŒ€ë¶€ë¶„ì˜ í† ì´ í”„ë¡œì íŠ¸ê°€ ì œëŒ€ë¡œ ì •ë¦¬ê°€ ë˜ì–´ìˆì§€ ì•Šê±°ë‚˜ ì½”ë“œê°€ ì—‰ë§ìœ¼ë¡œ ì§œì—¬ì§ˆ ë•Œê°€ ë§ì•„ì„œ ì´ë²ˆì—ëŠ” ì²˜ìŒë¶€í„° í™•ì‹¤í•˜ê²Œ ëª©í‘œë¥¼ ì„¤ì •í–ˆë‹¤.\nCode Quality\nDDD ì•„í‚¤í…ì²˜ë¡œ ì„œë²„ë¥¼ êµ¬í˜„í•œë‹¤. ìµœì†Œ 2íšŒì˜ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•œë‹¤. python lint(flake8, pylint, mypy)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœëŒ€í•œ python styleì„ ê³ ìˆ˜í•œë‹¤. Pipenvë¥¼ ì‚¬ìš©í•´ì„œ python íŒ¨í‚¤ì§€ë¥¼ ê´€ë¦¬í•œë‹¤. Documentation\nGithub READMEë¥¼ ì‘ì„±í•œë‹¤. API documentë¥¼ ì‘ì„±í•œë‹¤. Projectì— ëŒ€í•œ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•œë‹¤. Dev Stack stack info Backend Language Python Backend Framework Django Code Architecture Domain Driven Desgin Python Package Managment Pipenv API Security PKI Version Control Github API Document GitBook í”„ë¡œì íŠ¸ êµ¬í˜„ Make Request Myinfo oauth2 êµ¬ì¡°ë¥¼ ë°˜ì˜í•˜ì—¬, connector ì„œë²„ì˜ í˜¸ì¶œ flowë¥¼ [Picture 3] ê°™ì´ ì„¤ê³„í–ˆë‹¤.\n[Picture 3] connector ì„œë²„ í˜¸ì¶œ flow Step 1: Get myinfo login url Request GET /users/me/external/myinfo-redirect-login\ncurl -i -H 'Accept: application/json' \u0026lt;http://localhost:3001/user/me/external/myinfo-redirect-login\u0026gt; Response { \u0026quot;message\u0026quot;: \u0026quot;OK\u0026quot;, \u0026quot;data\u0026quot;: { \u0026quot;url\u0026quot;: \u0026quot;https://test.api.myinfo.gov.sg/com/v3/authorise?client_id=STG2-MYINFO-SELF-TEST\u0026amp;attributes=name,dob,birthcountry,nationality,uinfin,sex,regadd\u0026amp;state=eb03c000-00a3-4708-ab30-926306bfc4a8\u0026amp;redirect_uri=http://localhost:3001/callback\u0026amp;purpose=python-myinfo-connector\u0026quot;, \u0026quot;state\u0026quot;: \u0026quot;eb03c000-00a3-4708-ab30-926306bfc4a8\u0026quot; } } Step 2: Browse myinfo login url Request curl \u0026lt;https://test.api.myinfo.gov.sg/com/v3/authorise?client_id=STG2-MYINFO-SELF-TEST\u0026amp;attributes=name,dob,birthcountry,nationality,uinfin,sex,regadd\u0026amp;state=eb03c000-00a3-4708-ab30-926306bfc4a8\u0026amp;redirect_uri=http://localhost:3001/callback\u0026amp;purpose=python-myinfo-connector\u0026gt; Response [Picture 4] Myinfo Login Page Step 3: Login and check agree terms Login Check Login page in [Picture 5]\nAgree Terms [Picture 5] Myinfo Terms Agreement Page Step 4: Callback API get called by Myinfo Myinfoì—ì„œ Requestë¥¼ í•˜ëŠ” Stepì´ë‹¤.\në¡œê·¸ì¸ì„ í•˜ê³  termsì— ë™ì˜ë¥¼ í•˜ë©´ Myinfoì—ì„œ connector clientì˜ callback APIë¥¼ í˜¸ì¶œí•´ authcodeë¥¼ ë„˜ê²¨ì¤€ë‹¤.\nRequest GET /callback?{code}\ncurl \u0026lt;http://localhost:3001/callback?code=8932a98da8720a10e356bc76475d76c4c628aa7f\u0026amp;state=e2ad339a-337f-45ec-98fa-1672160cf463\u0026gt; Response [Picture 6] Callback Response Page\nFinal Step: Get Person data ìë™í™”ëœ Stepì´ë‹¤.\nCallback APIì˜ ì‘ë‹µì¸ callback í˜ì´ì§€ëŠ” ìë™ìœ¼ë¡œ connector clientì˜ person data APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ í–ˆë‹¤. í•´ë‹¹ APIê°€ Myinfoì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë§ˆì§€ë§‰ ë‹¨ê³„ì´ë‹¤.\nRequest GET /users/me/external/myinfo\ncurl -i -H 'Accept: application/json' \u0026lt;http://localhost:3001/user/me/external/myinfo\u0026gt; Response { \u0026quot;message\u0026quot;: \u0026quot;OK\u0026quot;, \u0026quot;sodata\u0026quot;: { \u0026quot;regadd\u0026quot;: { \u0026quot;country\u0026quot;: { \u0026quot;code\u0026quot;: \u0026quot;SG\u0026quot;, \u0026quot;desc\u0026quot;: \u0026quot;SINGAPORE\u0026quot; }, \u0026quot;unit\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;10\u0026quot; }, \u0026quot;street\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;ANCHORVALE DRIVE\u0026quot; }, \u0026quot;lastupdated\u0026quot;: \u0026quot;2022-07-14\u0026quot;, \u0026quot;block\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;319\u0026quot; }, \u0026quot;source\u0026quot;: \u0026quot;1\u0026quot;, \u0026quot;postal\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;542319\u0026quot; }, \u0026quot;classification\u0026quot;: \u0026quot;C\u0026quot;, \u0026quot;floor\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;38\u0026quot; }, \u0026quot;type\u0026quot;: \u0026quot;SG\u0026quot;, \u0026quot;building\u0026quot;: { \u0026quot;value\u0026quot;: \u0026quot;\u0026quot; } }, \u0026quot;dob\u0026quot;: \u0026quot;1988-10-06\u0026quot;, \u0026quot;sex\u0026quot;: \u0026quot;M\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;ANDY LAU\u0026quot;, \u0026quot;birthcountry\u0026quot;: \u0026quot;SG\u0026quot;, \u0026quot;nationality\u0026quot;: \u0026quot;SG\u0026quot;, \u0026quot;uinfin\u0026quot;: \u0026quot;S6005048A\u0026quot; } } PKI Digital Signature MyinfoëŠ” PKI Digital Signatureë¥¼ í•„ìš”ë¡œ í•œë‹¤. í•´ë‹¹ ë¬¸ì„œì—ì„œëŠ” pythonì—ì„œ êµ¬í˜„ì„ í•  ë•Œ PKIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë§Œì„ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— PKIì— ëŒ€í•œ ë” ìì„¸í•œ ì„¤ëª…ì€ ë§í¬ë¡œ ì²¨ë¶€í•˜ê² ë‹¤. [LeeLee- Digital Certificate]\npython íŒ¨í‚¤ì§€ë¡œëŠ” *jwcrypto*ì™€ Cryptoë¥¼ ì‚¬ìš©í–ˆë‹¤.\nPKI ì‹œë‚˜ë¦¬ì˜¤ connector client private key\n[myinfo token api]ë¥¼ í˜¸ì¶œí•  ë•Œ [myinfo person api]ë¥¼ í˜¸ì¶œ í•  ë•Œ [myinfo person api] ì‘ë‹µ decrypt í•  ë•Œ myinfoì—ì„œ connector clientì˜ public keyë¡œ ì‘ë‹µì„ ì•”í˜¸í™” í–ˆê¸° ë•Œë¬¸ myinfo public key\nmyinfo token api ì‘ë‹µ verify í•  ë•Œ myinfoì—ì„œ myinfoì˜ private keyë¡œ ì‘ë‹µì„ ì•”í˜¸í™” í–ˆê¸° ë•Œë¬¸ myinfo person api ì‘ë‹µ verify í•  ë•Œ myinfoì—ì„œ myinfoì˜ private keyë¡œ ì‘ë‹µì„ ì•”í˜¸í™” í–ˆê¸° ë•Œë¬¸ public, privateKey ë¶ˆëŸ¬ì˜¤ê¸° 1 2 3 4 5 6 7 8 9 10 11 from jwcrypto import jwk PrivateKey = jwk.JWK PublicKey = jwk.JWK def _get_key(self, key: str) -\u0026gt; Union[PrivateKey, PublicKey]: encode_key = key.encode(\u0026#39;utf-8\u0026#39;) key_dict = jwk.JWK.from_pem(encode_key) return key_dict connector client private keyë¡œ ì„œëª…í•˜ê¸° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 import base64 from Crypto.Hash import SHA256 from Crypto.PublicKey import RSA from Crypto.Signature import PKCS1_v1_5 Signature = str def _sign_on_raw_header( self, base_string: str, private_key: str, ) -\u0026gt; Signature: digest = SHA256.new() digest.update( base_string.encode(\u0026#39;utf-8\u0026#39;), ) pk = RSA.importKey(private_key) signer = PKCS1_v1_5.new(pk) signature = str(base64.b64encode(signer.sign(digest)), \u0026#39;utf-8\u0026#39;) return signature connector client private keyë¡œ ì‘ë‹µ decrypt í•˜ê¸° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 import json from jwcrypto import ( jwe, jwk, ) PrivateKey = jwk.JWK def _decrypt( self, encrypted_payload: str, key: PrivateKey, ) -\u0026gt; DecryptedPersonData: params = self._get_decrypt_params(encrypted_payload) encryption = jwe.JWE() encryption.deserialize(params, key) data = encryption.plaintext data_str = json.loads(data) return data_str myinfo public keyë¡œ ì‘ë‹µ verify í•˜ê¸° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import json from jwcrypto import jwk PublicKey = jwk.JWK DecodedPersonData = dict def _decode( self, encoded_payload: str, key: PublicKey, ) -\u0026gt; DecodedPersonData: token = jwt.JWT() token.deserialize(jwt=encoded_payload, key=key) data = token.claims data_dict = json.loads(data) person = DecodedPersonData(**data_dict) return person í”„ë¡œì íŠ¸ íšŒê³  ë¬¸ì„œí™” ì •í•´ë‘” ëª©í‘œë¥¼ ì˜ ì´í–‰í•œ ê¸°ë¶„ì´ ë“¤ì–´ì„œ ë¿Œë“¯í–ˆë‹¤. ë˜í•œ í•­ìƒ ë¯¸í¡í–ˆë˜ ë¬¸ì„œí™”ë¥¼ ê¼¼ê¼¼í•˜ê²Œ í•´ ë‘” ê±° ê°™ì•„ ë§Œì¡±ìŠ¤ëŸ½ë‹¤. í•˜ì§€ë§Œ ë¬¸ì„œí™”ë¥¼ í•˜ëŠ” ê³¼ì •ì—ì„œ ì–´ë–»ê²Œ ë‚´ê°€ ë§í•˜ê³ ì í•˜ëŠ” ë°”ë¥¼ ë” ê¹”ë”í•˜ê²Œ ê¸€ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼ì„ ë§ì´ í–ˆê³ , ì•„ì§ë„ ë¶€ì¡±í•œ ë¶€ë¶„ì´ ë§ì´ ë³´ì¸ë‹¤. ë¦¬íŒ©í† ë§ ì½”ë“œ ë˜í•œ 2ë²ˆ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í–ˆì§€ë§Œ í¬ìŠ¤íŒ…ì„ ìœ„í•´ì„œ ë‹¤ì‹œ ì½”ë“œë¥¼ ë³´ë‹ˆ ë˜ ë¦¬íŒ©í† ë§ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤. í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ 1,2ë²ˆì˜ ë¦¬íŒ©í† ë§ì„ í•˜ê³  í”„ë¡œì íŠ¸ê°€ ëë‚˜ê³  2~3ë‹¬ ì§€ë‚˜ì„œ ë¦¬íŒ©í† ë§ì„ 1 ë²ˆ ì§„í–‰í•˜ë©´ ì¢‹ì„ ê±° ê°™ë‹¤. Boilerplate ì–´ë–¤ í”„ë¡œì íŠ¸ë¥¼ í•˜ë”ë¼ë„ í”„ë ˆì„ì›Œí¬ settingì„ í•˜ëŠ”ë° ì´ˆê¸° ì‹œê°„ì„ ë§ì´ ì†Œìš”í•˜ëŠ”ë°, ì•ìœ¼ë¡œ Djangoë¡œ ê³„ì† í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ì˜ˆì •ì´ë¼ë©´ pre-settingì´ ì–´ëŠ ì •ë„ ë˜ì–´ìˆëŠ” Django Boilerplate ë¥¼ ë§Œë“¤ì–´ì•¼ê² ë‹¤.\n","date":"2022-07-23","permalink":"https://leeleelee3264.github.io/post/2022-07-23-project-myinfo-connector-python/","tags":["Project"],"title":"Pythonìœ¼ë¡œ Myinfo oauth2 client connector êµ¬í˜„í•˜ê¸°"},{"content":"\nê°„ë‹¨í•œ í”„ë¡œíŒŒì¼ë§ì„ í•  ìˆ˜ ìˆëŠ” profilerë¥¼ Python decoratorë¡œ êµ¬í˜„í•œë‹¤.\nIndex\nprofiler êµ¬í˜„ ê³„ê¸° profiler êµ¬í˜„ ê°œì„ í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ profiler êµ¬í˜„ ê³„ê¸° Django í™˜ê²½ì—ì„œ unittestë¥¼ í•˜ë©° ê°„ë‹¨í•˜ê²Œ í¼í¬ë¨¼ìŠ¤ë¥¼ ì¸¡ì •í•˜ê³  ì‹¶ì—ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ í”„ë¡œíŒŒì¼ë§ì„ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— Middleware ê°™ì€ ê²ƒì€ ë§Œë“¤ì§€ ì•Šì•˜ë‹¤. ëŒ€ì‹ ì— Pythonì˜ decoratorë¡œ ë§Œë“¤ì—ˆë‹¤. ì•ìœ¼ë¡œ ë” ì‹¬í™”ë˜ê³  ìœ ìµí•œ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” Profilerë¥¼ decorator í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ë©´ ìœ ìš©í•  ê²ƒ ê°™ë‹¤.\nêµ¬í˜„í•œ profiler\në©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ë³´ê¸° ìœ„í•œ ram_profiler í•¨ìˆ˜ì—ì„œ í˜¸ì¶œëœ ì¿¼ë¦¬ì™€ ì¿¼ë¦¬ ì‹¤í–‰ì‹œê°„ì„ ë³´ê¸° ìœ„í•œ query_profiler í•¨ìˆ˜ ì‹¤í–‰ì‹œê°„ ì„ ë³´ê¸° ìœ„í•œ elapsed_timer profiler êµ¬í˜„ ram_profiler ì´ í”„ë¡œíŒŒì¼ëŸ¬ë¥¼ êµ¬í˜„í•˜ë‹¤ê°€ ì•Œê²Œ ëœ ì‚¬ì‹¤ì¸ë° Pythonì—ì„œ ë©”ëª¨ë¦¬ë‚˜ CPU ì‚¬ìš©ëŸ‰ì„ ë³´ë ¤ë©´ psutill builtin íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤.\ndecoratorëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì „ê³¼ í›„ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ê°€ì ¸ì™€, í•¨ìˆ˜ê°€ í˜¸ì¶œì´ ë˜ë©´ì„œ ì–¼ì¶” ì–´ëŠ ì •ë„ì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ ë¹„êµí•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\nram_profiler êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 def ram_profiler(fn): \u0026#34;\u0026#34;\u0026#34; í¼í¬ë¨¼ìŠ¤ ì²´í¬ë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ í”„ë¡œíŒŒì¼ëŸ¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¸¡ì •í•  í•¨ìˆ˜ ìœ„ì— @ram_profiler ë¥¼ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ì²´í¬í•˜ëŠ” ë©”ëª¨ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. 1) ê·¸ëƒ¥ í˜„ì¬ memory usage ì •ë³´ë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° 2) í˜„ì¬ process idë¥¼ í†µí•´ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ì˜ memory usageë¥¼ ì •í™•í•˜ê²Œ ë¹„êµí•˜ëŠ” ê²½ìš° ex) @ram_profiler def pre_allot_offering(offering: Offering): \u0026#34;\u0026#34;\u0026#34; def inner(*args, **kwargs): print(\u0026#39;\\n\u0026#39;) print(\u0026#34;===== memory usage check =====\u0026#34;) memory_usage_dict = dict(psutil.virtual_memory()._asdict()) memory_usage_percent = memory_usage_dict[\u0026#39;percent\u0026#39;] print(f\u0026#34;BEFORE CODE :: memory_usage_percent: {memory_usage_percent}%\u0026#34;) pid = os.getpid() current_process = psutil.Process(pid) current_process_memory_usage_as_kb = current_process.memory_info()[0] / 2. ** 20 print(f\u0026#34;BEFORE CODE :: Current memory KB : {current_process_memory_usage_as_kb: 9.3f} KB\u0026#34;) target_func = fn(*args, **kwargs) print(\u0026#34;==\u0026#34; * 20) print(f\u0026#34;== {fn.__name__} memory usage check ==\u0026#34;) memory_usage_dict = dict(psutil.virtual_memory()._asdict()) memory_usage_percent = memory_usage_dict[\u0026#39;percent\u0026#39;] print(f\u0026#34;AFTER CODE :: memory_usage_percent: {memory_usage_percent}%\u0026#34;) pid = os.getpid() current_process = psutil.Process(pid) current_process_memory_usage_as_kb = current_process.memory_info()[0] / 2. ** 20 print(f\u0026#34;AFTER CODE :: Current memory KB : {current_process_memory_usage_as_kb: 9.3f} KB\u0026#34;) print(\u0026#39;\\n\u0026#39;) return target_func return inner ram_profiler ê²°ê³¼ ===== memory usage check ===== BEFORE CODE :: memory_usage_percent: 79.7% BEFORE CODE :: Current memory KB : 197.250 KB ======================================== == pre_allot_offering memory usage check == AFTER CODE :: memory_usage_percent: 79.7% AFTER CODE :: Current memory KB : 197.312 KB query_profiler decoratorëŠ” ì¿¼ë¦¬ë¥¼ ê´€ë¦¬í•˜ëŠ” contextë¥¼ ì„í¬íŠ¸ í•´ì™€ì„œ íƒ€ê²Ÿ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í˜¸ì¶œë˜ì—ˆë˜ ì¿¼ë¦¬ë“¤ì„ ìº¡ì²˜í•´ë‘ì—ˆë‹¤ê°€ í•¨ìˆ˜ê°€ ëì´ ë‚˜ë©´ ë³´ì—¬ì¤€ë‹¤. ORMì—ì„œ ì‹¤ì œë¡œ ì–´ë–¤ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ëŠ”ì§€ ë´ì•¼ í•  ë•Œ, ì¡°ê±´ë¬¸ì— ë”°ë¼ ì¿¼ë¦¬ê°€ ë‹¬ë¼ì§ˆ ë•Œ, N + 1 ì¿¼ë¦¬ë¥¼ ì¡ì•„ ë‚¼ ë•Œ ì‚¬ìš©í•˜ê¸° ì¢‹ë‹¤.\nquery_profiler êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 def query_profiler(fn): \u0026#34;\u0026#34;\u0026#34; í˜¸ì¶œì´ ëœ queryë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í”„ë¡œíŒŒì¼ëŸ¬ í˜¸ì¶œ ëœ queryë¥¼ í™•ì¸í•  í•¨ìˆ˜ ìœ„í—¤ @query_profiler ë¥¼ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ex) @query_profiler def pre_allot_offering(offering: Offering): \u0026#34;\u0026#34;\u0026#34; def inner(*args, **kwargs): print(\u0026#39;\\n\u0026#39;) print(f\u0026#34;===== {fn.__name__} called query check =====\u0026#34;) with CaptureQueriesContext(connection) as context: target_func = fn(*args, **kwargs) for index, query in enumerate(context.captured_queries): sql = query.get(\u0026#39;sql\u0026#39;) time = query.get(\u0026#39;time\u0026#39;) print(f\u0026#39;CALLED QUERY :: [{index}]\u0026#39;) print(f\u0026#39;CALLED QUERY :: query: {sql}\u0026#39;) print(f\u0026#39;CALLED QUERY :: executed time: {time}\u0026#39;) print(\u0026#34;=====\u0026#34;) return target_func return inner query_profiler ê²°ê³¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 ===== pre_allot_offering called query check ===== CALLED QUERY :: [0] CALLED QUERY :: query: SAVEPOINT `s4377609600_x5` CALLED QUERY :: executed time: 0.001 ===== CALLED QUERY :: [1] CALLED QUERY :: query: SELECT `offering_subscription`.`id` # ì‹¤ì œ ì¿¼ë¦¬ëŠ” ë¸”ë¼ì¸ë“œ CALLED QUERY :: executed time: 0.00 ===== CALLED QUERY :: [2] CALLED QUERY :: query: UPDATE `offering_subscription` SET # ì‹¤ì œ ì¿¼ë¦¬ëŠ” ë¸”ë¼ì¸ë“œ CALLED QUERY :: executed time: 0.003 ===== CALLED QUERY :: [3] CALLED QUERY :: query: SELECT `offering_subscription`.`id`, # ì‹¤ì œ ì¿¼ë¦¬ëŠ” ë¸”ë¼ì¸ë“œ ===== CALLED QUERY :: [4] CALLED QUERY :: query: SELECT `offering_subscription`.`id`, # ì‹¤ì œ ì¿¼ë¦¬ëŠ” ë¸”ë¼ì¸ë“œ CALLED QUERY :: executed time: 0.002 ===== CALLED QUERY :: [5] CALLED QUERY :: query: UPDATE `offering_subscription` SET # ì‹¤ì œ ì¿¼ë¦¬ëŠ” ë¸”ë¼ì¸ë“œ CALLED QUERY :: executed time: 0.002 ===== CALLED QUERY :: [6] CALLED QUERY :: query: RELEASE SAVEPOINT `s4377609600_x5` CALLED QUERY :: executed time: 0.001 ===== elapsed_timer decoratorëŠ” í•¨ìˆ˜ì˜ ì‹œì‘ì‹œê°„ê³¼ ëë‚˜ëŠ” ì‹œê°„ì„ ì¸¡ì •í•˜ì—¬ í•¨ìˆ˜ ì‹¤í–‰ì‹œê°„ì´ ì–´ëŠì •ë„ì¸ì§€ë¥¼ ê³„ì‚°í•œë‹¤.\nelapsed_timer êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 def elapsed_timer(fn): \u0026#34;\u0026#34;\u0026#34; í¼í¬ë¨¼ìŠ¤ ì²´í¬ë¥¼ ìœ„í•œ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • íƒ€ì´ë¨¸ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•  í•¨ìˆ˜ ìœ„ì— @elapsed_timer ë¥¼ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. í¼í¬ë¨¼ìŠ¤ í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´ ì§€ì›Œì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ex) @elapsed_timer def pre_allot_offering(offering: Offering): \u0026#34;\u0026#34;\u0026#34; def inner(*args, **kwargs): print(\u0026#39;\\n\u0026#39;) print(f\u0026#34;===== {fn.__name__} elapsed time check =====\u0026#34;) start = perf_counter() target_func = fn(*args, **kwargs) end = perf_counter() print(f\u0026#39;ELAPSED :: total: start: {start} sec - end: {end} sec\u0026#39;) duration = end - start print(f\u0026#39;ELAPSED :: duration: {duration} sec\u0026#39;) print(f\u0026#39;ELAPSED :: duration in minutes : {str(timedelta(seconds=duration))} mins\u0026#39;) print(\u0026#39;\\n\u0026#39;) return target_func return inner elapsed_timer ê²°ê³¼ 1 2 3 4 ===== pre_allot_offering elapsd time check ===== ELAPSED :: total: start: 8.705878 sec - end: 8.72449375 sec ELAPSED :: duration: 0.018615750000000375 sec ELAPSED :: duration in minutes : 0:00:00.018616 mins (builtin) @profiler ë©”ëª¨ë¦¬ë¥¼ í”„ë¡œíŒŒì¼ë§í•˜ëŠ” ê²ƒì— í•œì •í•œë‹¤ë©´ Pythonì—ì„œ builtinìœ¼ë¡œ ì œê³µí•˜ëŠ” memory_profiler ë¼ëŠ” ê²ƒì´ ìˆë‹¤. íŒ¨í‚¤ì§€ ì•ˆì˜ @profiler ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜ ì•ˆì—ì„œ ì½”ë“œê°€ ì‹¤í–‰ì´ ë  ë•Œ í•œ ì¤„ í•œ ì¤„ ì–¼ë§ˆì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.\nORMì„ í¬í•¨í•˜ê³  ìˆëŠ” ì½”ë“œì—ë„ ì‚¬ìš©ì„ í•´ë³´ë ¤ í–ˆëŠ”ë° recursive í•˜ê²Œ ë™ì‘ì„ í•˜ë‹¤ê°€ ìŠ¤íƒì´ í„°ì ¸ì„œ ì‚¬ìš©ì„ í•  ìˆ˜ ì—†ì—ˆë‹¤. í•¨ìˆ˜ê°€ í•œ ì¤„ ì”© í˜¸ì¶œë˜ë©´ì„œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ë³´ê¸°ì—ëŠ” ì •ë§ ì¢‹ì€ ë°ì½”ë ˆì´í„° ì²˜ëŸ¼ ë³´ì´ëŠ”ë° ê¼­ ë‹¤ìŒì— ì¨ë³´ë„ë¡ í•´ì•¼ê² ë‹¤.\n@profiler ì‚¬ìš© ì˜ˆì‹œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 from memory_profiler import profile @profile def main_func(): import random arr1 = [random.randint(1,10) for i in range(100000)] arr2 = [random.randint(1,10) for i in range(100000)] arr3 = [arr1[i]+arr2[i] for i in range(100000)] del arr1 del arr2 tot = sum(arr3) del arr3 print(tot) if __name__ == \u0026#34;__main__\u0026#34;: main_func() @profiler ê²°ê³¼ ì˜ˆì‹œ 1 2 3 4 5 6 7 8 9 10 11 12 13 Line # Mem usage Increment Line Contents ================================================ 3 37.0 MiB 37.0 MiB @profile 4 def main_func(): 5 37.0 MiB 0.0 MiB import random 6 37.6 MiB 0.3 MiB arr1 = [random.randint(1,10) for i in range(100000)] 7 38.4 MiB 0.3 MiB arr2 = [random.randint(1,10) for i in range(100000)] 8 39.9 MiB 0.5 MiB arr3 = [arr1[i]+arr2[i] for i in range(100000)] 9 39.9 MiB 0.0 MiB del arr1 10 38.0 MiB 0.0 MiB del arr2 11 38.0 MiB 0.0 MiB tot = sum(arr3) 12 37.2 MiB 0.0 MiB del arr3 13 37.2 MiB 0.0 MiB print(tot) ê°œì„ í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ Pythonì˜ DecoratorëŠ” í•¨ìˆ˜ì˜ ì‹œì‘ - ë ë¶€ë¶„ì— ì¶”ê°€ actionì„ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Wrapperì´ë‹¤. í•¨ìˆ˜ ì¤‘ê°„ì¤‘ê°„ì— í”„ë¡œíŒŒì¼ë§ì„ í•´ì•¼ í•œë‹¤ë©´ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼ì„ í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.\n","date":"2022-06-29","permalink":"https://leeleelee3264.github.io/post/2022-06-30-python-profiler-decorator/","tags":["Backend"],"title":"Python decoratorë¡œ ê°„ë‹¨í•œ profiler êµ¬í˜„í•˜ê¸°"},{"content":"\nPKIì˜ certificateì— ëŒ€í•´ì„œ ë‹¤ë£¬ë‹¤.\nIndex\nì¸ì¦ì„œì— ëŒ€í•´ ì˜ëª» ì•Œê³  ìˆë˜ ì ë“¤ ì¸ì¦ì„œì˜ ì¢…ë¥˜ ì¸ì¦ì„œì™€ ê´€ë ¨ëœ ê°œë… ì¸ì¦ì„œì— ëŒ€í•´ ì˜ëª» ì•Œê³  ìˆë˜ ì ë“¤ ì¸ì¦ì„œì˜ ì¢…ë¥˜ ì ì ˆí•˜ì§€ ì•Šì€ ì¸ì¦ì„œ ë¶„ë¥˜ webì—ì„œ HTTPS í†µì‹ ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” web secureìš© SSL ì¸ì¦ì„œ digital signature(ë””ì§€í„¸ ì„œëª…) ë¥¼ í•˜ê¸° ìœ„í•œ code signing ì¸ì¦ì„œ ë””ì§€í„¸ ì„œëª…ì„ í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì— code signing ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ìœ¼ë ¤ í–ˆë‹¤. í•˜ì§€ë§Œ SSL ì¸ì¦ì„œë„ ë””ì§€í„¸ ì„œëª…ì„ í•  ìˆ˜ ìˆì—ˆê³ , ëª©í‘œì¸ server to server ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹ ì› ë³´ì¥ìš© ë””ì§€í„¸ ì„œëª…ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì•¼ í–ˆë‹¤.\n[Picture 1] ì ì ˆí•˜ì§€ ì•Šì€ ì¸ì¦ì„œ ë¶„ë¥˜ ì ì ˆí•œ ì¸ì¦ì„œ ë¶„ë¥˜ SSL ì¸ì¦ì„œëŠ” ì›¹ì‚¬ì´íŠ¸, ì •í™•íˆ ë§í•˜ë©´ ë¸Œë¼ìš°ì €ì— í•œì •í•´ì„œ ì‚¬ìš©í•œë‹¤ê³  ìƒê°í–ˆëŠ”ë° ì´ëŠ” ë„ˆë¬´ í•œì •ì ì¸ ìƒê°ì´ì—ˆë‹¤. SSL ì¸ì¦ì„œëŠ” clientì™€ serverê°€ (browser to server / server to server) ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì•”í˜¸í™”ë¥¼ í•˜ê¸° ìœ„í•´ ì“°ì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ì— í•œì •ì ì´ì§€ ì•Šë‹¤.\nê²°êµ­ ì¸ì¦ì„œëŠ” [Picture 2] ì²˜ëŸ¼ ë¶„ë¥˜ë¥¼ í•´ì•¼ í•œë‹¤.\n[Picture 2] ì ì ˆí•œ ì¸ì¦ì„œ ë¶„ë¥˜ Code Signing ì¸ì¦ì„œ ë°œê¸‰ë°›ìœ¼ë ¤ í–ˆë˜ code signing ì¸ì¦ì„œëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì„œëª…ì„ í•´ì„œ í•´ë‹¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ publisherì˜ ì‹ ì›ì„ ë³´ì¥í•˜ëŠ”ë° ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë‚´ê°€ í•„ìš”í–ˆë˜ server to server ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¸ì¦ì„œê°€ ì•„ë‹ˆë‹¤.\ncode signing ì¸ì¦ì„œë¡œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì„œëª…ì„ í•˜ê²Œ ë˜ë©´ [Picture 3] ì™€ ê°™ì´ ì‚¬ìš©ìì—ê²Œ ì–´í”Œë¦¬ì¼€ì´ì…˜ publisher ì— ëŒ€í•œ ì •ë³´ê°€ ì¶”ê°€ë¡œ ì œê³µì´ ëœë‹¤.\n[Picture 3] code signing ì¸ì¦ì„œë¡œ ì„œëª…í•œ application CSR ìƒì„±í•˜ê¸° ëª¨ë“  SSL ì¸ì¦ì„œëŠ” domain validationì„ í•œë‹¤. ì´ ìƒê°ì— ì‚¬ë¡œì¡í˜€ì„œ Root CAê°€ ì„œëª…í•œ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ê¸° ìœ„í•´ ì œì¶œí•´ì•¼ í•˜ëŠ” CSRëŠ” ì¸ì¦ì„œê°€ ì‚¬ìš©ì´ ë  ì„œë²„ì—ì„œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ê³  ìƒê°í–ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ leelee.me ì´ë¼ëŠ” ë£¨íŠ¸ ë„ë©”ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¸ì¦ì„œë¼ê³  í–ˆì„ ë•Œ leelee.me ë„ë©”ì¸ì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” ì„œë²„ì—ì„œ CSRì„ ìƒì„±í•´ì•¼ í•œë‹¤ê³  ìƒê°í•œ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ CSRì„ ë‹¤ë¥¸ ì„œë²„ì—ì„œ ìƒì„±í–ˆë‹¤ë©´, CSRì„ ìƒì„±í•  ë•Œ í•¨ê»˜ ë§Œë“  private keyë¥¼ ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•  ì„œë²„ë¡œ ì˜®ê¸°ë©´ ëœë‹¤.\nì¸ì¦ì„œì˜ ì¢…ë¥˜ SSL Certificate VS Code Signing Certificate ê³µí†µì \nX.509 í˜•íƒœì˜ ë””ì§€í„¸ ì¸ì¦ì„œë‹¤. PKI í˜•ì‹ì„ ì‚¬ìš©í•œë‹¤. ë‘ ì¸ì¦ì„œê°€ ì—†ë‹¤ë©´ ì‚¬ìš©ìì—ê²Œ ë³´ì•ˆ ê²½ê³ ê°€ ë„ì›Œì§„ë‹¤. ë°œê¸‰í•˜ê¸° ì „ì— CAì—ì„œ ë°œê¸‰ìš”ì²­ìë¥¼ ê²€ì¦í•œë‹¤. end userë“¤ì´ í•´í‚¹ë“±ì˜ ì‚¬ì´ë²„ ë²”ì£„ì— ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ì°¨ì´ì \nSSL Certificateì€ ë‘ ì‹œìŠ¤í…œì—ì„œ ì˜¤ê³ ê°€ëŠ” dataë¥¼ ì•”í˜¸í™”í•œë‹¤. Code Signing Certificateì€ ì†Œí”„íŠ¸ì›¨ì–´ ìì²´ë¥¼ hash \u0026amp; sign í•œë‹¤. ëª¨ë“  ì½”ë“œì— ë””ì§€í„¸ ì„œëª…ì„ í•œ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ì´ë©° ë§Œì•½ ì¤‘ê°„ì—ì„œ ëˆ„ê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•œë‹¤ë©´ í•´ì‹œê°’ì´ ë³€ê²½ì´ ë˜ì–´ end userê°€ ì½”ë“œë¥¼ ë‹¤ìš´ë°›ê¸° ì „ì— alertë¥¼ ë„ì›Œ ì‚¬ì „ì— ì„¤ì¹˜ë¥¼ ëª» í•˜ë„ë¡ ë§‰ëŠ”ë‹¤. [Picture 4] ì¸ì¦ì„œ ë‹¤ì´ì–´ê·¸ë¨ SSL Certificate SSL CertificateëŠ” í¬ê²Œ 2ê°€ì§€ ê¸°ì¤€ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.\nê²€ì¦íˆë ¤ëŠ” ëŒ€ìƒ ì»¤ë²„í•˜ëŠ” ë„ë©”ì¸ì˜ ê°œìˆ˜ ê²€ì¦í•˜ë ¤ëŠ” ëŒ€ìƒ ê²€ì¦ ëŒ€ìƒì— ë”°ë¼ì„œ ì•”í˜¸í™”í•˜ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì§€ê±°ë‚˜ í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì €ë ´í•˜ê²Œ ë°œê¸‰ë°›ì€ DVì™€ ë¹„ì‹¸ê²Œ ë°œê¸‰ë°›ì€ EVê°€ ê²°êµ­ ë³´ì•ˆì˜ ê´€ì ì—ì„œëŠ” í° ì°¨ì´ê°€ ì—†ë‹¤.\ní•˜ì§€ë§Œ ê²€ì¦ë°›ì€ ëŒ€ìƒì˜ identiyê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— DVëŠ” ì‘ì€ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ê¸°ê°€ ìš©ì´í•˜ê³  ê·¸ ì™¸ì— e-commerceë‚˜ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì£¼ê³  ë°›ì•„ì•¼ í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš°ì—ëŠ” ë‹¤ë¥¸ ì¸ì¦ì„œë¥¼ ì¨ì•¼ í•œë‹¤.\nDomain Validation ë„ë©”ì¸ ì†Œìœ ê¶Œì„ í™•ì¸í•œë‹¤. ì†ì‰½ê²Œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆë‹¤. (ìµœëŒ€ 1ì¼) ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” SSL Certificateì˜ í˜•íƒœë‹¤. Letâ€™s encryptì—ì„œ ë°œê¸‰í•˜ëŠ” ì¸ì¦ì„œë„ DVë¡œ, OVë‚˜ EV ì²˜ëŸ¼ ë‹¤ë¥¸ ì¸ì¦ì„ ë°›ì„ ë•ŒëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. Organization Validation ë„ë©”ì¸ ì†Œìœ ê¶Œ + Organization ì¡´ì¬ë¥¼ í™•ì¸í•œë‹¤. íšŒì‚¬ ê°™ì€ ê²½ìš°, ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” íšŒì‚¬ì¸ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ê´€ë ¨ ì„œë¥˜ë¥¼ ì œì¶œí•˜ê¸°ë„ í•œë‹¤. ë°œê¸‰í•˜ëŠ”ë° ëª‡ ì‹œê°„ ë˜ëŠ” ë©°ì¹  ì •ë„ê°€ ì†Œìš”ëœë‹¤. Extended Validation ë„ë©”ì¸ ì†Œìœ ê¶Œ + Organization ì¡´ì¬ í™•ì¸ + ë¬¼ë¦¬ì ì¸ ì¶”ê°€ ì ˆì°¨ë¥¼ í™•ì¸í•œë‹¤. SSL certification industryâ€™s governing consortium ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ëŠ” ë“± ë°œê¸‰ ì ˆì°¨ê°€ ë³µì¡í•˜ë‹¤. ì»¤ë²„í•˜ëŠ” ë„ë©”ì¸ì˜ ê°œìˆ˜ ì¸ì¦ì„œì—ëŠ” ë„ë©”ì¸ì´ë¼ëŠ” ë§ì´ ìì£¼ ë“±ì¥í•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ë„ë©”ì¸ì´ë¼ëŠ” ë‹¨ì–´ ìì²´ê°€ ëœ»í•˜ëŠ” ì˜ë¯¸ê°€ ëª¨í˜¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í˜¼ì„ ë°©ì§€ ì°¨ì›ì—ì„œ ì¸ì¦ì„œì—ì„œëŠ” FQDN ì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ë” ì„ í˜¸í•œë‹¤.\nFQDNì€ Fully-Qualified Domain Name ì˜ ì•½ìë¡œ ë„ë©”ì¸ ì „ì²´ ì´ë¦„ì„ í‘œê¸°í•˜ëŠ” ë°©ì‹ì„ ëœ»í•œë‹¤.\nFQDN ì˜ˆì‹œ\n# ì•„ë˜ëŠ” ì„œë¡œ ë™ì¼í•œ ë„ë©”ì¸ì´ë‹¤. www.leelee.co.kr leelee.co.kr www.sub.leelee.co.kr # ì•„ë˜ëŠ” ì„œë¡œ ë‹¤ë¥¸ FQDN ì´ë‹¤. www.leelee.co.kr leelee.co.kr Single Domain ë‹¨ í•˜ë‚˜ì˜ FQDNì„ ì»¤ë²„í•œë‹¤. Multiple Domain ì—¬ëŸ¬ê°œì˜ FQDNì„ ì»¤ë²„í•œë‹¤. ì¸ì¦ì„œë¥¼ ë“±ë¡í•  ë•Œ SAN (Subject Alternative Name) í•­ëª©ì— ë‹¤ìˆ˜ì˜ ë„ë©”ì¸ì„ ì…ë ¥í•œë‹¤. Wildcard Domain í•˜ë‚˜ì˜ Root Domainê³¼ ë¬´ì œí•œì˜ ì„œë¸Œë„ë©”ì¸ì„ ì»¤ë²„í•œë‹¤. wildcardëŠ” í•˜ë‚˜ì˜ ì „ì²´ë„ë©”ì¸ì„ ì…ë ¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— FQDNì´ë¼ í•˜ì§€ ì•Šì•˜ë‹¤. CA ì—…ì²´ì—ì„œëŠ” ë¹„ìš©ì— ë”°ë¼ì„œ ì»¤ë²„í•˜ëŠ” ì„œë¸Œë„ë©”ì¸ ê°œìˆ˜ì— ì œí•œì„ ë‘ê¸°ë„ í•œë‹¤. * ì„ ì‚¬ìš©í•´ì„œ ë„ë©”ì¸ì„ ì»¤ë²„í•œë‹¤. ì»¤ë²„í•˜ëŠ” ë„ë©”ì¸ ì˜ˆì‹œ\n# Singple Certificate www.leelee.co.kr # Multi-Domain Certificate www.leelee.co.kr leelee.co.kr www.sub.leelee.co.kr # Wildcard Certificate *.leelee.co.kr ì¸ì¦ì„œì™€ ê´€ë ¨ëœ ê°œë… PKI PKIëŠ” Public Key Infrastructure ì˜ ì•½ìë¡œ ê³µê°œí‚¤ ê¸°ë°˜êµ¬ì¡°ë¼ê³  í•˜ë©° ë””ì§€í„¸ ì¸ì¦ì„œë¥¼ ìƒì„±, ê´€ë¦¬, ë°°í¬, ì‚¬ìš©, ì €ì¥ ë° íŒŒê¸°, ê³µê°œí‚¤ ì•”í˜¸í™”ì˜ ê´€ë¦¬ì— í•„ìš”í•œ ì •ì±… ë“±ì„ ëœ»í•œë‹¤. PKIëŠ” ì•„ë˜ì˜ í•­ëª©ì„ ì „ì²´ë¡œ í•˜ê³  ìˆë‹¤.\në¹„ëŒ€ì¹­ í‚¤ ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©í•œë‹¤. Private key, Public key pair ë¥¼ ìƒì„±í•œë‹¤. Private keyëŠ” ê°œì¸ë§Œ ì†Œìœ í•˜ë©° ë°–ìœ¼ë¡œ ê³µê°œí•´ì„œëŠ” ì•ˆëœë‹¤. Public keyëŠ” ê³µê°œí•˜ëŠ” í‚¤ë¡œ, ëˆ„êµ¬ì—ê²Œë“  ê³µê°œí•´ë„ ëœë‹¤. ë¹„ëŒ€ì¹­ í‚¤ ì•Œê³ ë¦¬ì¦˜ Private key, Public key ë‘ ê°œì˜ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ì²˜ëŸ¼ Encryption(ì•”í˜¸í™”)ì™€ Decryption(ë³µí˜¸í™”)ì— ë‘ ê°œì˜ ë‹¤ë¥¸ í‚¤ë¥¼ ì“°ê¸° ë•Œë¬¸ì— ë¹„ëŒ€ì¹­ í‚¤ë¼ê³  í•œë‹¤. ëŒ€í‘œì ì¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” RSAê°€ ìˆë‹¤.\nì ìš© ì‹œë‚˜ë¦¬ì˜¤ Public keyë¥¼ ì´ìš©í•´ ì•”í˜¸í™” : ë°ì´í„° ë³´ì•ˆ ì‚¬ìš©ì Bê°€ ì‚¬ì „ì— ê³µìœ ë°›ì€ ì‚¬ìš©ì Aì˜ public keyë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•œë‹¤. ì‚¬ìš©ì Aì˜ public keyë¡œ ì•”í˜¸í™”ëœ ë°ì´í„°ëŠ” ì˜¤ì§ ì‚¬ìš©ì Aì˜ private keyë¡œ ë³µí˜¸í™” í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ì Aì˜ private keyëŠ” ì‚¬ìš©ì Aë§Œ ì†Œìœ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ì BëŠ” ì‚¬ìš©ì Aë§Œ ë³¼ ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê²Œ ëœ ê²ƒì´ë‹¤. [Picture 5] Public keyë¥¼ ì´ìš©í•œ ì•”í˜¸í™” Private keyë¥¼ ì´ìš©í•´ ì•”í˜¸í™” : ì‹ ì›ì¸ì¦ ì‚¬ìš©ì Aì˜ private keyë¡œ ì•”í˜¸í™” ëœ ë°ì´í„°ëŠ” ì‚¬ìš©ì Aì˜ public keyë¥¼ ì´ìš©í•´ì•¼ë§Œ ë³µí˜¸í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤. ë°ì´í„°ê°€ ì‚¬ìš©ì Aì˜ public keyë¡œ ë³µí˜¸í™”ê°€ ì•ˆëœë‹¤ë©´ ì‚¬ìš©ìAê°€ ë³´ëƒˆë‹¤ëŠ” ê²ƒì„ ì¸ì¦í•  ìˆ˜ ì—†ë‹¤. ì‚¬ìš©ì Aì˜ public keyë¡œ ë°ì´í„°ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ì Aê°€ ë³´ëƒˆë‹¤ëŠ” ê²ƒì„ ì¸ì¦í•  ìˆ˜ ìˆë‹¤. [Picture 6] Private keyë¥¼ ì´ìš©í•œ ì•”í˜¸í™” í•´ì»¤ê°€ ì•”í˜¸í™”ëœ ë°ì´í„°ë¥¼ ë„ì²­í•  ê²½ìš° ì‚¬ìš©ì Aì˜ private keyê°€ ì—†ê¸° ë•Œë¬¸ì— í•´ì»¤ê°€ ì¤‘ê°„ì—ì„œ ë°ì´í„°ë¥¼ ë³µí˜¸í™”ã…Ší•  ìˆ˜ ì—†ë‹¤. [Picture 7] í•´í‚¹ ì‹œë„ PKIì—ì„œ ê°€ëŠ¥í•œ ë‘ ê°€ì§€ ë°©ì‹ì˜ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ public keyë¥¼ ì´ìš©í•´ ì•”í˜¸í™” í•˜ë©´ ì›í•˜ëŠ” ìƒëŒ€ë°©ì—ê²Œë§Œ ë°ì´í„°ë¥¼ ê³µê°œí•  ìˆ˜ ìˆë‹¤. from ì‚¬ìš©ì B â†’ to ì‚¬ìš©ì A private keyë¥¼ ì´ìš©í•´ ì•”í˜¸í™” í•˜ë©´ ì‹ ì› ì¸ì¦ì„ í•  ìˆ˜ ìˆë‹¤. from ì‚¬ìš©ì A â†’ to ì‚¬ìš©ì B X.509 X.509ëŠ” ë””ì§€í„¸ ì¸ì¦ì„œ ìƒì„± ê´€ë ¨ êµ­ì œ í‘œì¤€ì„(format)ì„ ì˜ë¯¸í•œë‹¤. X.509ë¥¼ ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë…¸ë“œë“¤ì€ ì „ì„¸ê³„ì ìœ¼ë¡œ ì•½ì†ëœ x.509 êµ­ì œ í‘œì¤€ì„ ë°©ì‹ìœ¼ë¡œ ë””ì§€í„¸ IDë¥¼ ìƒì„±í•´ ì„œë¡œì˜ ì‹ ì›ì„ ì¦ëª…í•  ìˆ˜ ìˆë‹¤.\nX.509ëŠ” ì¸í„°ë„·ì˜ ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ ì‹ ì› í™•ì¸ì„ ìœ„í•´ ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ê°€ì¥ ìœ ëª…í•œ ë””ì§€í„¸ ì‹ ì› ì¦ëª… ë°©ì‹ì´ë‹¤.\nX.509 version 3 ì¸ì¦ì„œ ì–‘ì‹ [Picture 8] X.509 ì¸ì¦ì„œ ì–‘ì‹ Key usage extension ì¸ì¦ì„œì— í¬í•¨ë˜ì–´ìˆëŠ” public keyì˜ ëª©ì ì„ ë‚˜íƒ€ë‚¸ë‹¤. Key usage extensionì„ ì„¤ì •í•´ public keyì˜ ì‚¬ìš©ì²˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤.\nKey usage extension ì˜ˆì‹œ\nì¸ì¦ì„œê°€ ì„œëª…ì„ í•˜ê±°ë‚˜ signatureë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤ë©´ Key usage extensionìœ¼ë¡œ Digital signatureì™€ Non-repudication ë¥¼ ì„¤ì •í•œë‹¤. ì¸ì¦ì„œê°€ key ê´€ë¦¬ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©ì´ ëœë‹¤ë©´ key enciphermentë¥¼ ì„¤ì •í•œë‹¤. [Picture 9] Key usage extension ì¢…ë¥˜ Extended key usage Key usage extensionì´ ê¸°ë³¸ì ì¸ ì¸ì¦ì„œì˜ ì‚¬ìš© ëª©ì (purpose)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ë¼ë©´ Extended key usageëŠ” ì¸ì¦ì„œì˜ additionalí•œ ì‚¬ìš© ëª©ì ì„ ë‚˜íƒ€ë‚¸ë‹¤. ë³´í†µ Extended key usageëŠ” end entityì˜ ì¸ì¦ì„œì—ë§Œ í‘œì‹œê°€ ëœë‹¤.\nExtended key usage ì˜ˆì‹œ\ncriticalì´ë¼ë©´ ì¸ì¦ì„œëŠ” ì„¤ì •ë˜ì–´ìˆëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©ì„ í•´ì•¼ í•œë‹¤. í•´ë‹¹ ì¸ì¦ì„œë¥¼ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš© í–ˆì„ ê²½ìš°ì—ëŠ” CA ì •ì±…ì— ìœ„ë°˜ëœë‹¤. non-critical ì´ë¼ë©´ ì„¤ì •ë˜ì–´ìˆëŠ” ìš©ë„ ì™¸ì˜ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš© í–ˆì„ ê²½ìš°ì—ë„ CAì˜ ì œí•œì— ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ë‹¤ìˆ˜ì˜ kye/certificateì„ ê°€ì§€ê³  ìˆëŠ” entityë¼ë©´ ë§ëŠ” key/certificateë¥¼ ì°¾ëŠ”ë°ì—ë„ ì‚¬ìš©ì´ ë  ìˆ˜ ìˆë‹¤. [Picture 10] Extend key usage extension ì¢…ë¥˜ CSR Certificate Signing Requestì˜ ì•½ìì´ë‹¤. CAì— ì¸ì¦ì„œë¥¼ ì„œëª…í•´ë‹¬ë¼ê³  ìš”ì²­í•  ë•Œ ì‚¬ìš©ì´ ëœë‹¤. ì¸ì¦ì„œ ë°œê¸‰í•  ë•Œë§Œ ì‚¬ìš©ì´ ë˜ê³ , ì¸ì¦ì„œê°€ ë°œê¸‰ëœ í›„ì—ëŠ” ë³„ë„ë¡œ ì‚¬ìš© ë˜ì§€ ì•ŠëŠ”ë‹¤. Private Key PKIì˜ í•µì‹¬ì´ ë˜ëŠ” ë¹„ë°€í‚¤ì´ë‹¤. ë§Œë£Œ ê¸°ê°„ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. Public Key PKIì˜ ë˜ ë‹¤ë¥¸ í•µì‹¬ì´ ë˜ëŠ” ê³µê°œí‚¤ì´ë‹¤. Public Keyë¼ê³  ë”°ë¡œ íŒŒì¼ì´ ì¡´ì¬í•˜ê¸° ë³´ë‹¤ëŠ” Certificateì— í¬í•¨ì´ ë˜ì–´ìˆë‹¤. ë•Œë¬¸ì— public keyì™€ certificateì„ í˜¼ìš©í•´ì„œ ì“´ë‹¤. ë§Œë£Œ ê¸°ê°„ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. Certificate public keyì™€ ê°ì¢… ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ì¸ì¦ì„œë¡œ, x.509 í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆë‹¤. ë§Œë£Œ ê¸°ê°„ì´ ì¡´ì¬í•œë‹¤. ë•Œë¬¸ì— ì¸ì¦ì„œê°€ ë§Œë£Œë˜ë©´ ìƒˆë¡œìš´ ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ì•¼ í•œë‹¤. PKI File Extension PEM (Privacy Enhanced Mail) í˜•ì‹ ì€ ê°€ì¥ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” X.509 ì¸ì¦ì„œ í˜•ì‹ì¸ë° .crt, .pem, .cer, .key í™•ì¥ì ëª¨ë‘ê°€ PEM í˜•ì‹ì´ë‹¤. \u0026mdash;\u0026ndash;BEGIN CERTIFICATE\u0026mdash;\u0026ndash; ë¡œ ì‹œì‘í•œë‹¤.\n.cert *.crt Certificateë¥¼ ìœ„í•œ í™•ì¥ìë‹¤. Base64 encoded X.509 certificate DER encoded X.509 certificate í•´ë‹¹ í™•ì¥ìë“¤ì€ Private keyë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. .key Private key í™•ì¥ì¥ë‹¤. .pem Certificateë¥¼ ìœ„í•œ í™•ì¥ìë‹¤. .crl Certificate Revoke Listë¥¼ ìœ„í•œ í™•ì¥ìë‹¤. Certificate Revoke ListëŠ” íê¸°ëœ ì¸ì¦ì„œì˜ ëª©ë¡ì´ë©°, CAëŠ” CRLì„ í†µí•´ íê¸°ëœ ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•œë‹¤. .csr Certificate Singing Requestë¥¼ ìœ„í•œ í™•ì¥ìë‹¤. .der Certificateì„ ìœ„í•œ ì¸ì¦ì„œ í™•ì¥ìì¸ë°, DER encoded X.509 Certificateì— í•œì •ëœë‹¤. í•´ë‹¹ í™•ì¥ìëŠ” Private keyë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë³´í†µì˜ ì¸ì¦ì„œë“¤ê³¼ ë‹¬ë¦¬ ----BEGIN CERTIFICATE----- ë¡œ ì‹œì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. Java contextsì—ì„œ ìì£¼ ì‚¬ìš©ì´ ëœë‹¤. .der ì¸ì¦ì„œ ì˜ˆì‹œ\n3082 07fd 3082 05e5 a003 0201 0202 1068 1604 dff3 34f1 71d8 0a73 5599 c141 7230 0d06 092a 8648 86f7 0d01 010b 0500 3072 310b 3009 0603 5504 0613 0255 5331 0e30 0c06 0355 0408 0c05 5465 7861 7331 1030 0e06 0355 0407 0c07 486f 7573 746f 6e31 1130 0f06 0355 040a 0c08 5353 4c20 436f 7270 312e 302c 0603 5504 030c 2553 534c 2e63 6f6d 2045 5620 5353 4c20 496e 7465 726d 6564 6961 7465 2043 4120 5253 4120 ","date":"2022-06-15","permalink":"https://leeleelee3264.github.io/post/2022-06-15-digital-certificate-part-one/","tags":["Infra"],"title":"Digital certificate"},{"content":"\nì±… [Effective Python] better wayë¥¼ 1ì¥ë¶€í„° 5ì¥ê¹Œì§€ ìš”ì•½í•œë‹¤.\nIndex\nì‚¬ìš©ì¤‘ì¸ íŒŒì´ì¬ì˜ ë²„ì „ì„ ì•Œì•„ë‘ë¼ PEP8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë”°ë¥´ë¼ bytesì™€ strì˜ ì°¨ì´ë¥¼ ì•Œì•„ë‘ë¼ C ìŠ¤íƒ€ì¼ í˜•ì‹ ë¬¸ìì—´ì„ str.formatê³¼ ì“°ê¸°ë³´ë‹¤ëŠ” f-ë¬¸ìì—´ì„ í†µí•œ ì¸í„°í”Œë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë¼ ë³µì¡í•œ ì‹ì„ ì“°ëŠ” ëŒ€ì‹  ë„ìš°ë¯¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë¼ ì‚¬ìš©ì¤‘ì¸ íŒŒì´ì¬ì˜ ë²„ì „ì„ ì•Œì•„ë‘ë¼ íŒŒì´ì¬ ë²„ì „ ì½˜ì†” ëª…ë ¹ì–´ ì˜ˆì‹œ\n1 python --version íŒŒì´ì¬ ë²„ì „ ì½”ë“œ ì˜ˆì‹œ\n1 2 3 4 5 6 7 import sys print (sys.version_info) \u0026gt;\u0026gt;\u0026gt; sys.version_info(major=3, minor=8, micro=12, releaselevel=\u0026#39;final\u0026#39;, serial=0) print(sys.version) \u0026gt;\u0026gt;\u0026gt; 3.8.12 (default, Oct 22 2021, 17:47:41) \u0026gt;\u0026gt;\u0026gt;[Clang 13.0.0 (clang-1300.0.29.3)] íŒŒì´ì¬2 íŒŒì´ì¬2ëŠ” 2020ë…„ 1ì›” 1ì¼ë¶€ë¡œ ìˆ˜ëª…ì´ ë‹¤í–ˆë‹¤. ì´ì œ ë”ì´ìƒ ë²„ê·¸ìˆ˜ì •, ë³´ì•ˆ íŒ¨ì¹˜ê°€ ì´ë¤„ì§€ì§€ ì•ŠëŠ”ë‹¤. ê³µì‹ì ìœ¼ë¡œ ì§€ì›ì„ í•˜ì§€ ì•Šì€ ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì— ëŒ€í•œ ì±…ì„ì€ ê°œë°œìì—ê²Œ ë”°ë¥¸ë‹¤.\níŒŒì´ì¬2ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´ 2to3, sixì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë„ì›€ì„ ë°›ì•„ì•¼ í•œë‹¤.\nsix ì‚¬ìš© ì˜ˆì‹œ\n1 2 3 4 return ( six.text_type(user.pk) + six.text_type(timestamp) + six.text_type(user.username) + six.text_type(user.uuid) + six.text_type(user.type) ) PEP8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë”°ë¥´ë¼ PEP8ëŠ” íŒŒì´ì¬ ì½”ë“œë¥¼ ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í• ì§€ ì•Œë ¤ì£¼ëŠ” ìŠ¤íƒ€ì¼ ê°€ì´ë“œë‹¤. ë¬¸ë²•ë§Œ ì˜¬ë°”ë¥´ë‹¤ë©´ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì›í•˜ë“  íŒŒì´ì¬ ì½”ë“œë¥¼ ì‘ì„±í•´ë„ ì¢‹ì§€ë§Œ, ì¼ê´€ëœ ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œì— ë” ì¹œìˆ™í•˜ê²Œ ì ‘ê·¼í•˜ê³ , ì½”ë“œë¥¼ ë” ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆë‹¤.\nPEP8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ê³µë°± íƒ­ ëŒ€ì‹  ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ ë“¤ì—¬ì“°ê¸°ë¥¼ í•˜ë¼. ë¬¸ë²•ì ìœ¼ë¡œ ì¤‘ìš”í•œ ë“¤ì—¬ì“°ê¸°ì—ëŠ” 4ì¹¸ ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼. ë¼ì¸ ê¸¸ì´ëŠ” 79ê°œ ë¬¸ì ì´í•˜ì—¬ì•¼ í•œë‹¤. ê¸´ ì‹ì„ ë‹¤ìŒ ì¤„ì— ì´ì–´ì„œ ì“¸ ê²½ìš°ì—ëŠ” ì¼ë°˜ì ì¸ ë“¤ì—¬ì“°ê¸°ë³´ë‹¤ 4ìŠ¤í˜ì´ìŠ¤ë¥¼ ë” ë“¤ì—¬ì¨ì•¼ í•œë‹¤. íŒŒì¼ ì•ˆì—ì„œ ê° í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ ì‚¬ì´ì—ëŠ” ë¹ˆ ì¤„ ë‘ ì¤„ ë„£ì–´ë¼. í´ë˜ìŠ¤ ì•ˆì—ì„œ ë©”ì„œë“œì™€ ë©”ì„œë“œ ì‚¬ì´ì—ëŠ” ë¹ˆ ì¤„ì„ í•œ ì¤„ ë„£ì–´ë¼. dictì—ì„œ í‚¤ì™€ ì½œë¡ (:) ì‚¬ì´ì—ëŠ” ê³µë°±ì„ ë„£ì§€ ì•Šê³ , í•œ ì¤„ ì•ˆì— í‚¤ì™€ ê°’ì„ ê°™ì´ ë„£ëŠ” ê²½ìš°ì—ëŠ” ì½œë¡  ë‹¤ìŒì— ìŠ¤í˜ì´ìŠ¤ë¥¼ í•˜ë‚˜ ë„£ëŠ”ë‹¤. ë³€ìˆ˜ ëŒ€ì…ì—ì„œ = ì „í›„ì—ëŠ” ìŠ¤í˜ì´ìŠ¤ë¥¼ í•˜ë‚˜ì”©ë§Œ ë„£ëŠ”ë‹¤. íƒ€ì… í‘œê¸°ë¥¼ ë§ë¶™ì´ëŠ” ê²½ìš°ì—ëŠ” ë³€ìˆ˜ ì´ë¦„ê³¼ ì½œë¡  ì‚¬ì´ì— ê³µë°±ì„ ë„£ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ê³ , ì½œë¡ ê³¼ íƒ€ì… ì •ë³´ ì‚¬ì´ì—ëŠ” ìŠ¤í˜ì´ìŠ¤ë¥¼ í•˜ë‚˜ ë„£ì–´ë¼. ê³µë°± ì˜ˆì‹œ\n1 2 def add(a: int, b: int): return a + b ëª…ëª… ê·œì•½ (name convention) í•¨ìˆ˜, ë³€ìˆ˜, ì• íŠ¸ë¦¬ë·°íŠ¸ ëª…ëª… ê·œì•½ í•¨ìˆ˜, ë³€ìˆ˜, ì• íŠ¸ë¦¬ë·°íŠ¸ëŠ” lowercase_underscore ì²˜ëŸ¼ ì†Œë¬¸ìì™€ ë°‘ì¤„ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. snake case ëª¨ë“ˆ ìˆ˜ì¤€ì˜ ìƒìˆ˜ëŠ” ALL_CAPSì²˜ëŸ¼ ëª¨ë“  ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ í•˜ê³ , ë‹¨ì–´ì™€ ë‹¨ì–´ ì‚¬ì´ë¥¼ ë°‘ì¤„ë¡œ ì—°ê²°í•œ í˜•íƒœë¥¼ ì‚¬ìš©í•œë‹¤. private ëª…ëª… ê·œì•½ ë³´í˜¸í•´ì•¼(protect) í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì• íŠ¸ë¦¬ë·°íŠ¸ëŠ” ì¼ë°˜ì ì¸ ì• íŠ¸ë¦¬ë·°íŠ¸ ì´ë¦„ ê·œì¹™ì„ ë”°ë¥´ë˜, ë°‘ì¤„ë¡œ ì‹œì‘í•œë‹¤. private ì¸ìŠ¤í„´ìŠ¤ ì• íŠ¸ë¦¬ë·°ëŠ” ë°‘ì¤„ ë‘ ì¤„ë¡œ ì‹œì‘í•œë‹¤. ë°‘ì¤„ ë‘ ì¤„ì€ maigc methodë¥¼ ìœ„í•œ ì»¨ë²¤ì…˜ì¸ì¤„ ì•Œì•˜ëŠ”ë°, í´ë˜ìŠ¤ì—ì„œ private ë©”ì†Œë“œì™€ ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ë°‘ì¤„ ë‘ì¤„ë¡œ ë§Œë“ ë‹¤. íŒŒì´ì¬ì—ì„œ private, protect ëª¨ë‘ ì •ì‹ ì§€ì›ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ê°€ë…ì„±ì„ ìœ„í•œ ë„¤ì„ ì»¨ë²¤ì…˜ì— ë” ê°€ê¹ë‹¤. í´ë˜ìŠ¤ ëª…ëª… ê·œì•½ í´ë˜ìŠ¤ì™€ ì˜ˆì™¸ëŠ” CapitalizedWord ì²˜ëŸ¼ ì—¬ëŸ¬ ë‹¨ì–´ë¥¼ ì´ì–´ ë¶™ì´ë˜, ê° ë‹¨ì–´ì˜ ì²« ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ ë§Œë“ ë‹¤. PascalCase, CamelCase í´ë˜ìŠ¤ì— ë“¤ì–´ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” í˜¸ì¶œ ëŒ€ìƒ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì²«ë²ˆì¨° ì¸ìì˜ ì´ë¦„ìœ¼ë¡œ, ë°˜ë“œì‹œ selfë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤. ìê¸°ìì‹ ì„ ê°€ë¥´í‚¤ê¸° ë•Œë¬¸ì— í´ë˜ìŠ¤ ë©”ì„œë“œëŠ” í´ë˜ìŠ¤ë¥¼ ê°€ë¥´í‚¤ëŠ” ì²« ë²ˆì§¸ ì¸ìì˜ ì´ë¦„ìœ¼ë¡œ ë°˜ë“œì‹œ clsë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. í´ë˜ìŠ¤ ìì²´ë¥¼ ê°€ë¥´í‚¤ê¸° ë•Œë¬¸ì— í•¨ìˆ˜, ë³€ìˆ˜ ëª…ëª… ì˜ˆì‹œ\n1 2 3 4 _count = 100 def _add(a, b): return a + b private ì¸ìŠ¤í„´ìŠ¤ ëª…ëª… ì˜ˆì‹œ\n1 2 3 4 __count = 100 def __add(a, b): return a + b ì‹ê³¼ ë¬¸ ì½ê¸° ì‰¬ìš´ ì‹ ì‘ì„± ê¸ì •ì ì¸ ì‹ì„ ë¶€ì •í•˜ì§€ ë§ê³ , ë¶€ì •ì„ ë‚´ë¶€ì— ë„£ì–´ë¼. í•œ ì¤„ì§œë¦¬ if ë¬¸ì´ë‚˜ í•œ ì¤„ì§œë¦¬ for, while ë£¨í”„, í•œ ì¤„ ì§œë¦¬ except ë³µí•©ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ë§ë¼. ëª…í™•ì„±ì„ ìœ„í•´ ê° ë¶€ë¶„ì„ ì—¬ëŸ¬ ì¤„ì— ë‚˜ëˆ  ë°°ì¹˜í•˜ë¼. ì‹ì„ í•œ ì¤„ ì•ˆì— ë‹¤ ì“¸ ìˆ˜ ì—†ëŠ” ê²½ìš°, ì‹ì„ ê´„í˜¸ë¡œ ë‘˜ëŸ¬ì‹¸ê³  ì¤„ë°”ê¿ˆê³¼ ë“¤ì—¬ì“°ê¸°ë¥¼ ì¶”ê°€í•´ì„œ ì½ê¸° ì‰½ê²Œ ë§Œë“¤ë¼. ì—¬ëŸ¬ ì¤„ì— ê±¸ì³ ì‹ì„ ì“¸ ë•ŒëŠ” ì¤„ì´ ê³„ì†ëœë‹¤ëŠ” í‘œì‹œë¥¼ í•˜ëŠ” \\ ë¬¸ì ë³´ë‹¤ëŠ” ê´„í˜¸ë¥¼ ì‚¬ìš©í•˜ë¼. editorë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ì´ë ‡ê²Œ \\ ë˜ëŠ” í˜•ì‹ì„ ë§ì´ ì‚¬ìš©í•˜ëŠ”ë°, PEP8ì—ì„œ ê¶Œì¥í•˜ì§€ ì•Šì€ í˜•íƒœì˜€ë‹¤ë‹ˆ, ì•ìœ¼ë¡œ ()ë¥¼ ì¨ë³´ë„ë¡ ë…¸ë ¥í•˜ê² ë‹¤. ë¹ˆ ì»¨í…Œì´ë„ˆ í™•ì¸ ë¹ˆ ì»¨í…Œì´ë„ˆë‚˜ ì‹œí€¸ìŠ¤([], â€˜â€™)ë“±ì„ ê²€ì‚¬í•  ë•ŒëŠ” ê¸¸ì´ë¥¼ 0ê³¼ ë¹„êµí•˜ì§€ ë§ë¼. ë¹ˆ ì»¨í…Œì´ë„ˆë‚˜ ì‹œí€¸ìŠ¤ ê°’ì´ ì•”ë¬µì ìœ¼ë¡œ False ì·¨ê¸‰ëœë‹¤ëŠ” ì‚¬ì‹¤ì„ í™œìš©í•´ë¼. íŒŒì´ì¬ì„ ìë°”ì™€ ë™ì‹¤ì‹œ í•´ì„œ, ì–¼ë§ˆì „ì— str â‰  â€˜â€™ ë¡œ ë¹„ì–´ìˆëŠ” ì—¬ë¶€ë¥¼ ê²€ì‚¬í•œ ì ì´ ìˆë‹¤. íŒŒì´ì¬ì—ì„œ ë¹„ì–´ìˆëŠ” strëŠ” False ì·¨ê¸‰ì´ë¼ëŠ” ê²ƒì„ ê¼­ ê¸°ì–µí•˜ì. ë§ˆì°¬ê°€ì§€ë¡œ ë¹„ì–´ ìˆì§€ ì•Šì€ ì»¨í…Œì´ë„ˆë‚˜ ì‹œí€¸ìŠ¤([1], â€˜hiâ€™) ë“±ì„ ê²€ì‚¬í•  ë•ŒëŠ” ê¸¸ì´ë¥¼ 0ê³¼ ë¹„êµí•˜ì§€ ë§ë¼. ì»¨í…Œì´ë„ˆê°€ ë¹„ì–´ìˆì§€ ì•Šì€ ê²½ìš° ì•”ë¬µì ìœ¼ë¡œ True í‰ê°€ê°€ ëœë‹¤ëŠ” ì‚¬ì‹¤ì„ í™œìš©í•´ë¼. ë‚´ë¶€ ë¶€ì • ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 # ê¸ì •ì ì¸ ì‹ì„ ë¶€ì • if not a is b: # ë¶€ì •ì„ ë‚´ë¶€ì— ë„£ìŒ if a is not b: # ë¹„êµ ëŒ€ìƒì´ ì—†ì´ ìê¸° ìì‹ ë§Œ ìˆì„ ë•ŒëŠ” ì´ë ‡ê²Œ í•´ë„ ëœë‹¤. if not a: ë¹ˆ ì»¨í…Œì´ë„ˆ í™•ì¸ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 d = {} st = \u0026#39;\u0026#39; if not d: if not st: # Don\u0026#39;t do 1 if str == \u0026#39;\u0026#39;: # Dont\u0026#39;do 2 if len(d) == 0: ì„í¬íŠ¸ ì„í¬íŠ¸ ë¬¸ì€ í‰ì†Œì— ì •ë§ ì‹ ê²½ì„ ì“°ì§€ ì•Šì•˜ëŠ”ë°, ì•ìœ¼ë¡œëŠ” editorì—ì„œ ì–´ë–»ê²Œ ì„í¬íŠ¸ë¥¼ í•˜ëŠ”ì§€ ë³´ê³ , ì‹ ê²½ ì¨ì„œ ì‘ì„±í•˜ë„ë¡ í•˜ì.\nimport ë¬¸ì„ í•­ìƒ íŒŒì¼ ë§¨ ì•ì— ìœ„ì¹˜ì‹œì¼œë¼. ëª¨ë“ˆì„ ì„í¬íŠ¸í•  ë•ŒëŠ” ì ˆëŒ€ì ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , í˜„ ëª¨ë“ˆì˜ ê²½ë¡œì— ìƒëŒ€ì ì¸ ì´ë¦„ì€ ì‚¬ìš©í•˜ì§€ ë§ë¼. ë°˜ë“œì‹œ ìƒëŒ€ì ì¸ ê²½ë¡œë¡œ ì„í¬íŠ¸ë¥¼ í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ëª…ì‹œì ì¸ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ë¼. ì„í¬íŠ¸ ìˆœì„œ ì„í¬íŠ¸ë¥¼ ì ì„ ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì„¹ì…˜ì„ ë‚˜ëˆ„ê³ , ê° ì„¸ì…˜ì€ ì•ŒíŒŒë²³ ìˆœì„œë¡œ ëª¨ë“ˆì„ ì„í¬íŠ¸í•˜ë¼. í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“ˆ ì„œë“œ íŒŒí‹° ëª¨ë“ˆ ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ëª¨ë“ˆ ì„í¬íŠ¸ ì˜ˆì‹œ\n1 2 3 4 5 6 # bar íŒ¨í‚¤ì§€ì—ì„œ foo ëª¨ë“ˆì„ ì„í¬íŠ¸ í•˜ë ¤ê³  í•  ë•Œ # Do from bar import foo # Don\u0026#39;t do import foo ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ ì˜ˆì‹œ\n1 from . import foo ê²°ë¡  ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œì—ë„ pylint, flake8 ë“±ì˜ íŒŒì´ì¬ lintë¥¼ ì´ìš©í•´ì„œ ìŠ¤íƒ€ì¼ì„ ì¤€ìˆ˜í•˜ë„ë¡ ë…¸ë ¥í•˜ì.\nbytesì™€ strì˜ ì°¨ì´ë¥¼ ì•Œì•„ë‘ë¼ íŒŒì´ì¬ì—ëŠ” ë¬¸ìì—´ ë°ì´í„°ì˜ ì‹œí€¸ìŠ¤ë¥¼ í‘œí˜„í•˜ëŠ” ë‘ ê°€ì§€ íƒ€ì… bytesì™€ strì´ ìˆë‹¤.\nbytes ë¶€í˜¸ê°€ ì—†ëŠ” 8ë°”ì´íŠ¸ ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ë“¤ì–´ê°€ê±°ë‚˜, ì•„ìŠ¤í‚¤ ì¸ì½”ë”©ì„ ì‚¬ìš©í•´ ë‚´ë¶€ ë¬¸ìë¥¼ í‘œì‹œí•œë‹¤.\nbytes ì˜ˆì‹œ\n1 2 a = b\u0026#39;h\\x6511o\u0026#39; c = b\u0026#39;eojwpkmcdlklksm\u0026#39; str ì‚¬ëŒì´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ì˜ ë¬¸ìë¥¼ í‘œí˜„í•˜ëŠ” ìœ ë‹ˆì½”ë“œ ì½”ë“œ í¬ì¸íŠ¸ê°€ ë“¤ì–´ê°„ë‹¤.\nì¸ì½”ë”© strì—ëŠ” ì§ì ‘ ëŒ€ì‘í•˜ëŠ” ì´ì§„ ì¸ì½”ë”©ì´ ì—†ê³ , bytesì—ëŠ” ì§ì ‘ ëŒ€ì‘í•˜ëŠ” í…ìŠ¤íŠ¸ ì¸ì½”ë”©ì´ ì—†ë‹¤.\në•Œë¬¸ì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.í˜¸ì¶œ í•  ë•Œ ì—¬ëŸ¬ë¶„ì´ ì›í•˜ëŠ” ì¸ì½”ë”© ë°©ì‹ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ë„ ìˆê³  ì‹œìŠ¤í…œ ë””í´íŠ¸ ì¸ì½”ë”©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë° ì¼ë°˜ì ìœ¼ë¡œ utf-8ì´ ì‹œìŠ¤í…œ ë””í´íŠ¸ë‹¤.\nì¸ì½”ë”© ì‹œë‚˜ë¦¬ì˜¤ ìœ ë‹ˆì½”ë“œ ë°ì´í„°ë¥¼ ì´ì§„ ë°ì´í„°ë¡œ ë³€í™˜í•´ì•¼ í•  ë•Œ: strì˜ encode ë©”ì„œë“œ í˜¸ì¶œ ì´ì§„ ë°ì´í„°ë¥¼ ìœ ë‹ˆì½”ë“œ ë°ì´í„°ë¡œ ë³€í™˜í•´ì•¼ í•  ë•Œ: bytesì˜ decode ë©”ì„œë“œ í˜¸ì¶œ ìœ ë‹ˆì½”ë“œ ìƒŒë“œìœ„ì¹˜ ìœ ë‹ˆì½”ë“œ ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ê±°ë‚˜ ë””ì½”ë”©í•˜ëŠ” ë¶€ë¶„ì„ ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì¥ ë¨¼ ê²½ê³„ ì§€ì ì— ìœ„ì¹˜ì‹œì¼œë¼. ì´ëŸ° ë°©ì‹ì„ ìœ ë‹ˆì½”ë“œ ìƒŒë“œìœ„ì¹˜ë¼ê³  ë¶€ë¥¸ë‹¤.\ní”„ë¡œê·¸ë¨ì˜ í•µì‹¬ ë¶€ë¶„ì€ ìœ ë‹ˆì½”ë“œ ë°ì´í„°ê°€ ë“¤ì–´ ìˆëŠ” strë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ê³ , ë¬¸ì ì¸ì½”ë”©ì— ëŒ€í•´ ì–´ë–¤ ê°€ì •ë„ í•´ì„œëŠ” ì•ˆëœë‹¤.\ní•µì‹¬ í•¨ìˆ˜ì—ëŠ” ì´ë¯¸ ì¸ì½”ë”©ì´ ëœ strì´ ì¸ìë¡œ ì „ë‹¬ë˜ì–´ì•¼ í•œë‹¤. ì´ëŸ° ì ‘ê·¼ì„ í•˜ë©´ ë‹¤ì–‘í•œ í…ìŠ¤íŠ¸ ì¸ì½”ë”©ìœ¼ë¡œ ì…ë ¥ ë°ì´í„°ë¥¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆê³ , ì¶œë ¥ í…ìŠ¤íŠ¸ ì¸ì½”ë”©ì€ í•œ ê°€ì§€ë¡œ ì—„ê²©í•˜ê²Œ ì œí•œí•  ìˆ˜ ìˆë‹¤. [Picture 1] ìœ ë‹ˆì½”ë“œ ìƒŒë“œìœ„ì¹˜ ë¸”ë™ë°•ìŠ¤ str ë°˜í™˜ ìœ ë‹ˆì½”ë“œ ìƒŒë“œìœ„ì¹˜ ì˜ˆì‹œ\n1 2 3 4 5 6 7 def to_str(bytes_or_str): if isinstance(bytes_or_str, bytes): value = bytes_or_str.decode(\u0026#39;utf-8) else: value = bytes_or_str return value bytes ë°˜í™˜ ìœ ë‹ˆì½”ë“œ ìƒŒë“œìœ„ì¹˜ ì˜ˆì‹œ\n1 2 3 4 5 6 7 def to_bytes(bytes_or_str): if isinstanceof(bytes_or_str, str): value = bytes_or_str.endode(\u0026#39;utf-8\u0026#39;) else value = bytes_or_str return value íŒŒì´ì¬ì—ì„œ bytesì™€ strì„ ë‹¤ë£° ë•Œ ê¸°ì–µí•´ì•¼ í•˜ëŠ” ì  ì—°ì‚° bytesì™€ strì´ ë˜‘ê°™ì´ ì‘ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ê°ê°ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë¡œ í˜¸í™˜ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì „ë‹¬ì¤‘ì¸ ë¬¸ì ì‹œí€¸ìŠ¤ê°€ ì–´ë–¤ íƒ€ì…ì¸ì§€ ì•Œì•„ì•¼ í•œë‹¤.\nì—°ì‚° ë¶ˆê°€í•­ëª© ì˜ˆì‹œ\n1 2 3 bytes + str bytes \u0026gt; str b\u0026#39;foo\u0026#39; == \u0026#39;foo\u0026#39; \u0026gt;\u0026gt;\u0026gt; False íŒŒì¼ (ë‚´ì¥í•¨ìˆ˜ openì„ í˜¸ì¶œí•´ ì–»ì€) íŒŒì¼ í•¸ë“¤ê³¼ ê´€ë ¨í•œ ì—°ì‚°ë“¤ì´ ë””í´íŠ¸ë¡œ ìœ ë‹ˆì½”ë“œ (str) ë¬¸ìì—´ì„ ìš”êµ¬í•˜ê³ , ì´ì§„ ë°”ì´íŠ¸ ë¬¸ìì—´ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\nì´ì§„ ì“°ê¸° ëª¨ë“œ (â€™wbâ€™)ê°€ ì•„ë‹Œ í…ìŠ¤íŠ¸ ì“°ê¸° ëª¨ë“œ (â€™wâ€™) ë¡œ ì—´ë©´ ì˜¤ë¥˜ê°€ ë‚œë‹¤. bytesë¡œ íŒŒì¼ ì½ê¸°, ì“°ê¸°ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ì´ì§„ ì½ê¸°ëª¨ë“œ (â€™rbâ€™) ë˜ëŠ” ì´ì§„ ì“°ê¸°ëª¨ë“œ (â€™wbâ€™)ë¥¼ ì¨ì•¼ í•œë‹¤.\níŒŒì¼ ë¶ˆê°€í•­ëª© ì˜ˆì‹œ\n1 2 3 4 5 with open(\u0026#39;data.bin\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(b\u0026#39;\\xf1\\xf2\\xf3\u0026#39;) \u0026gt;\u0026gt;\u0026gt; Traceback ... TypeError: write() argument must be str, not bytes.Â íŒŒì¼ ì‹œìŠ¤í…œì˜ ë””í´íŠ¸ í…ìŠ¤íŠ¸ ì¸ì½”ë”©ì„ bytes.encode(ì“°ê¸°), str.decode(ì½ê¸°) ì—ì„œ ì‚¬ìš©í•˜ëŠ”ë° utf-8ì´ê¸° ë•Œë¬¸ì— ì´ì§„ë°ì´í„°ì˜ ê²½ìš° utf-8ë¡œ ì½ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìƒê²¨ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\nì´ëŸ° í˜„ìƒì„ ë§‰ê³ ì, utf-8ë¡œ ì¸ì½”ë”©ì„ ëª»í•˜ëŠ” ê²½ìš°ì—ëŠ” ì½ì–´ì˜¬ ë•Œ ì¸ì½”ë”©ì„ ì•„ì˜ˆ ëª…ì‹œí•´ì£¼ëŠ” ê²½ìš°ë„ ìˆë‹¤.\nì¸ì½”ë”© ëª…ì‹œ ì˜ˆì œ\n1 2 with open(\u0026#39;data.bin\u0026#39;, \u0026#39;r\u0026#39;, encoding=\u0026#39;cpl252\u0026#39;) as f: data = f.read() ê²°ë¡  ì‹œìŠ¤í…œ ë””í´íŠ¸ ì¸ì½”ë”©ì„ í•­ìƒ ê²€ì‚¬í•˜ë„ë¡ í•˜ì.\n1 python3 -c \u0026#39;import locale; print(locale.getpreferredencoding())\u0026#39; C ìŠ¤íƒ€ì¼ í˜•ì‹ ë¬¸ìì—´ì„ str.formatê³¼ ì“°ê¸°ë³´ë‹¤ëŠ” f-ë¬¸ìì—´ì„ í†µí•œ ì¸í„°í”Œë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë¼. í˜•ì‹í™”ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ë¬¸ìì—´ì— ë°ì´í„° ê°’ì„ ë¼ì›Œ ë„£ì–´ ì‚¬ëŒì´ ë³´ê¸° ì¢‹ì€ ë¬¸ìì—´ë¡œ ì €ì¥í•˜ëŠ” ê³¼ì •ì´ë‹¤. íŒŒì´ì¬ì—ì„œëŠ” f-ë¬¸ìì—´ì„ í†µí•œ ì¸í„°í”Œë ˆì´ì…˜ ë¹¼ê³ ëŠ” ê°ìì˜ ë‹¨ì ì´ ìˆë‹¤.\ní˜•ì‹ ë¬¸ìì—´ % í˜•ì‹í™” ì—°ì‚°ìë¥¼ ì‚¬ìš©í•œë‹¤. ì™¼ìª½ì— ë“¤ì–´ê°€ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ í…ìŠ¤íŠ¸ í…œí”Œë¦¿ì„ í˜•ì‹ ë¬¸ìì—´ì´ë¼ê³  ë¶€ë¥¸ë‹¤. C í•¨ìˆ˜ì—ì„œ ë¹„ë¡¯ëœ ë°©ë²•ì´ë‹¤.\ní˜•ì‹ ë¬¸ìì—´ ì˜ˆì‹œ\n1 print(\u0026#39;ì´ì§„ìˆ˜: %d, ì‹­ìœ¡ì§„ìˆ˜: %d\u0026#39;, %(a, b)) í˜•ì‹ ë¬¸ìì—´ ë¬¸ì œì  í˜•ì‹í™” ì‹ì—ì„œ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ê°’ë“¤ì˜ ìˆœì„œë¥¼ ë°”ê¾¸ê±°ë‚˜, íƒ€ì…ì„ ë°”ê¾¸ë©´ í¬ë©§íŒ…ì´ ì•ˆë˜ì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. í˜•ì‹í™”ë¥¼ ì¡°ê¸ˆì´ë¼ë„ ë³€ê²½í•˜ë©´ ì‹ì´ ë§¤ìš° ë³µì¡í•´ ì½ê¸°ê°€ í˜ë“¤ë‹¤. ê°™ì€ ê°’ì„ ì—¬ëŸ¬ë²ˆ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì˜¤ë¥¸ìª½ ê°’ì„ ì—¬ëŸ¬ë²ˆ ë³µì‚¬í•´ì•¼ í•œë‹¤. ë‚´ì¥ í•¨ìˆ˜ formatê³¼ str.format íŒŒì´ì¬ 3ë¶€í„°ëŠ” %ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜¤ë˜ëœ CìŠ¤íƒ€ì¼ í˜•ì‹í™” ë¬¸ìì—´ë³´ë‹¤ ë” í‘œí˜„ë ¥ì´ ì¢‹ì€ ê³ ê¸‰ ë¬¸ìì—´ í˜•ì‹í™” ê¸°ëŠ¥ì´ ë„ì…ëë‹¤. ì´ ê¸°ëŠ¥ì€ format ë‚´ì¥ í•¨ìˆ˜ë¥¼ í†µí•´ ëª¨ë“  íŒŒì´ì¬ ê°’ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nformat ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 key = \u0026#39;my_var\u0026#39; value = 1.234 formatted = \u0026#39;{} = {}\u0026#39;.format(key, value) print(formatted) \u0026gt;\u0026gt;\u0026gt; my_var = 1.234 # format ë©”ì„œë“œì— ì „ë‹¬ëœ ì¸ìì˜ ìˆœì„œë¥¼ í‘œí˜„í•˜ëŠ” ìœ„ì¹˜ ì¸ë±ìŠ¤ë¥¼ ì „ë‹¬í•  ìˆ˜ë„ ìˆë‹¤. formatted = \u0026#39;{1} = {0}\u0026#39;.format(key, value) print(formatted) \u0026gt;\u0026gt;\u0026gt; 1.234 = my_var # í˜•ì‹í™” ë¬¸ìì—´ ì•ˆì—ì„œ ê°™ì€ ìœ„ì¹˜ ì¸ë±ìŠ¤ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. formatted = \u0026#39;{}ëŠ” ìŒì‹ì„ ì¢‹ì•„í•´. {0}ê°€ ìš”ë¦¬í•˜ëŠ” ëª¨ìŠµì„ ë´ìš”\u0026#39;.format(name) print(formatted) \u0026gt;\u0026gt;\u0026gt; ì² ìˆ˜ëŠ” ìŒì‹ì„ ì¢‹ì•„í•´. ì² ìˆ˜ê°€ ìš”ë¦¬í•˜ëŠ” ëª¨ìŠµì„ ë´ìš”. format ë¬¸ì œì  C ìŠ¤íƒ€ì¼ì˜ í˜•ì‹í™”ì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ê°’ì„ ì¡°ê¸ˆ ë³€ê²½í•˜ëŠ” ê²½ìš°ì—ëŠ” ì½”ë“œ ì½ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤. ê°€ë…ì„± ë©´ì—ì„œ ê±°ì˜ ì°¨ì´ê°€ ì—†ìœ¼ë©°, ë‘˜ ë‹¤ ì½ê¸°ì— ì¢‹ì§€ ì•Šë‹¤. ì¸í„°í´ë ˆì´ì…˜ì„ í†µí•œ í˜•ì‹ ë¬¸ìì—´ (f-ë¬¸ìì—´) ìœ„ì˜ ë¬¸ì œë“¤ì„ ì™„ì „íˆ í•´ê²°í•˜ê¸° ìœ„í•´ íŒŒì´ì¬ 3.6 ë¶€í„°ëŠ” ì¸í„°í´ë ˆì´ì…˜ì„ í†µí•œ í˜•ì‹ ë¬¸ìì—´ (ì§§ê²Œ f-ë¬¸ìì—´)ì´ ë„ì…ë˜ì—ˆë‹¤. ì´ ìƒˆë¡œìš´ ì–¸ì–´ ë¬¸ë²•ì—ì„œëŠ” í˜•ì‹ ë¬¸ìì—´ ì•ì— f ë¬¸ìë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤. ë°”ì´íŠ¸ ë¬¸ìì—´ ì•ì— b ë¬¸ìë¥¼ ë¶™ì´ê³ , raw ë¬¸ìì—´ ì•ì— rë¬¸ìë¥¼ ë¶™ì´ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤.\nf-ë¬¸ìì—´ì€ í˜•ì‹í™” ì‹ ì•ˆì—ì„œ í˜„ì¬ íŒŒì´ì¬ ì˜ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì´ë¦„ì„ ììœ ë¡­ê²Œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•¨ìœ¼ë¡œì¨ ì´ëŸ° ê°„ê²°í•¨ì„ ì œê³µí•œë‹¤.\nf-ë¬¸ìì—´ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 key = \u0026#39;my_var\u0026#39; value = 1.234 formatted = f\u0026#39;{key} = {value}\u0026#39; print(formatted) \u0026gt;\u0026gt;\u0026gt; my_var = 1.234 íŒŒì´ì¬ì—ì„œ ì œê³µí•˜ëŠ” í˜•ì‹í™” ë¬¸ë²•ì˜ ì°¨ì´ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # f-ë¬¸ìì—´ f_string = f\u0026#39;{key:\u0026lt;10} = {value: .2f}\u0026#39; # c ìŠ¤íƒ€ì¼ c_tuple = \u0026#39;%-10s = %.2f\u0026#39; % (key, value) # c ìŠ¤íƒ€ì¼ + ë”•ì…”ë„ˆë¦¬ c_dict = \u0026#39;%{key}-10s = %{value}.2f\u0026#39; % {\u0026#39;key\u0026#39;: key, \u0026#39;value\u0026#39;: value} # str.format str_args = \u0026#39;{:\u0026lt;10} = {value: .2f}\u0026#39;.format(key, value) # str.format + í‚¤ì›Œë“œ ì¸ì str_kw = \u0026#39;{key:\u0026lt;10} = {value:.2f}\u0026#39;.format(key=key, value=value) ê²°ë¡  f-ë¬¸ìì—´ì€ ê°„ê²°í•˜ì§€ë§Œ, ìœ„ì¹˜ ì§€ì •ì ì•ˆì— ì„ì˜ì˜ íŒŒì´ì¬ ì‹ì„ ì§ì ‘ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë§¤ìš° ê°•ë ¥í•˜ë‹¤. ê°’ì„ ë¬¸ìì—´ë¡œ í˜•ì‹í™”í•´ì•¼ í•˜ëŠ” ìƒí™©ì„ ë§Œë‚˜ê²Œ ë˜ë©´ ë‹¤ë¥¸ ëŒ€ì•ˆ ëŒ€ì‹  f-ë¬¸ìì—´ì„ íƒí•˜ë¼.\në³µì¡í•œ ì‹ì„ ì“°ëŠ” ëŒ€ì‹  ë„ìš°ë¯¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ë¼. íŒŒì´ì¬ì€ ë¬¸ë²•ì´ ê°„ê²°í•˜ë¯€ë¡œ ìƒë‹¹í•œ ë¡œì§ì´ ë“¤ì–´ê°€ëŠ” ì‹ë„ í•œ ì¤„ë¡œ ë§¤ìš° ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ URLì˜ query stringë¥¼ íŒŒì‹±í•˜ê³  ì‹¶ë‹¤ê³  í•˜ì.\nquery string íŒŒì‹± ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 from urllib.parse import parse_qs my_values = parse_qs(\u0026#39;ë¹¨ê°•=5\u0026amp;íŒŒë‘=0\u0026amp;ì´ˆë¡=\u0026#39;, keep_blank_values=True) print(repr(my_values)) \u0026gt;\u0026gt;\u0026gt; {\u0026#39;ë¹¨ê°•\u0026#39;: [\u0026#39;5\u0026#39;], \u0026#39;íŒŒë‘\u0026#39;: [\u0026#39;0\u0026#39;], \u0026#39;ì´ˆë¡\u0026#39;: [\u0026#39;\u0026#39;] } ì´ëŸ° ë•Œì— íŒŒë¼ë¯¸í„°ê°€ ì—†ê±°ë‚˜ ë¹„ì–´ ìˆì„ ê²½ìš° 0ì´ ë””í´íŠ¸ ê°’ìœ¼ë¡œ ëŒ€ì…ë˜ë©´ ì¢‹ì„ ê²ƒì´ë‹¤. ì—¬ëŸ¬ ì¤„ë¡œ ì‘ì„±í•´ì•¼ í•˜ëŠ” if ë¬¸(if statement)ë¥¼ ì“°ê±°ë‚˜ ë„ìš°ë¯¸ í•¨ìˆ˜ë¥¼ ì“°ì§€ ì•Šê³ , if ì‹(if expression)ìœ¼ë¡œ í•œì¤„ë¡œ ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤.\në¿ë§Œ ì•„ë‹ˆë¼, ëª¨ë“  íŒŒë¼ë©”í„° ê°’ì„ ì •ìˆ˜ë¡œ ë³€í™˜í•´ì„œ ì¦‰ì‹œ ìˆ˜ì‹ì—ì„œ í™œìš©í•˜ê¸°ë¥¼ ë°”ë€ë‹¤ê³  í•´ë³´ê² ë‹¤. ê·¸ëŸ¼ ì‹ì€ ì•„ë˜ì™€ ê°™ì•„ì§„ë‹¤.\ní•œ ì¤„ ëŒ€ì…, ë³€í™˜ ì˜ˆì‹œ\n1 2 3 red = int(my_values.get(\u0026#39;ë¹¨ê°•\u0026#39;, [\u0026#39;\u0026#39;])[0] or 0) green = int(my_values.get(\u0026#39;ì´ˆë¡\u0026#39;, [\u0026#39;\u0026#39;])[0] or 0) opacity = int(my_values.get(\u0026#39;íˆ¬ëª…ë„\u0026#39;, [\u0026#39;\u0026#39;])[0] or 0) í˜„ì¬ ì´ ì½”ë“œëŠ” ë„ˆë¬´ ì½ê¸° ì–´ë µê³  ì‹œê°ì  ì¡ìŒë„ ë§ë‹¤. ì¦‰, ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰½ì§€ ì•Šìœ¼ë¯€ë¡œ ì½”ë“œë¥¼ ìƒˆë¡œ ì½ëŠ” ì‚¬ëŒì´ ì´ ì‹ì´ ì‹¤ì œë¡œ ì–´ë–¤ ì¼ì„ í•˜ëŠ”ì§€ ì´í•´í•˜ê¸° ìœ„í•´ ë„ˆë¬´ ë§ì€ ì‹œê°„ì„ íˆ¬ìí•´ì•¼ í•œë‹¤.\nì½”ë“œë¥¼ ì§§ê²Œ ìœ ì§€í•˜ë©´ ë©‹ì§€ê¸°ëŠ” í•˜ì§€ë§Œ, ëª¨ë“  ë‚´ìš©ì„ í•œì¤„ì— ìš°ê²¨ ë„£ê¸° ìœ„í•´ ë…¸ë ¥í•  ë§Œí¼ì˜ ê°€ì¹˜ëŠ” ì—†ë‹¤.\nëª…í™•í•˜ê²Œ ë°”ê¾¼ ì½”ë“œ ì˜ˆì‹œ\n1 2 3 4 5 6 7 def get_first_int(values, key, default=0): found = values.get(key, [\u0026#39;\u0026#39;]) if found[0]: return int(found[0]) return default ì‹ì´ ë³µì¡í•´ì§€ê¸° ì‹œì‘í•˜ë©´ ë°”ë¡œ ì‹ì„ ë” ì‘ì€ ì¡°ê°„ìœ¼ë¡œ ë‚˜ëˆ ì„œ ë¡œì§ì„ ë„ìš°ë¯¸ í•¨ìˆ˜ë¡œ ì˜®ê¸¸ì§€ ê³ ë ¤í•´ì•¼ í•œë‹¤. íŠ¹íˆ ê°™ì€ ë¡œì§ì„ ë°˜ë³µí•´ ì‚¬ìš©í•  ë•ŒëŠ” ë„ìš°ë¯¸ í•¨ìˆ˜ë¥¼ ê¼­ ì‚¬ìš©í•˜ë¼. ì•„ë¬´ë¦¬ ì§§ê²Œ ì¤„ì—¬ ì“°ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤ í•´ë„, ì½”ë“œë¥¼ ì¤„ì—¬ ì“°ëŠ” ê²ƒë³´ë‹¤ ê°€ë…ì„±ì„ ì¢‹ê²Œ í•˜ëŠ” ê²ƒì´ ë” ê°€ì¹˜ ìˆë‹¤.\nê²°ë¡  íŒŒì´ì¬ì˜ í•¨ì¶•ì ì¸ ë¬¸ë²•ì´ ì§€ì €ë¶„í•œ ì½”ë“œë¥¼ ë§Œë“¤ì–´ë‚´ì§€ ì•Šë„ë¡ í•˜ë¼. ë°˜ë³µí•˜ì§€ ë§ë¼ëŠ” ëœ»ì˜ DRY ì›ì¹™ì„ ë”°ë¥´ë¼.\n","date":"2022-05-06","permalink":"https://leeleelee3264.github.io/post/2022-05-06-effective-python-betteryway-1-to5/","tags":["Book"],"title":"[Effective Python] Chapter 1: 1ì¥ë¶€í„° 5ì¥ê¹Œì§€ì˜ ìš”ì•½"},{"content":"\nì±… [Introducing Python] ì ˆë°˜ì„ ìš”ì•½í•œë‹¤.\nIndex\níŒŒì´ ë§›ë³´ê¸° íŒŒì´ ì¬ë£Œ: ìˆ«ì, ë¬¸ìì—´ ë³€ìˆ˜ íŒŒì´ ì±„ìš°ê¸°: ë¦¬ìŠ¤íŠ¸, íŠœí”Œ, ë”•ì…”ë„ˆë¦¬, ì…‹ íŒŒì´ í¬ëŸ¬ìŠ¤íŠ¸: ì½”ë“œ êµ¬ì¡° íŒŒì´ í¬ì¥í•˜ê¸°: ëª¨ë“ˆ, íŒ¨í‚¤ì§€, í”„ë¡œê·¸ë¨ íŒŒì´ ë§›ë³´ê¸° íŒŒì´ì¬ì€ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë‹¤. íŒŒì´ì¬ì´ ê°œë°œì„ ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì´ìœ ë„ ê±°ëŒ€í•œ í¬ê¸°ì˜ ê¸°ê³„ì–´ë¥¼ ë§Œë“¤ì–´ë‚´ì§€ ì•Šê³  ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ìœ¼ë¡œ ì¶”ì •ëœë‹¤.\nì¸í„°í”„ë¦¬í„° ì–¸ì–´ ëŒ€í‘œì ì¸ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ëŠ” íŒŒì´ì¬, ìë°” ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆë‹¤. ì¸í„°í”„ë¦¬í„°ëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ ë°”ë¡œ ì‹¤í–‰í•œë‹¤. ì¸í„°í”„ë¦¬í„°ëŠ” ë°”ë¡œë°”ë¡œ ì‹¤í–‰ì„ í•˜ë‹¤ë³´ë‹ˆ ì²˜ìŒì— ì†ë„ê°€ ë¹„êµì  ë¹ ë¥´ë‹¤. ì»´íŒŒì¼ ì–¸ì–´ ëŒ€í‘œì ì¸ ì»´íŒŒì¼ ì–¸ì–´ëŠ” ìë°”ë‹¤. ì»´íŒŒì¼ ì–¸ì–´ëŠ” ì²˜ìŒ í”„ë¡œê·¸ë¨ì„ ì‹œì‘í•  ë•Œ ëª¨ë“  ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë°”ê¾¼ë‹¤ (ì»´íŒŒì¼ í•œë‹¤). ì»´íŒŒì¼ì„ í•˜ê¸° ë•Œë¬¸ì— ì²˜ìŒì— í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤. í•˜ì§€ë§Œ í•œ ë²ˆ ì»´íŒŒì¼ì„ í•˜ë©´ ì‹¤í–‰ì‹œ ê¸°ê³„ì–´ë¥¼ ë¶ˆëŸ¬ì™€ ë” ë¹¨ë¦¬ ì‹¤í–‰ì„ í•  ìˆ˜ ìˆì–´ ë§¤ë²ˆ ì‹¤í–‰ì‹œë§ˆë‹¤ ë²ˆì—­ì„ ê±°ì¹˜ëŠ” ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë³´ë‹¤ ì†ë„ê°€ ë” ë¹¨ë¼ì§„ë‹¤. íŒŒì´ ì¬ë£Œ: ìˆ«ì, ë¬¸ìì—´ ë³€ìˆ˜ íŒŒì´ì¬ì€ ë¬¸ìë¥¼ ë³€í˜• í•  ìˆ˜ ì—†ë‹¤. st[0] = \u0026rsquo;e\u0026rsquo; ì´ëŸ°ì‹ìœ¼ë¡œ ë³€ê²½ì„ í•  ìˆ˜ ì—†ë‹¤. ì¦‰, ë¶ˆë³€ê°ì²´ì´ë‹¤.\në¬¸ìì—´ë„ ì¤‘ê°„ì— ìˆ˜ì •ì„ í•  ìˆ˜ ì—†ê³  ì•„ì˜ˆ ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“œëŠ” replace() ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ë¬¸ìì—´ì„ ë³€ê²½í•´ì•¼ í•œë‹¤. ë¬¸ìì—´ì„ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“œëŠ” ì´ìœ ëŠ” Javaì™€ ë§ˆì°¬ê°€ì§€ë¡œ í”„ë¡œê·¸ë˜ë°ì„ í¸ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œë‹¤.\nìŠ¬ë¼ì´ì‹±ì„ ì´ìš©í•œ ë¬¸ì reverse ì˜ˆì‹œ\n1 2 st = \u0026#34;eererewrvfgrhfos\u0026#34; re_st = st[::-1] # sofhrgfvrwereree íŒŒì´ ì±„ìš°ê¸°: ë¦¬ìŠ¤íŠ¸, íŠœí”Œ, ë”•ì…”ë„ˆë¦¬, ì…‹ íŒŒì´ì¬ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ìë£Œêµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.\ndel ìë£Œêµ¬ì¡°ì—ì„œ í•­ëª©ì„ ì‚­ì œí•˜ëŠ” ì»¤ë§¨ë“œëŠ” del ì¸ë°, ì´ delì€ ìë£Œêµ¬ì¡°ì˜ í•¨ìˆ˜ê°€ ì•„ë‹Œ íŒŒì´ì¬ êµ¬ë¬¸ì´ë‹¤. delì€ ê°ì²´ë¡œë¶€í„° ì´ë¦„ì„ ë¶„ë¦¬í•˜ê³  ê°ì²´ì˜ ë©”ëª¨ë¦¬ë¥¼ ë¹„ì›Œì¤€ë‹¤.\ndel ì˜ˆì‹œ\n1 2 3 del full[2] # full.del(2) ì²˜ëŸ¼ ì“°ì§€ ëª»í•œë‹¤. ë¦¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ëŠ” ë³€ê²½ ê°€ëŠ¥í•˜ë‹¤. í•­ëª©ì„ í• ë‹¹í•˜ê³ , ììœ ë¡­ê²Œ ìˆ˜ì • ì‚­ì œë¥¼ í•  ìˆ˜ ìˆë‹¤.\në¦¬ìŠ¤íŠ¸ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # ìƒì„± empty = [] empyt2 = list() full = [1, 2, 3] # ë¦¬ìŠ¤íŠ¸ì˜ ëì— í•­ëª© ì¶”ê°€í•˜ê¸° append() full.appned(4) # ë¦¬ìŠ¤íŠ¸ ë³‘í•©í•˜ê¸° extend() added = [5, 6, 7, 8] full.extend(added) # [1, 2, 3, 4, 5, 6, 7, 8] full += added # [1, 2, 3, 4, 5, 6, 7, 8] # append ë¥¼ ì“°ë©´ ë¦¬ìŠ¤íŠ¸ ìì²´ê°€ ì¶”ê°€ëœë‹¤ full.appned(added) # [1, 2, 3, 4, [5, 6, 7, 8]] # ë¦¬ìŠ¤íŠ¸ ì •ë ¬ # sort()ëŠ” ë¦¬ìŠ¤íŠ¸ ìì²´ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì •ë ¬í•œë‹¤. # sorted() ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì •ë ¬ëœ ë³µì‚¬ë³¸ì„ ë°˜í™˜í•œë‹¤. full.sort() new_sort = full.sorted() íŠœí”Œ íŠœí”Œì€ ë¶ˆë³€í•œë‹¤. íŠœí”Œì— í•­ëª©ì„ í• ë‹¹í•˜ê³  ë‚˜ì„œëŠ” ë°”ê¿€ ìˆ˜ ì—†ë‹¤. ë•Œë¬¸ì— íŠœí”Œì„ ìƒìˆ˜ ë¦¬ìŠ¤íŠ¸ë¼ ë³¼ ìˆ˜ ìˆë‹¤.\níŠœí”Œ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 # ìƒì„± empty_tuple = () # ì½¤ë§ˆë¡œ ê°’ì„ ë‚˜ì—´í•´ë„ íŠœí”Œì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. empty_tuple = 1, 2, 3 empty_tuple = (1, 2, 3) # íŠœí”Œì˜ ë‚˜ì—´í•˜ëŠ” íŠ¹ì„±ì„ ì´ìš©í•´ì„œ ê°ì²´ ìƒì„±ì—†ì´ swapí•˜ê¸° password = \u0026#39;12\u0026#39; icecream = \u0026#39;sweet\u0026#39; password, icecream = icecream, password ë¦¬ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ë¶ˆë³€ê°ì²´ë¼ í•¨ìˆ˜ ì§€ì›ì´ ë” ì ì€ íŠœí”Œì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ  ë” ì ì€ ê³µê°„ì„ ì‚¬ìš©í•œë‹¤. ì‹¤ìˆ˜ë¡œ ê°’ì„ ë°”ê¿€ ìœ„í—˜ì´ ì—†ë‹¤. íŠœí”Œì„ ë”•ì…”ë„ˆë¦¬ í‚¤ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ë„¤ì„ë“œ íŠœí”Œ ì€ ê°ì²´ì˜ ëŒ€ì•ˆì´ ë  ìˆ˜ ìˆë‹¤. í•¨ìˆ˜ì˜ ì¸ìë“¤ì€ íŠœí”Œë¡œ ì „ë‹¬ëœë‹¤. ë”•ì…”ë„ˆë¦¬ ë”•ì…”ë„ˆë¦¬ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 # ìƒì„± empty_dict = {} # dict() ë¥¼ ì´ìš©í•´ ë‘ ê°’ ìŒìœ¼ë¡œ ì´ë¤„ì§„ ìë£Œêµ¬ì¡°ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤. lol = [[\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;], [\u0026#39;c\u0026#39;, \u0026#39;d\u0026#39;]] lol2 = lol #{\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;, \u0026#39;c\u0026#39;: \u0026#39;d\u0026#39;} lol3 = (\u0026#39;ab\u0026#39;, \u0026#39;cb\u0026#39;) lol4 = lol #{\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;, \u0026#39;c\u0026#39;: \u0026#39;d\u0026#39;} # ë”•ì…”ë„ˆë¦¬ ê²°í•©í•˜ê¸° update() em = {\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;} em2 = {\u0026#39;c\u0026#39;: \u0026#39;d\u0026#39;} em.update(em2) # {\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;, \u0026#39;c\u0026#39;: \u0026#39;d\u0026#39;} # ë”•ì…”ë„ˆë¦¬ ë¹„ìš°ê¸° em.clear() # ë”•ì…”ë„ˆë¦¬ì— íŠ¹ì • í‚¤ê°€ ë“¤ì–´ìˆë‚˜ í™•ì¸ \u0026#39;c\u0026#39; in em # ëª¨ë“  í‚¤ ê°€ì ¸ì˜¤ê¸° em.keys() # ëª¨ë“  ê°’ ê°€ì ¸ì˜¤ê¸° em.values() # ëª¨ë“  í‚¤, ê°’ ê°€ì ¸ì˜¤ê¸° # (\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;), (\u0026#39;c\u0026#39;, \u0026#39;d\u0026#39;) ì²˜ëŸ¼ íŠœí”Œë¡œ ë°˜í™˜í•œë‹¤ em.items() ì…‹ ì–´ë–¤ ê²ƒì´ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë§Œ íŒë‹¨í•˜ê¸° ìœ„í•´ì„œ ì…‹ì„ ì‚¬ìš©í•œë‹¤. ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì…‹ì€ ìˆ˜í•™ì‹œê°„ì— ë°°ì› ë˜ ì§‘í•©ê³¼ ì•„ì£¼ ìœ ì‚¬í•˜ë‹¤.\nì…‹ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 # ìƒì„± # ê·¸ëƒ¥ {} ëŠ” ë”•ì…”ë„ˆë¦¬ ìƒì„±ìì— ì„ ì ë˜ì—ˆë‹¤. empty_set = set() empty_set2 = {1, 2, 3, 4} # ê°ì¢… ì§‘í•© # êµì§‘í•© \u0026amp;, intersection() if contents \u0026amp; {\u0026#39;ice\u0026#39;, \u0026#39;cream\u0026#39;} # ice ì™€ cream ëª¨ë‘ ë“¤ì–´ìˆì–´ì•¼ ì°¸ a = {1, 2} b = {3, 4} a \u0026amp; b = 2 # í•©ì§‘í•© |, union() a | b = {1, 2, 3} # ì°¨ì§‘í•© -, difference() a - b = {1} # ëŒ€ì¹­ ì°¨ì§‘í•© ^, symmetric_difference # ê° í•­ëª©ì— ë³„ê°œë¡œ ê°€ì§€ê³  ìˆëŠ” ê°’ì„ êµ¬í•œë‹¤. a ^ b = {1, 3} # ë¶€ë¶„ì§‘í•© \u0026lt;=, issubset() a.issubset(b) # False a.issubset(a) # True a.issubset((1, 2, 3)) # ìŠˆí¼ì…‹ \u0026gt;=, issuperset() a.issuperset((1)) # True ((1, 2, 3)).issuperset(a) # True a.issuperset(a) # True íŒŒì´ í¬ëŸ¬ìŠ¤íŠ¸: ì½”ë“œ êµ¬ì¡° ì»´í”„ë¦¬í—¨ì…˜ ë‚´ê°€ ê°€ë” ê²€ìƒ‰í•´ë³´ê³ ëŠ” í•˜ëŠ” í•œ ì¤„ ë¡œ for ë¬¸ ëŒë¦¬ê¸°ì™€ ìœ ì‚¬í•˜ë‹¤.\ní•˜ë‚˜ ì´ìƒì˜ ì´í„°ë ˆì´í„°ë¡œë¶€í„° íŒŒì´ì¬ ìë£Œêµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì´ë‹¤. ë” íŒŒì´ì¨ë‹‰í•œ ìš©ë²•ì´ë¼ë‹ˆëŠ”ë° ê°„ë‹¨í•œ í• ë‹¹ë¬¸ ë§ê³ ëŠ” ì»´í”„ë¦¬í—¨ì…˜ì„ ì‚¬ìš©í•˜ë©´ ë” í—·ê°ˆë¦´ ê²ƒ ê°™ë‹¤.\ní•œ ì¤„ for ë¬¸ ì˜ˆì‹œ\n1 num = [i for i in range(1, 6)] ì¸ì ë‹¤ë¥¸ ì–¸ì–´ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ê°’ì„ ìˆœì„œëŒ€ë¡œ ìƒì‘í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ì— ë³µì‚¬í•˜ëŠ” ê²ƒì´ ìœ„ì¹˜ì¸ìì´ë‹¤. í‚¤ì›Œë“œì¸ìëŠ” ìœ„ì¹˜ì¸ìì˜ í˜¼ë™ì„ í”¼í•˜ê¸° ìœ„í•´ ìƒì‘í•˜ëŠ” ì´ë¦„ì„ ì¸ì ì•ˆì— ì§€ì •í•œ ê²ƒì´ë‹¤.\nì¸ì ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 # ìœ„ì¹˜ ì¸ì def menu(wine, entree, dessert): pass # í‚¤ì›Œë“œ ì¸ì def menu(wine=wine, entree=entreee, dessert=dessert): pass # ì¸ìì˜ ê¸°ë³¸ ê°’ ì§€ì • def menu(wine, entree, dessert=\u0026#39;pie\u0026#39;): pass ì¸ì ëª¨ìœ¼ê¸° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 # ìœ„ì¹˜ ì¸ì ëª¨ìœ¼ê¸° * def print_args(one, two, three, *args): pass # ì‹¤ì œë¡œ í˜¸ì¶œ ì‹œ threeê¹Œì§€ ìœ„ì¹˜ì— ë”°ë¼ ê°’ì´ ë“¤ì–´ê°€ê³  ë‚˜ë¨¸ì§€ëŠ” *argsê°€ ì¸ìë¥¼ ì·¨í•˜ê²Œ í•´ì¤€ë‹¤. print_args(1, 2, 3, 4, 5, 6, 7, 8) # í‚¤ì›Œë“œ ì¸ì ëª¨ìœ¼ê¸° ** def print_keyword(**kwargs) # ì‹¤ì œ í˜¸ì¶œ ì‹œ ìœ„ì¹˜ì¸ìì™€ ë§ˆì°¬ê°€ì§€ë¡œ, í•¨ìˆ˜ì— ë”°ë¡œ ì •ì˜ê°€ ì•ˆ ëœ ìœ„ì¹˜ì¸ìë¥¼ ì·¨í•œë‹¤. print_keyword(one=1, two=2, three=3, four=4, five=5) ì—¬ëŸ¬ê°€ì§€ ì¢…ë¥˜ì˜ ì¸ìë“¤ì„ ì„ì–´ì„œ ì‚¬ìš©í•˜ë ¤ë©´ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œ ìœ„ì¹˜ì¸ì, í‚¤ì›Œë“œ ì¸ì, *args, **kwargs ìˆœìœ¼ë¡œ ì •ì˜ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.\ndocstring íŒŒì´ì¬ ë¬¸ì„œí™”ì— ê´€ë ¨ëœ ë¶€ë¶„. ì¼ë°˜ ì£¼ì„ì€ #ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ëª¨ë“ˆê³¼ í´ë˜ìŠ¤ì™€ ë©”ì†Œë“œì— ì‚¬ìš©í•˜ëŠ” ì£¼ì„ì˜ í˜•íƒœëŠ” ë”°ë¡œ ìˆë‹¤. ì´ê²ƒì„ doctstring ì´ë¼ê³  í•œë‹¤.\ndocstring ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026#34;\u0026#34;\u0026#34; ëª¨ë“ˆ (íŒŒì´ì¬ íŒŒì¼) ìµœìƒë‹¨ì— ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ì£¼ì„ì„ ë‹¬ì•„ì£¼ì„¸ìš”. Usage: python my_test.py \u0026lt;param\u0026gt; \u0026#34;\u0026#34;\u0026#34; class TestClass: \u0026#34;\u0026#34;\u0026#34; í´ë˜ìŠ¤ ì•„ë˜ì— ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ì£¼ì„ì„ ë‹¬ì•„ì£¼ì„¸ìš”. \u0026#34;\u0026#34;\u0026#34; def test_method(): \u0026#34;\u0026#34;\u0026#34; í•¨ìˆ˜ ì•„ë˜ì— ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ì£¼ì„ì„ ë‹¬ì•„ì£¼ì„¸ìš”.\t\u0026#34;\u0026#34;\u0026#34; pass docstringì„ ì´ìš©í•´ì„œ ì£¼ì„ì„ ë‹¬ì•„ë‘ë©´ ì½”ë“œì—ì„œ help í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì ‘ê·¼ì„ í•  ìˆ˜ ìˆë‹¤.\në‚´ê°€ ì§€ê¸ˆ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ê°€ ë­˜ í•˜ëŠ” ì• ì¸ì§€ í•´ë‹¹ í´ë˜ìŠ¤ íŒŒì¼ì„ ì½ì§€ ì•Šì•„ë„ ì½˜ì†”ì— ì…ë ¥ë§Œ í•˜ë©´ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.\nhelp í•¨ìˆ˜ë¡œ docstring ì ‘ê·¼ ì˜ˆì‹œ\n1 2 help(TestClass) TestClass.__doc__ ë¼ì¸ ìœ ì§€í•˜ê¸° PEP ì— ë”°ë¥´ë©´ íŒŒì´ì¬ì€ í•œ ì¤„ì— 80ê¸€ìë¥¼ ë„˜ìœ¼ë©´ ì•ˆëœë‹¤. ê°€ë…ì„±ì´ ì œì¼ ì¤‘ìš”í•œ ì–¸ì–´ì—ì„œ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ê¸´ ë¬¸ì¥ì„ ì‚¬ìš©í•´ì•¼ í•  ë•Œì—ëŠ” ë°±ìŠ¬ë˜ì‹œ(\\)ë¡œ ë¼ì¸ì„ ëŠì–´ì¤€ë‹¤.\në°±ìŠ¬ë˜ì‹œ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 test = \u0026#34;this\u0026#34; + \\ \u0026#34;is very very\u0026#34; + \\ \u0026#34;long long line\u0026#34; # ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ë¼ì¸ ëŠëŠ” ë°©ë²• test = \u0026#34;\u0026#34; test += \u0026#34;is very very\u0026#34; test += \u0026#34;long long line\u0026#34; ì¼ë“± ì‹œë¯¼ : í•¨ìˆ˜ í•¨ìˆ˜ëŠ” ë·¸ë³€í•˜ê¸° ë•Œë¬¸ì— ë”•ì…”ë„ˆë¦¬ì˜ í‚¤ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\ní•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ ìˆê³ , ë‹¤ë¥¸ í•¨ìˆ˜ì—ì„œ ì´ë¥¼ ì¸ìë¡œ ì“¸ ìˆ˜ ìˆìœ¼ë©°, í•¨ìˆ˜ì—ì„œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. íŒŒì´ì¬ì—ì„œ ê´„í˜¸ ()ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ê³ , ê´„í˜¸ê°€ ì—†ìœ¼ë©´ í•¨ìˆ˜ë¥¼ ê°ì²´ ì²˜ëŸ¼ ê°„ì£¼í•œë‹¤.\ní•¨ìˆ˜ì—ì„œ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 def run_something_with_args(func, arg1, arg2): func(arg1, arg2) def add_args(arg1, arg2): return arg1 + agr2 \u0026gt;\u0026gt; run_something(add_agrs, 5, 8 ) 14 ì˜ˆì œì—ì„œ run_something_with_argsë¡œ ì „ë‹¬ëœ add_args ëŠ” ê´„í˜¸ ì—†ì´ ê°ì²´ì²˜ëŸ¼ ì·¨ê¸‰ë˜ì–´ func ë§¤ê°œë³€ìˆ˜ë¡œ í• ë‹¹ëœë‹¤. ë’¤ì— ê´„í˜¸ () ê°€ ë¶™ì€ func ëŠ” ì „ë‹¬ ë°›ì€ arg1, arg2ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ í•´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ë‚´ë¶€ í•¨ìˆ˜ ë¨¼ì € ì½ìœ¼ë©´ ì¢‹ì„ ìë£Œ [Real Python: adding behavior with inner functions decorators] í•¨ìˆ˜ ì•ˆì— ë˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤. í•¨ìˆ˜ë¥¼ global scope ìœ¼ë¡œë¶€í„° ì™„ì „íˆ ìˆ¨ê²¨ encapsulationì„ í•˜ê±°ë‚˜, ë³µì¡í•œ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ Helper í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì•¼ í•  ë•Œ ë‚´ë¶€í•¨ìˆ˜ë¥¼ ì“´ë‹¤.\në‚´ë¶€ í•¨ìˆ˜ ì˜ˆì‹œ\n1 2 3 4 5 6 7 def increment(number): def inner_increment(): return number + 1 return inner_increment() \u0026gt;\u0026gt; increment(10) 11 ìœ„ì²˜ëŸ¼ ì‘ì„±ì„ í•˜ë©´ inner_increment í•¨ìˆ˜ë¥¼ ì–´ë””ì—ì„œë„ í˜¸ì¶œì„ í•  ìˆ˜ ì—†ë‹¤.\në‚´ë¶€ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ Helperë¥¼ ë§Œë“  ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 def factorial(number): if not isinstance(number, int): raise TypeError(\u0026#34;Sorry. \u0026#39;number\u0026#39; must be an integer.\u0026#34;) if number \u0026lt; 0: raise ValueError(\u0026#34;Sorry. \u0026#39;number\u0026#39; must be zero or positive.\u0026#34;) def inner_factorial(number): if number \u0026lt;= 1: return 1 return number * inner_factorial(number - 1) return inner_factorial(number) ê·¸ëŸ°ë° ë‚´ë¶€í•¨ìˆ˜ë¡œ Helper í•¨ìˆ˜ë¥¼ ë§Œë“¤ê¸°ë³´ë‹¤ëŠ” private ìœ¼ë¡œ Helper í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤. private helper í•¨ìˆ˜ê°€ í›¨ì”¬ ë” ì½”ë“œ ì½ê¸°ê°€ í¸í•˜ê³  ê°™ì€ ëª¨ë“ˆì´ë‚˜ í´ë˜ìŠ¤ì—ì„œë§Œ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\nprivateì„ ì´ìš©í•´ Helperë¥¼ ë§Œë“  ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 def factorial(number): if not isinstance(number, int): raise TypeError(\u0026#34;Sorry. \u0026#39;number\u0026#39; must be an integer.\u0026#34;) if number \u0026lt; 0: raise ValueError(\u0026#34;Sorry. \u0026#39;number\u0026#39; must be zero or positive.\u0026#34;) return _factorial(number) def _factorial(number): if number \u0026lt;= 1: return 1 return number * inner_factorial(number - 1) í´ë¡œì € í´ë¡œì €ëŠ” ë°”ê¹¥ í•¨ìˆ˜ë¡œë¶€í„° ì „ë‹¬ëœ ë³€ìˆ˜ê°’ì„ ì €ì¥í•˜ê³ , ë³€ê²½ì„ í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤. íŒŒì´ì¬ì—ì„œ í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹í•  ìˆ˜ ìˆëŠ” ì´ìœ ë„ í´ë¡œì € ê¸°ëŠ¥ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\ní´ë¡œì € ì˜ˆì‹œ generate_power\n1 2 3 4 5 6 7 8 9 10 11 12 # closure factory function def generate_power(exponent): def power(base): return base ** exponent return power raise_two = generate_power(2) \u0026gt;\u0026gt; raise_two(4) 16 \u0026gt;\u0026gt; raise_two(5) 25 í´ë¡œì € í˜¸ì¶œ ê³¼ì • ìƒì„¸ ë³´ê¸° í´ë¡œì €ì˜ ê°œë…ì´ ì²˜ìŒì´ë‹¤ë³´ë‹ˆ ì œëŒ€ë¡œ ì´í•´ê°€ ê°€ì§€ ì•Šì•„ printë¡œ ë””ë²„ê¹…ì„ í•´ê°€ë©° ì´í•´ë¥¼ ì§„í–‰í–ˆë‹¤.\ní´ë¡œì € ì˜ˆì‹œ generate_power_with_debug\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 def generate_power_with_debug(exponent): print(f\u0026#39;closure generated, passed exponent {exponent}\u0026#39;) def power(base): print(f\u0026#39;inner function in closure. passed base {base}\u0026#39;) return base ** exponent return power # closure ìƒì„± raise_two = generate_power_with_debug(2) # closure í˜¸ì¶œ print(f\u0026#39;result of closure : {raise_two(4)}\u0026#39;) # ì½˜ì†”ì— ì¶œë ¥ëœ ê²°ê³¼ closure generated, passed exponent 2 inner function in closure. passed base 4 result of closure : 16 generate_power í˜¸ì¶œ ê³¼ì • (1)\n1 raise_two = generate_power_with_debug(2)) generate_power_with_debug ë¡œ ë³€ìˆ˜ exponentì— 2ë¥¼ ë„£ì–´ í´ë¡œì € ìƒì„±í•œë‹¤. í´ë¡œì €ëŠ” ë§¤ë²ˆ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ í´ë¡œì €ë¥¼ ìƒì„±í•œë‹¤. ë‚´ë¶€ í•¨ìˆ˜ powerì€ í˜¸ì¶œì´ ë˜ì§€ ì•Šê³ , ìƒˆë¡œìš´ power ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ë¦¬í„´ì´ ëœë‹¤. ë¦¬í„´ê°’ì´ í•¨ìˆ˜ë¼ëŠ” ì–˜ê¸°ë‹¤. powerë¥¼ ë¦¬í„´í•  ë•Œ powerì˜ surrounding state ë¥¼ ìŠ¤ëƒ…ì…§ìœ¼ë¡œ ë‚¨ê¸´ë‹¤. ì—¬ê¸°ì—ëŠ” exponent ë³€ìˆ˜ê°€ í¬í•¨ë˜ì–´ìˆë‹¤. generate_power í˜¸ì¶œ ê³¼ì • (2)\n1 print(f\u0026#39;result of closure : {raise_twon(4)}\u0026#39;) generate_power_with_debug í´ë¡œì €ë¥¼ í˜¸ì¶œí•œë‹¤. í´ë¡œì €ë¥¼ í˜¸ì¶œí•¨ì— ë”°ë¼ ë³€ìˆ˜ baseì— 4ë¥¼ ë„£ì–´ ë‚´ë¶€í•¨ìˆ˜ powerê°€ í˜¸ì¶œí•œë‹¤. powerëŠ” í´ë¡œì €ê°€ ë¦¬í„´ë˜ì—ˆì„ ë•Œ í•¨ê»˜ ë„˜ì–´ì™”ë˜ surrounding stateì˜ ìŠ¤ëƒ…ìƒ·ì— ì €ì¥ì´ ëœ exponentë¥¼ ì´ìš©í•œë‹¤. power ê²°ê³¼ë¥¼ ë¦¬í„´í•œë‹¤. í´ë¡œì € í˜¸ì¶œ ì‹œë‚˜ë¦¬ì˜¤ ì´ì •ë¦¬\nQ: ì–´ë–»ê²Œ ë‚´ë¶€í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì™¸ë¶€í•¨ìˆ˜ì˜ ê°’ì— ì ‘ê·¼ì„ í• ê¹Œ? A: í´ë¡œì €ë¥¼ ìƒì„±í•  ë•Œ ë‚´ë¶€í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ”ë°, ì´ë•Œ ì™¸ë¶€í•¨ìˆ˜ì˜ ìƒíƒœ ìŠ¤ëƒ…ìƒ·ì„ í•¨ê»˜ ë¦¬í„´í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. í´ë¡œì €ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ ë‚´ë¶€í•¨ìˆ˜ë¥¼ ê´„í˜¸() ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ë‹¤. ì˜ˆì œì—ì„œ powerë¥¼ ë¦¬í„´í•˜ê¸°ë§Œ í•˜ëŠ”ë°, ì´ë ‡ê²Œ ë¦¬í„´ì„ í•˜ë©´ exponent ê°’ì„ ì €ì¥í•œ power í•¨ìˆ˜ì˜ ë³µì‚¬ë³¸ì„ ì£¼ê²Œ ëœë‹¤. ë³µì‚¬ë³¸ì„ í• ë‹¹ ë°›ì€ ë³€ìˆ˜ raise_twoë¥¼ ì‹¤ì œë¡œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ê³  í˜¸ì¶œí•œë‹¤. ë§¤ê°œë³€ìˆ˜ëŠ” ë‚´ë¶€í•¨ìˆ˜ì¸ power ì˜ base ì™€ ë§µí•‘ì´ ëœë‹¤. í´ë¡œì €ë¡œ ê¶Œí•œ í™•ì¸ í•¨ìˆ˜ êµ¬í˜„ í´ë¡œì €ë¡œ êµ¬í˜„í•œ ê¶Œí•œ í™•ì¸ í•¨ìˆ˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 def has_permission(page): def permission(username): if username.lower() == \u0026#34;admin\u0026#34;: return f\u0026#34;\u0026#39;{username}\u0026#39; has access to {page}.\u0026#34; else: return f\u0026#34;\u0026#39;{username}\u0026#39; doesn\u0026#39;t have access to {page}.\u0026#34; return permission # ì„ ì–¸ check_admin_page_permision = has_permission(\u0026#34;Admin Page\u0026#34;) \u0026gt;\u0026gt;\u0026gt; check_admin_page_permision(\u0026#34;admin\u0026#34;) \u0026#34;\u0026#39;admin\u0026#39; has access to Admin Page.\u0026#34; \u0026gt;\u0026gt;\u0026gt; check_admin_page_permision(\u0026#34;john\u0026#34;) \u0026#34;\u0026#39;john\u0026#39; doesn\u0026#39;t have access to Admin Page.\u0026#34; ë°ì½”ë ˆì´í„° ë°ì½”ë ˆì´í„°ëŠ” callable(í•¨ìˆ˜, ë©”ì†Œë“œ, í´ë˜ìŠ¤)ë¥¼ ì¸ìë¡œ ë°›ê³ , ë‹¤ë¥¸ callableì„ ë¦¬í„´í•œë‹¤(ë‚´ë¶€í•¨ìˆ˜).\nìƒê¹€ìƒˆì™€ ìœ„ì¹˜ëŠ” ìë°”ì˜ ì–´ë…¸í…Œì´ì…˜ê³¼ ë™ì¼í•˜ë‹¤. ë°ì½”ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì´ë¯¸ ì¡´ì¬í•˜ê³  ìˆë˜ í•¨ìˆ˜ì— ë³„ë„ì˜ ìˆ˜ì •ì‚¬í•­ì—†ì´ ì•¡ì…˜ì„ ì¶”ê°€ í•  ìˆ˜ ìˆë‹¤.\në°ì½”ë ˆì´í„° ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤\ní•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ëŠ” callableì„ ì„ ì–¸í•œë‹¤. ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ì¶”ê°€ ì•¡ì…˜ì´ ìˆëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤. ë°ì½”ë ˆì´í„° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 def example_decorator(func): def _add_messages(): print(\u0026#39;This is my first decorator\u0026#39;) func() print(\u0026#39;bye\u0026#39;) # ë°ì½”ë ˆì´í„°ë„ í´ë¡œì €ì²˜ëŸ¼ ë‚´ë¶€í•¨ìˆ˜ë¥¼ ê´„í˜¸()ë¡œ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤. return _add_messages # greet = example_decorator(greet) ê³¼ ë™ì¼í•˜ë‹¤. í´ë¡œì € ìƒì„± í˜•íƒœì™€ ë™ì¼í•˜ë‹¤. @example_decorator def greet(): print(\u0026#39;Hello World\u0026#39;) \u0026gt;\u0026gt;\u0026gt; greet() This is my first decorator Hello World bye ì´ë ‡ê²Œ ì¶”ê°€ë¡œ ì•¡ì…˜ì„ í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë°ì½”ë ˆì´í„°ëŠ” ë””ë²„ê¹…, ìºì‹±, ë¡œê¹…, ì‹œê°„ì¸¡ì •(timing)ì— ë§ì´ ì“°ì¸ë‹¤.\në°ì½”ë ˆì´í„° ë””ë²„ê¹… ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 def debug(func): def _debug(*args, **kwargs): result = func(*args, **kwargs) print( f\u0026#34;{func.__name__}(args: {args}, kwargs: {kwargs}) -\u0026gt; {result}\u0026#34; ) return result return _debug @debug def add(a, b): return a + b \u0026gt;\u0026gt;\u0026gt; add(5, 6) add(args: (5, 6), kwargs: {}) -\u0026gt; 11 11 ë°ì½”ë ˆì´í„°ë¡œ êµ¬í˜„í•œ generate_power\nì•„ê¹Œ ìœ„ì—ì„œëŠ” í´ë¡œì €ë¡œ generate_powerë¥¼ êµ¬í˜„í–ˆëŠ”ë° ì´ë²ˆì—ëŠ” ë°ì½”ë ˆì´í„°ë¡œ êµ¬í˜„ì„ í–ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 def generate_power(exponent): def power(func): def inner_power(*args): base = func(*args) return base ** exponent return inner_power return power @generate_power(2) def raise_two(n): return n \u0026gt;\u0026gt;\u0026gt; raise_two(7) 49 @generate_power(3) def raise_three(n): return n \u0026gt;\u0026gt;\u0026gt; raise_three(5) 125 ë°ì½”ë ˆì´í„° í˜¸ì¶œ ê³¼ì • ìƒì„¸ ë³´ê¸° ë°ì½”ë ˆì´í„°ë¡œ êµ¬í˜„í•œ generate_power_with_debug\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def generate_power_with_debug(exponent): print(f\u0026#39;closure is generated, passed exponent : {exponent}\u0026#39;) def power(func): print(f\u0026#39;inner function in closure. passed func : {func}\u0026#39;) def inner_power(*args): print(f\u0026#39;inner function in power. passed args : {args}\u0026#39;) base = func(*args) return base ** exponent return inner_power return power # closure ìƒì„± # raise_two = generate_power_with_debug(2) ì™€ ë™ì¼ í•˜ë‹¤. @generate_power_with_debug(2) # power()ë¥¼ ë¦¬í„´ def raise_two(n): # power()ë¥¼ í˜¸ì¶œ, inner_power()ë¥¼ ë¦¬í„´ return n print(f\u0026#39;result of closure : {raise_two(7)}\u0026#39;) # ì½˜ì†”ì— ì¶œë ¥ëœ ê²°ê³¼ closure is generated, passed exponent : 2 inner function in closure. passed func : \u0026lt;function raise_two at 0x100e2dee0\u0026gt; inner function in power. passed args : (7,) result of closure : 49 generate_power í˜¸ì¶œ ê³¼ì • (1)\n1 2 3 @generate_power_with_debug(2) def raise_two(n): return n raise_two = generate_power_with_debug(2) ì™€ ë™ì¼í•˜ë‹¤. @generate_power_with_debug ë°ì½”ë ˆì´í„°ëŠ” exponent ê°’ì„ í¬í•¨í•œ ë‚´ë¶€í•¨ìˆ˜ powerë¥¼ ë¦¬í„´í•œë‹¤. raise_twoê°€ ì„ ì–¸ë˜ë©´ì„œ powerë„ í˜¸ì¶œì´ ëœë‹¤. powerëŠ” funcë¥¼ í¬í•¨í•œ ë‚´ë¶€í—˜ìˆ˜ inner_functionì„ ë¦¬í„´í•œë‹¤. ì—¬ê¸°ì—ì„œë„ inner_functionì€ í˜¸ì¶œë˜ì§€ ì•Šê³ , ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ë¦¬í„´ì´ ëœë‹¤. generate_power í˜¸ì¶œ ê³¼ì • (2)\n1 print(f\u0026#39;result of closure : {raise_two(7)}\u0026#39;) raise_twoë¥¼ í˜¸ì¶œí•˜ë©´ì„œ í´ë¡œì €ë¥¼ í˜¸ì¶œí•œë‹¤. í´ë¡œì € í˜¸ì¶œí•¨ì— ë”°ë¼ ë³€ìˆ˜ *argsì—ëŠ” raise_two í•¨ìˆ˜ì— ì „ë‹¬ëœ ì¸ì 7ì´ ì „ë‹¬ëœë‹¤. ì´ë˜í•œ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì™¸ë¶€ stateë¥¼ ì €ì¥í–ˆê¸° ë•Œë¬¸ì´ë‹¤. 2-1. *argsëŠ” í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” ëª¨ë“  ì¸ìë“¤ì„ ëœ»í•˜ê³ , **kwargsëŠ” ìœ„ì¹˜ ì§€ì •ëœ ëª¨ë“  ì¸ìë“¤ì„ ëœ»í•œë‹¤. inner_power ê²°ê³¼ë¥¼ ë¦¬í„´í•œë‹¤. í´ë¡œì € VS ë°ì½”ë ˆì´í„° ë°ì½”ë ˆì´í„°ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤. í´ë¡œì €ëŠ” ë°ì½”ë ˆì´í„°ì— ì˜í•´ ë°˜í™˜ëœë‹¤. ì´ë¦„ì— _ì™€ __ì‚¬ìš© ë¨¼ì € ì½ìœ¼ë©´ ì¢‹ì„ ìë£Œ Whatâ€™s the Meaning of Single and Double Underscores In Python? _ ì™€ __ ì‚¬ìš© ì˜ˆì‹œ\n1 2 3 4 5 6 7 _foo # single leading underscore foo_ # single trailing underscore _ # single underscore __foo__ # double leading and trailing underscore __foo # double leading underscore ìƒì„¸ ì‚¬ìš© ì˜ˆì‹œ name e.g. usage single leading underscore _foo - private(internally) í•˜ê²Œ ì‚¬ìš©ì´ ë¨ì„ ë‚˜íƒ€ë‚¸ë‹¤. - ì—¬ì „íˆ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë¬¸ë§¥ì  íŒíŠ¸ì— ê°€ê¹ë‹¤. single trailing underscore foo_ - íŒŒì´ì¬ì—ì„œ ì´ë¯¸ ì„ ì í•œ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ë•Œ í˜¼ì„ ì„ í”¼í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ë‹¤.\ne.g. type_, from_ single underscore _ - ì‚¬ìš©í•˜ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì„ ë‹´ì•„ë‘ëŠ” ìš©ë„ë¡œ ì“´ë‹¤. e.g. _ = return_something(), - ìˆ«ìê°€ ê¸¸ì–´ì§ˆ ë•Œ í˜¼ì„ ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì“´ë‹¤. e.g. 1000 â†’ 1_000 double leading and trailing underscore __foo__ - dunder method ë¼ê³  í•œë‹¤. - íŒŒì´ì¬ì—ì„œ ì´ë¯¸ ì„ ì í•œ íŠ¹ìˆ˜ ëª©ì  ì „ì—­ í´ë ˆìŠ¤ ë©”ì†Œë“œë‹¤. double leading underscore __foo - ë¶€ëª¨-ìì‹ í•„ë“œ ì´ë¦„ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê²ƒìœ¼ë¡œ íŒŒì•…í–ˆë‹¤. - ì‹¤ ì‚¬ìš©ì´ ê±°ì˜ ì—†ì„ ê±° ê°™ë‹¤. íŒŒì´ í¬ì¥í•˜ê¸°: ëª¨ë“ˆ, íŒ¨í‚¤ì§€, í”„ë¡œê·¸ë¨ ëª¨ë“ˆ íŒŒì´ì¬ì„ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ëª¨ë“ˆì´ë¼ëŠ” ë‹¨ì–´ê°€ ìì£¼ ë‚˜ì˜¤ëŠ”ë° ì—¬ê¸°ì„œ ëª¨ë“ˆì´ë€ ë‹¨ìˆœíˆ íŒŒì´ì¬ ì½”ë“œê°€ ë“¤ì–´ê°€ìˆëŠ” íŒŒì¼ì„ ëœ»í•œë‹¤.\níŒ¨í‚¤ì§€ íŒŒì´ì¬ì„ ì¢€ ë” í™•ì¥ ê°€ëŠ¥í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“ˆì„ íŒ¨í‚¤ì§€ë¼ëŠ” íŒŒì¼ ê³„ì¸µêµ¬ì¡°ë¡œ êµ¬ì„±í•´ì•¼ í•œë‹¤. __init__.py ëŠ” íŒŒì¼ ë‚´ìš©ì„ ë¹„ì›Œë†”ë„ ë˜ì§€ë§Œ, íŒŒì´ì¬ì€ ì´ íŒŒì¼ì„ í¬í•¨í•˜ëŠ” ë””ë ‰í„°ë¦¬ë¥¼ íŒ¨í‚¤ì§€ë¡œ ê°„ì£¼ í•˜ê¸° ë•Œë¬¸ì— íŒ¨í‚¤ì§€ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ê¼­ ë§Œë“¤ì–´ë‘¬ì•¼ í•œë‹¤.\níŒŒì´ì¬ì—ì„œ batteries included ì² í•™ì€ ìœ ìš©í•œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë§ì€ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“ˆë“¤ì´ ë‚´ì¥ì´ ë˜ì–´ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.\nDeque = Stack + Queue íŒŒì´ì¬ listëŠ” left endì˜ pop()ê³¼ append()ê°€ ë¹ ë¥´ì§€ê°€ ì•Šê¸° ë•Œë¬¸ì— left-endì™€ right-end ëª¨ë‘ ë¹ ë¥´ê³  ë©”ëª¨ë¦¬ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë°í¬ë¥¼ ì œê³µí•œë‹¤.\nlistì˜ right-end ì—°ì‚° ì†ë„ëŠ” O(1)ì´ì§€ë§Œ, left-end ì—°ì‚° ì†ë„ëŠ” O(n)ì´ë‹¤.\nDeque êµ¬í˜„ì²´ Deque ëŠ” Stackê³¼ Queueì˜ ê¸°ëŠ¥ì„ ê°€ì¡Œë‹¤. ì¶œì…êµ¬ê°€ ì–‘ ëì— ìˆëŠ” Queueë‹¤.(double-ended queueì˜ êµ¬í˜„ì²´ì´ë‹¤) DequeëŠ” ì–‘ ëìœ¼ë¡œë¶€í„° í•­ëª©ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•  ë•Œ ìœ ìš©í•˜ê²Œ ì“°ì¸ë‹¤. popleft()ëŠ” left-endë¥¼ ì œê±°í•´ì„œ ë°˜í™˜í•˜ê³ , pop()ì€ right-endë¥¼ ì œê±°í•´ì„œ ë°˜í™˜í•œë‹¤. Deque ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from collections import deque numbers = deque([1,2,3,4]) \u0026gt;\u0026gt;\u0026gt; numbers.popleft() 1 \u0026gt;\u0026gt;\u0026gt; numbers.popleft() 2 \u0026gt;\u0026gt;\u0026gt; numbers deque([3,4]) \u0026gt;\u0026gt;\u0026gt; numbers.appendleft(2) \u0026gt;\u0026gt;\u0026gt; numbers.appendleft(1) \u0026gt;\u0026gt;\u0026gt; numbers deque([1,2,3,4]) Dequeì˜ í¥ë¯¸ë¡œìš´ ì  ìµœëŒ€ ê¸¸ì´ (maximum lenght)ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. í•œ ìª½ì—ì„œ ë°ì´í„°ë¥¼ ë„£ì–´ íê°€ ê½‰ ì°¨ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ ìª½ì— ìˆëŠ” ì•„ì´í…œì„ ë²„ë¦°ë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ìœ¼ë¡œ ì¸í•´ ì´ì „ 0íšŒì˜ ê¸°ë¡ì„ ë‚¨ê¸°ê¸° ì™€ ê°™ì€ ìš”êµ¬ì‚¬í•­ì´ ìˆì„ ë•Œ í™œìš©í•˜ê¸°ê°€ ìš©ì´í•˜ë‹¤. [ë” ë§ì€ Deque ì‚¬ìš©ë²•] ì—ì„œ ë” ë§ì€ ìš©ë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. íˆìŠ¤í† ë¦¬ ë‚¨ê¸°ê¸° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 from collections import deque sites = ( \u0026#34;google.com\u0026#34;, \u0026#34;yahoo.com\u0026#34;, \u0026#34;bing.com\u0026#34; ) pages = deque(maxlen=3) pages.maxlen for site in sites: pages.appendleft(site) \u0026gt;\u0026gt;\u0026gt; pages deque([\u0026#39;bing.com\u0026#39;, \u0026#39;yahoo.com\u0026#39;, \u0026#39;google.com\u0026#39;], maxlen=3) pages.appendleft(\u0026#34;facebook.com\u0026#34;) \u0026gt;\u0026gt;\u0026gt; pages deque([\u0026#39;facebook.com\u0026#39;, \u0026#39;bing.com\u0026#39;, \u0026#39;yahoo.com\u0026#39;], maxlen=3) pages.appendleft(\u0026#34;twitter.com\u0026#34;) \u0026gt;\u0026gt;\u0026gt; pages deque([\u0026#39;twitter.com\u0026#39;, \u0026#39;facebook.com\u0026#39;, \u0026#39;bing.com\u0026#39;], maxlen=3) Linuxì˜ tail ëª¨ë°© ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 from collections import deque def tail(filename, lines=10): try: with open(filename) as file: return deque(file, lines) except OSError as error: print(f\u0026#39;Opening file \u0026#34;{filename}\u0026#34; failed with error: {error}\u0026#39;) thread-safe CPythonì—ì„œ dequeì˜ append(), appendleft(), pop(), popleft(), len()ì€ thread-safe í•˜ê²Œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ dequeë¥¼ ì‚¬ìš©í•˜ê¸° ì¢‹ë‹¤. CPytonì€ Cë¡œ êµ¬í˜„í•œ íŒŒì´ì¬ìœ¼ë¡œ, ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” íŒŒì´ì¬ êµ¬í˜„ì²´ë‹¤. ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê´€ë¦¬ê°€ ë˜ê³  ìˆë‹¤. [ê¹ƒí—ˆë¸Œ] ","date":"2022-03-08","permalink":"https://leeleelee3264.github.io/post/2022-03-08-introducing-python-part-one/","tags":["Book"],"title":"[Introducing Python] part one (1/2)"},{"content":"\ní„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ê¹ƒí—ˆë¸Œ ê³„ì •ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.\nIndex\nê¹ƒí—ˆë¸Œ ê³„ì • ì—¬ëŸ¬ ê°œ ì„¸íŒ…í•˜ê¸° ë§¤ë²ˆ í•´ì¤˜ì•¼ í•˜ëŠ” ì‘ì—…ë“¤ ë ˆí¼ëŸ°ìŠ¤ ê¹ƒí—ˆë¸Œ ê²Œì • ì—¬ëŸ¬ ê°œ ì„¸íŒ…í•˜ê¸° ë””ë ‰í„°ë¦¬ ì„¸íŒ…í•˜ê¸° ë³µìˆ˜ì˜ ê¹ƒí—ˆë¸Œ ê³„ì •ì„ ì‚¬ìš© í•  ë•Œ, ê° ê³„ì •ë“¤ì˜ root source directoryë¥¼ ë‚˜ëˆ„ì–´ë‘ë©´ ê´€ë¦¬ì  ì¸¡ë©´ì—ì„œë„, git config ì„¤ì •ì„ í•  ë•Œì—ë„ ë” í¸ë¦¬í•˜ë‹¤.\në””ë ‰í„°ë¦¬ ì˜ˆì‹œ\n. â””â”€â”€ home â”œâ”€â”€ office â””â”€â”€ personal ssh í‚¤ ë°œê¸‰ Step 1 ì‚¬ìš©í•  ê³„ì •ë“¤ì˜ í‚¤ ë°œê¸‰ 1 2 ssh-keygen -t rsa -b 4096 -C \u0026#34;leelee@office.com\u0026#34; ssh-keygen -t rsa -b 4096 -C \u0026#34;leelee@personal.com\u0026#34; Step 2 ë¡œì»¬ì˜ ssh-agent ì— ë°œê¸‰ë°›ì€ í‚¤ ì—°ê²°: 1 2 ssh-add -K ~/.ssh/id_rsa_personal ssh-add -K ~/.ssh/id_rsa_office ìœ„ì—ì„œ ì—°ê²°í•œ ssh í‚¤ ì •ë³´ë“¤ì€ ssh-add -l ë¡œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.\nStep 3 ssh config ì‘ì„± ë°œê¸‰ë°›ì€ í‚¤ë“¤ê³¼ ê¹ƒí—ˆë¸Œ ê³„ì • ì •ë³´ë¥¼ ë¡œì»¬ ë‹¨ì—ì„œ ì—°ê²°ì„ í•˜ê¸° ìœ„í•´ .ssh/config ì— ê´€ë ¨ ì •ë³´ë“¤ì„ ì‘ì„±ì„ í•œë‹¤.\n.ssh/config\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # Personal GitHub account Host github.com-personal HostName github.com User git AddKeysToAgent yes UseKeychain yes IdentityFile ~/.ssh/id_rsa # Office Github account Host github.com-office HostName github.com User git AddKeysToAgent yes UseKeychain yes IdentityFile ~/.ssh/id_rsa_office ssh í‚¤ ê¹ƒí—ˆë¸Œì— ë“±ë¡ ssh-keygen ê²°ê³¼ë¬¼\nid_rsa.pub ì™¸ë¶€ë¡œ ê³µê°œë˜ëŠ” ê³µê°œí‚¤ì´ë‹¤. githubì— ë“±ë¡ë˜ëŠ” í‚¤ë‹¤. íŒŒì¼ ëì„ ë³´ë©´ ì´ë©”ì¼ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. id_rsa ì™¸ë¶€ë¡œ ê³µê°œë˜ë©´ ì•ˆë˜ëŠ” ë¹„ë°€í‚¤ì´ë‹¤. id_rsa.pub ì—ì‹œ\n1 2 3 4 5 6 7 8 9 10 11 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCruMY405yFL/6fvDvVFUTlxgXVO XRhdXlWDGsX5Kcn7yvEiGwBhVngvL8WWfA+hlelodoIAvlgnN9sJmVDDHF8XkK6r/ INdvFBAQ28+2GlOM8l038HDiCOTg/GzhEQK0hVzE0Cgsfrw2YMSxDJ9Gr9eSDSN0ia0LM LHMXdn5I5aeePGlt0boMIJgohzLVb4HT5KipBxbHETe05a8oOvmc9nS8r47ibSWpecuqDMJ7 7YrBa82X0d+5nAdZ1QiJg63k7ifJdPC4/CJHVvmglsHBzTkWEdn89R6q4OwyrUBRnrcITrF8 aCQMax2A5f7SaLcJ9xXQx47LT0ApfJ5UhHmLdK2vKzWEeEXhMfT3d0wIlppsEs5FuZRLqSAyZ QCn1IxZvV+KBAe5O3B9sidhULMnTzGqLCe3lLv3K0uI2MrP694LHqjW0duppbRbZZSNGdc0AM PtOqprI+lvBAugi6mN20sWRBMsHz1m1HdUI4yM85VAhYLNLgqs5n13ZfwUYEEh9EyqtGESToy 8DCSRqPqHNINB0skGBh9DF3ChjhdKvyn40AmpHdAzFlWgKGXbvx1DKzVhkubGNkISicwT7U+9 /18UuHJL2OsoFd9YcQ0qJqcrXWY2RxVkqAxzndxaPNeT5uXhZt0yNukm3UXd9khEd/Qn8F1n IqgHGiVCntP9wmQ== leelee@personal.com github setting í˜ì´ì§€ë¡œ ì´ë™ [Picture 1] Github Setting ë©”ë‰´ë°” SSH and GPG Keys í•­ëª©ì—ì„œ New SSH key ë“±ë¡ officeë¥¼ ìœ„í•œ id_rsa_personal.pub ì™€ id_rsa_office.pud ë¥¼ ê°ê° ë“±ë¡í•´ì¤€ë‹¤.\n[Picture 2] New SSH key ë“±ë¡ ê³„ì • ì •ë³´ ëª…ì‹œ Githubì—ì„œ ì‚¬ìš©í•˜ëŠ” nameê³¼ emailì„ ë³„ë„ë¡œ ì„¤ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ê°œì¸ ë¦¬í¬ì§€í† ë¦¬ì— ì˜¬ë¦´ ì»¤ë°‹ì˜ ì‘ì„±ìê°€ íšŒì‚¬ ê³„ì •ìœ¼ë¡œ ë˜ì–´ìˆê±°ë‚˜, ê¶Œí•œì´ ì—†ë‹¤ë©° pushë¥¼ í•  ìˆ˜ ì—†ë‹¤. ë–„ë¬¸ì— ê°ê° ê³„ì •ë³„ë¡œ ì •ë³´ë¥¼ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤.\nê³„ì • ì •ë³´ ëª…ì‹œ ì‹œë‚˜ë¦¬ì˜¤ default: personal\nhomeê³¼ office ë””ë ‰í„°ë¦¬ì— ê°ê° .gitconfig íŒŒì¼ì„ í•˜ë‚˜ì”© ë§Œë“¤ì–´ì¤€ë‹¤. homeì˜ .gitconfigì— personal ê³„ì •ì˜ nameê³¼ emailì„ ì…ë ¥í•´ì¤€ë‹¤. office ì˜ .gitconfigë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤. officeì˜ .gitconfigì— íšŒì‚¬ ê³„ì •ì˜ nameê³¼ emailì„ ì…ë ¥í•´ì¤€ë‹¤. home .gitconfig\n1 2 3 4 5 [user] name = leelee-personal email = leelee@personal.com [includeIf \u0026#34;gitdir:~/office/\u0026#34;] path = ~/office/.gitconfig office .gitconfig\n1 2 3 [user] name = leelee-office email = leelee@office.com ì™„ì„±ëœ ë””ë ‰í„°ë¦¬ ì—ì‹œ\n. â””â”€â”€ home â”œâ”€â”€ .gitconfig â”œâ”€â”€ office â”‚Â â””â”€â”€ .gitconfig â””â”€â”€ personal ë§¤ë²ˆ í•´ì¤˜ì•¼ í•˜ëŠ” ì‘ì—…ë“¤ ë ˆí¬ì§€í† ë¦¬ ì£¼ì†Œ ìˆ˜ì • .ssh/config ì—ì„œ ì—°ê²°í•  Hostë¥¼ ê³„ì •ë³„ë¡œ ë¶„ê¸°í•´ì„œ ê°ê° github.com-personal ê³¼ github.com-office ë¡œ êµ¬ë¶„ì„ í–ˆë‹¤. ë•Œë¬¸ì— ë§¤ë²ˆ ë ˆí¬ì§€í† ë¦¬ë¥¼ ë§Œë“¤ê±°ë‚˜, í´ë¡ í•  ë•Œ êµ¬ë¶„í•˜ëŠ” ì‘ì—…ì„ í•´ì¤˜ì•¼í•œë‹¤. git remote set-url ë¡œ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì—°ê²°í•  ë–„ë„ ë˜‘ê°™ì€ í˜•ì‹ìœ¼ë¡œ í•´ì¤˜ì•¼ í•œë‹¤.\nê¸°ì¡´ url\n1 git clone git@github.com:(Repo path).git ìˆ˜ì • url\n1 git clone git@github.com-office:(Repo path).git set-url ì˜ˆì‹œ\n1 git remote set-url origin git@github.com-office:(Repo path).git Reference [CodeWords: A Mobile Application Blog by Heady]\n","date":"2022-01-12","permalink":"https://leeleelee3264.github.io/post/2022-01-12-git-multi-account/","tags":["General"],"title":"í„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ê¹ƒí—ˆë¸Œ ê³„ì • ì‚¬ìš©í•˜ê¸°"},{"content":"\n2021 ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ ì¸í„°ë·°ì˜ ë©´ì ‘ì§ˆë¬¸ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.\nIndex\nPython DevOps ê°œë°œ ì „ë°˜ ìƒì‹ Python íŒŒì´ì¬ ì“°ë ˆë“œ íŒŒì´ì¬ ì“°ë ˆë“œì— ëŒ€í•´ ì•„ëŠ” ì ì€ íŒŒì´ì¬ ìì²´ì—ì„œ ì“°ë ˆë“œë¥¼ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , ìš´ì˜ì²´ì œì—ì„œ ì œê³µí•˜ëŠ” ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒê³¼, ì“°ë ˆë“œê°€ ìˆë‹¤ê³  í•´ë„ í•œ íƒ€ì„ì— í•œ ì“°ë ˆë“œë§Œ ëŒì•„ê°„ ë‹¤ëŠ” ì‚¬ì‹¤ì´ì—ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì˜ ì›ì¸ì€ íŒŒì´ì¬ì˜ ë””í´íŠ¸ êµ¬í˜„ì±„ì¸ CPythonì— ìˆì—ˆë‹¤.\nCpython ì“°ë ˆë“œ Cpythonì€ OS ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•œë‹¤. íŒŒì´ì¬ ì“°ë ˆë“œë€, OS ì“°ë ˆë“œë¥¼ íŒŒì´ì¬ì´ ëŸ°íƒ€ì„ì— ê´€ë¦¬ë¥¼ í•˜ëŠ” ê²ƒ ë¿ì´ë‹¤. Cpython ì¸í„°í”„ë¦¬í„°ëŠ” ì „ì—­ ì¸í„°í”„ë¦¬í„° ë¡ (global interpreter lock) ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì—¬ í•œ ë²ˆì— ì˜¤ì§ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ íŒŒì´ì¬ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë„ë¡ ë³´ì¥í•œë‹¤.\nì´ëŸ° ì¸í„°í”„ë¦¬í„° ì „ì²´ë¥¼ ì êµ¬ëŠ” íŠ¹ì„±ì€ ì¸í„°í”„ë¦¬í„°ë¥¼ ë‹¤ì¤‘ìŠ¤ë ˆë“œí™” í•˜ê¸° ì‰½ê²Œ ë§Œë“ ë‹¤, í•˜ì§€ë§Œ í•œ ë²ˆì— ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë¥¼ ì‹¤í–‰ì‹œì¼œ ì“°ë ˆë“œì˜ íŠ¹ì§•ì¸ ë³‘ë ¬ì„± ìƒì–´ë²„ë¦¬ê²Œ í•œë‹¤. (ì´ëŠ” multiprocessing ìœ¼ë¡œ ë³´ì™„)\níŒŒì´ì¬ì˜ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„± íŒŒì´ì¬ ì“°ë ˆë“œì— ëŒ€í•´ ë„ˆë¬´ ê°„ëµí•˜ê²Œ ì•Œê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ì¶”ê°€ë¡œ ë” ì°¾ì•„ë³´ê²Œ ë˜ì—ˆëŠ”ë°, ê·¸ë•Œ í”„ë¡œê·¸ë˜ë°ì—ì„œ í”íˆ ì‚¬ìš©ë˜ëŠ” ê°œë…ì¸ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì— ëŒ€í•´ì„œ, ë˜ íŒŒì´ì¬ì€ ì´ ë‘˜ì„ ì–´ë–»ê²Œ ì§€ì›í•˜ëŠ”ì§€ í•™ìŠµí–ˆë‹¤.\nì›ë˜ëŠ” ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì´ ê°™ì€ ëœ»ì¸ì¤„ ì•Œì•˜ë‹¤. ì•Œê³ ë³´ë‹ˆ ë™ì‹œì„±ì€ ì§§ì€ ì‹œê°„ì— í•œ ê°€ì§€ ì¼ì„ ì²˜ë¦¬ í•˜ê³  ê¸ˆë°© ë°”ê¿”ì„œ ë˜ ë‹¤ë¥¸ ì¼ì„ ì²˜ë¦¬í•˜ëŠ” ê±¸ ë§í•œë‹¤. ê²°êµ­ í•œ ìˆœê°„ì—ëŠ” í•œê°€ì§€ ì¼ë§Œì„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤. ê·¸ëŸ°ë° ë³‘ë ¬ì„±ì€ í•œ ìˆœê°„ì— ì—¬ëŸ¬ê°€ì§€ ì¼ì„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.\n[Picture 1] ë³‘ë ¬ì„±ê³¼ ë™ì‹œì„± ê·¸ëŸ°ë° ë³‘ë ¬ì„±ì´ ë¹›ì„ ë³´ê¸° ìœ„í•´ì„œëŠ” ì •ë§ë¡œ CPU ì—¬ëŸ¬ ê°œê°€ ìˆì–´ì•¼ í•œë‹¤. ì—¬ëŸ¬ ê°€ì§€ CPUë“¤ì— ì¼ì„ í•˜ë‚˜ì”© í• ë‹¹í•´ ë§ˆì¹˜ë„ë¡ í•˜ê¸° ë–„ë¬¸ì´ë‹¤. ì—¬ëŸ¬ê°€ì§€ ì¼ì„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” ë³‘ë ¬ì„±ì´ ì¢‹ì•„ë³´ì´ì§€ë§Œ, ì–´ë–¤ ì¼ì„ ì²˜ë¦¬í•˜ëƒì— ë”°ë¼ì„œ ë™ì‹œì„±ê³¼ ë³‘ë ¬ì„±ì„ ì„ íƒí•´ì•¼ í•œë‹¤. ëŒ€ê¸°í•˜ëŠ” ì¼ì´ ëŒ€ë¶€ë¶„ì¸ ì…ì¶œë ¥ I/O ì‘ì—…ì´ë¼ë©´ ë³‘ë ¬ì„ í•´ì„œ CPUë¥¼ ë†€ê²Œ í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë™ì‹œì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” íš¨ê³¼ì ì´ë‹¤. ì´ì œ ì‹¤ì œ íŒŒì´ì¬ êµ¬í˜„ ë¶€ë¶„ì„ ë´ë³´ë„ë¡ í•˜ì.\në™ì‹œì„± ì¥ì  í¸ë¦¬í•˜ê³ , ì˜ ì´í•´ë˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ë“¤ì„ ê¸°ë‹¤ë¦¬ëŠ” í…ŒìŠ¤í¬ë¥¼ ì‹¤í–‰í•œë‹¤. ì—¬ê¸°ì„œì˜ ë¦¬ì†ŒìŠ¤ë“¤ì€ ë„¤íŠ¸ì›Œí¬, ì…ì¶œë ¥, í•˜ë“œì›¨ì–´ ë””ë°”ì´ìŠ¤ì˜ ì‹ í˜¸ ë“±ì´ ë  ìˆ˜ ìˆë‹¤.\në‹¨ì  Generalí•œ ì“°ë ˆë“œì˜ ë‹¨ì ë“¤ì²˜ëŸ¼, ê°ì²´ ì—‘ì„¸ìŠ¤ë¥¼ ì˜ ê´€ë¦¬í•´ì¤˜ì•¼ í•´ì„œ CPUì— ë¯¼ê°í•œ ì‘ì—…ì€ í•  ìˆ˜ ì—†ë‹¤. ë˜í•œ ì‹¤í–‰ë˜ê³  ìˆë˜ A ì“°ë ˆë“œê°€ B ì“°ë ˆë“œë¡œ ìŠ¤ìœ„ì¹˜ ë˜ë©´ì„œ A ì“°ë ˆë“œëŠ” ë©ˆì¶°ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í¼í¬ë¨¼ìŠ¤ì  ì´ì ì´ ì—†ë‹¤.\në™ì‹œì„±ì˜ ëŒ€í‘œ ì˜ˆì‹œ: ì½”ë£¨í‹´ Python ì½”ë£¨í‹´ and async ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import aiohttp import asyncio urls = [ \u0026#34;https://imdb.com\u0026#34;, \u0026#34;https://python.org\u0026#34;, \u0026#34;https://docs.python.org\u0026#34;, \u0026#34;https://wikipedia.org\u0026#34;, ] async def get_from(session, url): async with session.get(url) as r: return await r.text() async def main(): async with aiohttp.ClientSession() as session: datas = await asyncio.gather(*[get_from(session, u) for u in urls]) print ([_[:200] for _ in datas]) if __name__ == \u0026#34;__main__\u0026#34;: loop = asyncio.get_event_loop() loop.run_until_complete(main()) ì½”ë£¨í‹´ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤\nget_from í•¨ìˆ˜ê°€ ì½”ë£¨í‹´ì´ë‹¤. asyncio.gather ëŠ” ì—¬ëŸ¬ê°œì˜ ì½”ë£¨í‹´ (ë‹¤ë¥¸ urlë“¤ì„ ê°€ì§„ ë‹¤ìˆ˜ì˜ get_from í•¨ìˆ˜ ì¸ìŠ¤í„´ìŠ¤) ë¥¼ ìƒì„±í•´ë‚¸ë‹¤. asyncio.gather ëŠ” ëª¨ë“  ì½”ë£¨í‹´ì´ ì‹¤í–‰ ì™„ë£Œë˜ê¸°ë¥¼ ê¸°ë‹¤ë ¸ë‹¤ê°€, ê²°ê³¼ë¥¼ ì·¨í•©í•´ì„œ ë¦¬í„´í•œë‹¤. ì½”ë£¨í‹´ ì¥ì  ì–´ë–¤ ê²Œ ì½”ë£¨í‹´ì¸ì§€ ë¬¸ë§¥ì ìœ¼ë¡œ í™•ì‹¤í•˜ê²Œ êµ¬ë¶„ì„ í•  ìˆ˜ ìˆë‹¤. ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ í•¨ìˆ˜ë„ ì“°ë ˆë“œë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆì–´ í˜¼ë™ì´ ì˜¤ëŠ” ë° ì½”ë£¨í‹´ì€ ê·¸ ì ì„ ë°©ì§€í•œë‹¤. ê¼­ ì“°ë ˆë“œë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì½”ë£¨í‹´ì€ íŒŒì´ì¬ ëŸ°íƒ€ì„ì´ ì§ì ‘ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. ë•Œë¬¸ì— ìŠ¤ìœ„ì¹­ì´ ë  ë•Œì—ë„ ì“°ë ˆë“œë³´ë‹¤ ì˜¤ë²„í—¤ë“œë„ ì‘ê³ , ë©”ëª¨ë¦¬ë„ ë” ì ê²Œ í•„ìš”ë¡œ í•œë‹¤. ì½”ë£¨í‹´ ë‹¨ì  async await ë¬¸ë²•ì„ ì˜ ì§€ì¼œì•¼ í•œë‹¤. ë˜í•œ ì“°ë ˆë“œê°€ ê·¸ëŸ¬í•˜ë“¯, CPUì— ë¯¼ê°í•œ ì‘ì—…ì€ í•  ìˆ˜ ì—†ë‹¤.\në³‘ë ¬ì„± ë§ ê·¸ëŒ€ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ê°ê°ì˜ CPUì—ì„œ ëŒì•„ê°€ê¸° ë•Œë¬¸ì— ë©€í‹°ì½”ì–´ì—¬ì•¼ í•œë‹¤. í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“  ë‹¤ëŠ” ë§ì€ íŒŒì´ì¬ ì¸í„°í”„ë¦¬í„° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“  ë‹¤ëŠ” ëœ»ì´ë‹¤!\nì¥ì  ì“°ë ˆë“œì™€ ì½”ë£¨í‹´ê³¼ëŠ” ë‹¤ë¥´ê²Œ ê°ì²´ì˜ ë‹¤ì¤‘ ì—‘ì„¸ìŠ¤ì— ëŒ€í•œ ê´€ë¦¬ê°€ ì¡°ê¸ˆ ë” ì‰½ë‹¤. ê·¸ë¦¬ê³  ì“°ë ˆë“œì™€ ì½”ë£¨í‹´ì€ ë‹¤ì¤‘ ì—‘ì„¸ìŠ¤ ë•Œë¬¸ì— ëª¨ë“  ì˜¤í¼ë ˆì´ì…˜ì´ ìˆœì°¨ì ìœ¼ë¡œ ëŒì•„ê°€ê²Œ í•˜ì§€ë§Œ ì´ëŠ” ê·¸ëŸ´ í•„ìš”ê°€ ì—†ë‹¤.\në‹¨ì  í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ê°œ ë§Œë“œëŠ” ê²ƒ ìì²´ì— ì˜¤ë²„í•´ë“œê°€ ë“ ë‹¤. ê·¸ë¦¬ê³  ì„œë¸Œ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì˜¨ ë°ì´í„° ë³µì‚¬ë³¸ì´ ìˆì–´ì•¼ í•˜ëŠ”ë° ì´ë ‡ê²Œ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì—ì„œ ë°ì´í„°ê°€ ì™”ë‹¤ê°”ë‹¤ í•˜ê¸° ìœ„í•´ì„œëŠ” ì§ë ¬í™”ë¥¼ í•´ì•¼ í•œë‹¤. ì´ë•Œ pickle íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì“°ëŠ”ë°, ë³´í†µì˜ ê°ì²´ë“¤ì€ ì§€ì›í•˜ì§€ë§Œ íŠ¹ì´í•œ ê°ì²´ë“¤ì€ ì§€ì›ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.\n[Python concurrency and parallelism explained] ì„ ë³´ë©´ì„œ íŒŒì´ì¬ì´ ì§€ì›í•˜ëŠ” ë™ì‹œì„±, ë³‘ë ¬ì„± êµ¬í˜„ì„ ì‚´í´ë´¤ë‹¤.\níŒŒì´ì¬ì„ ë°±ì—”ë“œë¡œ ì“°ë©´ì„œ í•œêº¼ë²ˆì— ëª°ë¦° ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• ì´ê±´ ë©´ì ‘ì—ì„œ ë‚˜ì˜¨ ì§ˆë¬¸ì€ ì•„ë‹ˆì—ˆê³ , ë‚´ê°€ ê¶ê¸ˆí•´ì„œ ë¬¼ì–´ë³¸ ë¶€ë¶„ì´ì—ˆë‹¤.\níŒŒì´ì¬ì€ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë‹¤ë³´ë‹ˆ ë°±ì—”ë“œë¡œ ì‚¬ìš©ì„ í•˜ë‹¤ë³´ë©´ í•œê³„ê°€ ì˜¨ë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ê²°êµ­ ì»´íŒŒì¼ ì–¸ì–´ì¸ ìë°”ë¡œ ë‹¤ì‹œ ë§Œë“œëŠ” ê²½ìš°ê°€ ì™•ì™•ìˆë‹¤ê³  í•˜ëŠ”ë° í•œêº¼ë²ˆì— ìš”ì²­ì´ ëª°ë¦¬ë©´ ì–´ë–»ê²Œ íŒŒì´ì¬ìœ¼ë¡œ ì²˜ë¦¬ë¥¼ í•˜ëƒê³  ë¬¼ì–´ë´¤ë‹¤.\nì²˜ë¦¬ ë°©ë²• ë°±ì—”ë“œ ì½”ë“œë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì˜¬ë ¤ì„œ ìš´ìš©ì„ í•œë‹¤ê³  ë§ì”€í•´ì£¼ì…¨ëŠ”ë°, ê·¸ë˜ì„œ ìš”ì²­ì´ ëª°ë¦´ë•Œì—ë„ ì´ ì¿ ë²„ë„¤í‹°ìŠ¤ì— ì˜¬ë¦° íŒŒë“œë¥¼ ì¦ì„¤í•œë‹¤ê³  í•œë‹¤. ì¦‰, ì»¨í…Œì´ë„ˆë¥¼ ëª‡ ê°œ ë” ë§Œë“¤ì–´ ìš”ì²­ì„ ë¶„ì‚°ì²˜ë¦¬ í•œë‹¤. ì—­ì‹œ ì½”ë“œ ìì²´ë¡œ ì„±ëŠ¥ì„ ê°œì„ í•˜ê¸° ë³´ë‹¤ëŠ” ëˆì„ ì¨ì„œ ì„œë²„ë¥¼ ì¦ì„¤í•˜ëŠ” ë°©ë²•ì´ íšŒì‚¬ì—ì„œ ì œì¼ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì´ ì•„ë‹ê¹Œ.\nDjango ëª¨ë“ˆ êµ¬ì¡°ì™€ íë¦„ ì¥ê³ ì˜ íë¦„ì€ [Picture 2] ê°™ë‹¤. êµ‰ì¥íˆ ê°„ë‹¨í•œ ì§ˆë¬¸ì´ì—ˆëŠ”ë° ì¥ê³ ë¥¼ ê±°ì˜ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šì•„ì„œ ì•„ì£¼ ëœ¨ë¬¸ëœ¨ë¬¸ ëŒ€ë‹µì„ í–ˆë‹¤.. í•œì°½ ìŠ¤í”„ë§ì„ ì“°ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ì— ë¹—ëŒ€ì–´ì„œ ëŒ€ë‹µì„ í–ˆë‹¤.\n[Picture 2] Django ëª¨ë“ˆ êµ¬ì¡° View Controller Model ë°ì´í„°ê°€ ë“¤ì–´ìˆëŠ” ì—”í‹°í‹° ì¥ê³ ì˜ ëª¨ë¸ì˜ í•„ë“œë“¤ì€ db í…Œì´ë¸”ì˜ ì»¬ëŸ¼ë“¤ê³¼ ë§¤í•‘ì´ ëœë‹¤. dbì™€ ë°”ë¡œ ì—°ê²°ì´ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ëª¨ë¸ì„ ë³€ê²½í•˜ë©´ ìë™ìœ¼ë¡œ dbì— migrate ë  ìˆ˜ ìˆë‹¤. Template í™”ë©´ì´ë‹¤. DRFë¼ë©´ ê±°ì˜ ì“¸ ì¼ì´ ì—†ë‹¤. Django wsgi í•­ìƒ í”„ë¡œì íŠ¸ ì•ˆì˜ wsgiê°€ ë­”ê°€ í–ˆëŠ”ë° ì›¹ ì„œë²„ ë° ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ íŒŒì´ì¬ í‘œì¤€ì´ë¼ê³  í•œë‹¤.\n[Picture 3] wsgi íë¦„ í´ë¼ì´ì–¸íŠ¸ê°€ ì •ì ì¸ ì›¹í˜ì´ì§€ë¥¼ ìš”ì²­í–ˆì„ ê²½ìš° ì›¹ì„œë²„ì—ì„œ ì³ ë‚¼ ìˆ˜ ìˆì§€ë§Œ, ë™ì ì¸ í˜ì´ì§€ë¥¼ ìš”ì²­í–ˆì„ ë•ŒëŠ” ì›¹ì„œë²„ì—ì„œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ì—†ê³ , ì¥ê³  ì„œë²„ì— ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë„˜ê²¨ì¤˜ì•¼í•œë‹¤. ê·¸ëŸ°ë° ì›¹ì„œë²„ëŠ” íŒŒì´ì¬ì„ ëª¨ë¥¸ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê°€ìš´ë°ì— wsgiê°€ ì¸í„°í˜ì´ìŠ¤ ì—­í• ì„ í•´ì„œ ì›¹ì„œë²„ì™€ ì¥ê³ ë¥¼ ì—°ê²°í•´ì¤€ë‹¤.\nê·¸ëŸ¼ ë‹¹ì—°íˆ ì¥ê³ ì—ì„œ ì œì¼ ë¨¼ì € í˜¸ì¶œë˜ëŠ” ë¶€ë¶„ì€ wsgiê°€ ë  ìˆ˜ ë°–ì— ì—†ë‹¤. ì–˜ê°€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë¬¼ì–´ë‹¤ì£¼ë‹ˆê¹Œ. url ë””ìŠ¤íŒ¨ì²˜ì™€ ë¯¸ë“¤ì›¨ì–´ ë“±ë“±ë„ ì¼ë‹¨ì€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì™€ì•¼ í•´ì„œ ê·¸ ì´í›„ì— í˜¸ì¶œì´ ëœë‹¤.\nDjango ORM objects.all objects.all ì€ ì „ì²´ ìë£Œë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. ëª¨ë“  ë°ì´í„°ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ì´ìƒ ì œì¼ íš¨ìœ¨ì´ ì¢‹ì§€ ì•Šì€ ì¿¼ë¦¬ë¼ í•  ìˆ˜ ìˆë‹¤.\nselected_related VS prefetch_related Django ORMì—ì„œ ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒìœ¼ë¡œ ë§ì´ ì“°ì´ëŠ” ê¸°ëŠ¥ì€ select_related ì™€ prefetch_relatedì¸ë° ë‘˜ ë‹¤ ì¦‰ì‹œ ë¡œë”© (Eager-loading)ê³¼ í•œ ë²ˆ DBì—ì„œ ë¡œë”©ì„ í•œ ì´í›„ë¶€í„°ëŠ” ìºì‹±ì´ ë˜ì–´ì„œ ì“°ì´ëŠ” ë“±ì˜ íŠ¹ì§•ì€ ë™ì¼í•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ê³¼ ì‚¬ìš©í•˜ëŠ” ìƒí™©ì´ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.\nëŒ€ê²ŒëŠ” selected_related ì‚¬ìš©ì„ ì¶”ì²œí•˜ê³  ìˆë‹¤.\nselected_related one-to-one ê°™ì€ single-valued relationship ì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. DBì—ì„œ joinì„ í•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤. prefetch_related one-to-one ê°™ì€ single-valued relationship ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. many-to-many, many-to-oneì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ 2ê°œì˜ ë‹¨ê³„ë¥¼ ê±°ì¹œë‹¤. ê´€ê³„ë³„ë¡œ ê°œë³„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰ (ì—°ê²° í…Œì´ë¸”ì´ 3ê°œë¼ë©´ 3ê°œì˜ ì¿¼ë¦¬ê°€ ë”°ë¡œ ì‹¤í–‰) ê°ê° ê°€ì ¸ì˜¨ ë°ì´í„°ë“¤ì„ íŒŒì´ì¬ì—ì„œ í•©ì³ì£¼ê¸° ì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [select_relatedì™€ prefetch_related]\nselect_relatedì™€ prefetch_relatedì— ëŒ€í•œ ì°¨ì´ë¥¼ ì˜ ì„¤ëª…í•´ì£¼ê³  ìˆë‹¤. select_relatedì™€ prefetch_relatedë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤. [ë‹¹ì‹ ì´ ëª°ëë˜ Django Prefetch]\nDjango Prefetch íš¨ìœ¨ì  ì‚¬ìš©ìœ¼ë¡œ ì„±ëŠ¥ê°œì„ í•˜ê¸° DevOps Nginx load balancing ìŠ¤ì¼€ì¥´ë§ ë©”ì„œë“œ Round Robin ë¼ìš´ë“œ ë¡œë¹ˆì€ ìš´ì˜ì²´ì œ ìˆ˜ì—…ì—ì„œ ë°°ì› ë˜ ë¼ìš´ë“œ ë¡œë¹ˆê³¼ ë™ì¼í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ, ì•„ë¬´ëŸ° ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ë¼ìš´ë“œ ë¡œë¹ˆ ë°©ì‹ìœ¼ë¡œ ìŠ¤ì¼€ì¥´ë§ì´ ëœë‹¤. Least Connections ê°€ì¥ ì ì€ ìˆ˜ì˜ active connectionì„ ê°€ì§€ê³  ìˆëŠ” ì„œë²„ì—ê²Œ ìš”ì²­ì„ í• ë‹¹í•œë‹¤. IP Hash ë˜‘ê°™ì€ ì•„ì´í”¼ì—ì„œ ì˜¨ ìš”ì²­ë“¤ì„ ë˜‘ê°™ì€ ì„œë²„ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•œë‹¤. ë™ì¼ ì•„ì´í”¼ì˜ ê¸°ì¤€ì€ IPv4ì¼ë•ŒëŠ” ì•ì˜ 3 ì˜¥í…Ÿì´ ë™ì¼í•´ì•¼ í•˜ê³ , IPv6ì—ì„œëŠ” ëª¨ë“  ìë¦¬ê°€ ë™ì¼í•´ì•¼ í•œë‹¤. Generic Hash ìœ ì €ê°€ ì •ì˜í•œ í‚¤(hashed key value) ì— ë§ì¶°ì„œ ìš”ì²­ì„ í• ë‹¹í•œë‹¤ê³  í•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ íŒŒë“œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°°í¬ ê°€ëŠ¥í•œ ê°€ì¥ ì‘ì€ ì»´í“¨íŒ… ë‹¨ìœ„. í•˜ë‚˜ ì´ìƒì˜ ì»¨í…Œì´ë„ˆ ê·¸ë£¹ì´ë‹¤. ì´ ê·¸ë£¹ì€ ìŠ¤í† ë¦¬ì§€ ë° ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µìœ í•œë‹¤. ë„ì»¤ ê°œë… ì¸¡ë©´ì—ì„œ íŒŒë“œëŠ” ê³µìœ  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ê³µìœ  íŒŒì¼ì‹œìŠ¤í…œ ë³¼ë¥¨ì´ ìˆëŠ” ë„ì»¤ ì»¨í…Œì´ë„ˆ ê·¸ë£¹ê³¼ ë¹„ìŠ·í•˜ë‹¤.\nDocker Compose ë„ì»¤ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ì»¤ ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë° ê°„ë‹¨í•œ ì»¤ë§¨ë“œëŠ” ìƒê´€ì´ ì—†ì§€ë§Œ ë³¼ë¥¨ì„ ì—°ê²°í•˜ëŠ” ë“±ì˜ ì¶”ê°€ ì„¤ì •ì„ í•˜ë‹¤ ë³´ë©´ ì»¤ë§¨ë“œê°€ êµ‰ì¥íˆ ê¸¸ì–´ì§„ë‹¤. ì´ë ‡ê²Œ ê¸¸ì–´ì§„ ë„ì»¤ ì»¤ë§¨ë“œë¥¼ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§œë„ ë˜ì§€ë§Œ ì´ëŸ° ë¶ˆí¸ì„ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì´ìš©í•´ í•´ê²° í•  ìˆ˜ ìˆë‹¤.\në„ì»¤ ì»´í¬ì¦ˆëŠ” ì¼ì¢…ì˜ íˆ´ì¸ë° ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í™˜ê²½ì„ YAML íŒŒì¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.\në„ì»¤ ì»´í¬ì¦ˆ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 version: \u0026#34;3.3\u0026#34; services: # db config web: build: . ports: - \u0026#34;4012:4012\u0026#34; environment: TZ: \u0026#34;Asia/Seoul\u0026#34; container_name: gov-prod-web_1 ê°œë°œ ì „ë°˜ ìƒì‹ DDD ë””ìì¸ íŒ¨í„´ì¤‘ í•˜ë‚˜ì´ë‹¤. Domain Driven Designì˜ ì•½ìì´ë‹¤. ë³´í†µ í´ë¦° ì•„í‚¤í…ì²˜ë‘ í•¨ê»˜ ì‚¬ìš©ëœë‹¤. ë„ë©”ì¸ ì½”ë“œê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì¸í”„ë¼ ì½”ë“œì™€ ë¶„ë¦¬ ë˜ëŠ” ê²ƒì— ì§‘ì¤‘ì„ í•œë‹¤ëŠ” ì ì´ ê°™ê¸° ë•Œë¬¸ì´ë‹¤. ë„ë©”ì¸ì´ë€ í”„ë¡œì íŠ¸ ì•ˆì—ì„œ ê°œë°œë˜ì–´ì•¼ í•˜ëŠ” ì£¼ì œë¥¼ ëœ»í•˜ë©°, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë¼ í•  ìˆ˜ ìˆë‹¤. ëª¨ë“  ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´ì˜ ëª©ì ì²˜ëŸ¼ ì‹œìŠ¤í…œì„ ë§Œë“¤ê³  ìœ ì§€ë³´ìˆ˜í•˜ëŠ”ë° íˆ¬ì…ë˜ëŠ” ì¸ë ¥ ìµœì†Œí™”ì— ìˆë‹¤. DDD ë¥¼ ë³´ë‹¤ë³´ë©´ ìœ ë¹„ì¿¼í„°ìŠ¤ë¼ëŠ” ë‹¨ì–´ê°€ ë§ì´ ë‚˜ì˜¨ë‹¤. ê°œë°œì, ë””ìì´ë„ˆ, ê¸°íšìê°€ ëª¨ë‘ ë™ì¼í•œ ì˜ë¯¸ë¡œ ì´í•´í•˜ëŠ” ë‹¨ì–´ë¼ëŠ” ëœ»ì´ë‹¤. DDD íŒ¨í„´ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì¸ ë„ë©”ì¸ì„ ì¸í”„ë¼ì™€ ì–´í”Œë¦¬ì¼€ì´ì…˜(ì„œë¹„ìŠ¤) ì™€ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë¹„ì¦ˆë‹ˆìŠ¤ ìì²´ì— ì§‘ì¤‘ì„ í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ê°œë°œìê°€ ë‹¤ë¥¸ ë¶€ì„œì™€ í˜‘ì—…ì„ í•  ë•Œ ì˜ì‚¬ì†Œí†µì´ ë” ì›í™œí•˜ê²Œ ì´ë¤„ì§ˆ ìˆ˜ ìˆë‹¤. (db, network ë“±ë“±ì˜ ë¡œìš° ë ˆë²¨ ì„ ì–˜ê¸°í•˜ì§€ ì•Šê¸° ë•Œë¬¸)\n[Picture 4] Layer of the Clean Architecture ë„ë©”ì¸ ê°œë…ì— ì§‘ì¤‘í•´ì„œ ì•„í‚¤í…ì²˜ë¥¼ ë§Œë“¤ë©´ [Picture 4] ì™€ ê°™ë‹¤. ë„ë©”ì¸ ì†ì— ì—”íƒ€í‹°ê°€ ë“¤ì–´ìˆëŠ”ë° ì´ê²Œ ì œì¼ ì¤‘ìš”í•œ ê°œë…ì´ë¼ê³  ìƒê°í•œë‹¤. ì—”í‹°í‹°ì— ìµœëŒ€í•œ ë§ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë£°ì„ ë‹´ì•„ì„œ ì‘ì§‘ì„±ì„ ë†’ì´ê³ , ì¤‘ë³µì½”ë“œë¥¼ ì¤„ì´ëŠ”ê²Œ dddì˜ ëª©í‘œì´ë‹¤. ë‹¨! ì—”í‹°í‹° ë°–ì˜ ë©”ì†Œë“œ (ì˜ˆë¥¼ ë“¤ì–´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´) ê°€ ì—”í‹°í‹°ì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ì¼ì€ ì ˆëŒ€ ì—†ì–´ì•¼ í•œë‹¤. ì´ëŠ” ê°ì²´ì§€í–¥ì—ì„œ ì¶”êµ¬í•˜ëŠ” ìº¡ìŠí™”ì™€ ìœ ì‚¬í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.\nì—”í‹°í‹°ì˜ ì¼ì€ ì—”í‹°í‹° ì•ˆì—ì„œ ëì´ ë‚˜ì•¼ í•œë‹¤! validation ì¡°ì°¨ë„ UseCaseì—ì„œ í˜¸ì¶œí•˜ë©´ ì•ˆë˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì œì¼ ì˜ ì•„ëŠ” Entityì—ì„œ ê²€ì¦í•´ì•¼ í•œë‹¤.\n[Picture 5] Entity Anti Pattern MVC íŒ¨í„´ì—ì„œë„ DDDì—ì„œë„ ì„œë¹„ìŠ¤ì˜ ì—­í• ì„ ì •í•˜ëŠ” ê²Œ ê°€ì¥ ì–´ë µë‹¤. ì¡°ê¸ˆë§Œ ì˜ëª»í•´ë„ ì½”ë“œê°€ ì„œë¹„ìŠ¤ì— ì¹˜ì¤‘ì„ í•´ ê²°êµ­ ì„œë¹„ìŠ¤ì—ì„œ ì—”í‹°í‹°ì˜ ê°’ë„ ë°”ê¾¸ê³ , DBì— ì €ì¥ ìš”ì²­ë„ í•˜ëŠ” ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ ì¤‘ì‹¬ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. DDD ì—ì„œ ì„œë¹„ìŠ¤ (ë˜ëŠ” use case) ì˜ ì—­í• ì€ ì—¬ëŸ¬ê°€ì§€ ì—”í‹°í‹°ê°€ í•¨ê»˜ ë‹¤ë¤„ì ¸ì•¼ í•  ë•Œì´ë‹¤. (ì—¬ëŸ¬ê°€ì§€ ì—”í‹°í‹°ê°€ í•¨ê»˜ ë‹¤ë¤„ì§€ì§€ ì•Šì•„ë„ Controller ì˜ì—­ì—ì„œ ë°”ë¡œ ì—”í‹°í‹°ë¥¼ í˜¸ì¶œí•´ì„œëŠ” ì•ˆëœë‹¤)\nDAOì™€ DTO, ENTITY DAO DAOëŠ” Data Access Object ë¡œ, ë°ì´í„°ì— ì—‘ì„¸ìŠ¤í•˜ê¸° ìœ„í•œ ê°ì²´ë‹¤. ì •ë§ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¤ê¸° ìœ„í•´ ì ‘ê·¼ì„ í•˜ëŠ” ê°ì²´ë¼ ë‹¤ë¥¸ ë§ì„ í•  ê²ƒì´ ì—†ë‹¤. DAO ë³¼ë•Œë§ˆë‹¤ ë“œëŠ” ìƒê°ì´ ê·¸ëŸ¼ Repository ëŠ” ë­ì§€? ë‘˜ì˜ ì°¨ì´ëŠ” [Picture 6] ì™€ ê°™ë‹¤.\nDAO VS Repository ë ˆí¬ì§€í† ë¦¬ê°€ ë” ìƒìœ„ê³„ì¸µì´ê³  DAOê°€ í•˜ìœ„ê³„ì¸µì´ë‹¤.\në ˆí¬ì§€í† ë¦¬ëŠ” ë„ë©”ì¸ê³¼ ë°ì´í„° ë§¤í•‘ ë ˆì´ì–´ ê°€ìš´ë°ì— ìˆëŠ” ì¡´ì¬ì´ë‹¤. DAO ëŠ” ë§ ê·¸ëŒ€ë¡œ ëª»ìƒê¸´ ì¿¼ë¦¬ë¥¼ í•œ ë²ˆ ìˆ¨ê¸°ëŠ” ì—­í• ì„ í•˜ê³ , ë ˆí¬ì§€í† ë¦¬ëŠ” ì—¬ëŸ¬ê°€ì§€ DAOë¥¼ í™œìš©í•´ì„œ ë°ì´í„°ë¥¼ ìƒìœ„ ê³„ì¸µìœ¼ë¡œ ì „ë‹¬ì„ í•  ìˆ˜ ìˆë‹¤.\n[Picture 6] DAO and Entity DTO DTOëŠ” Data Transfer Objectë¡œ, ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ê³„ì¸µ ì‚¬ì´ë¡œ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°ì²´ë‹¤. ìŠ¤í”„ë§ê´€ì ìœ¼ë¡œ ìƒê°ì„ í•´ë³´ìë©´ DAOê°€ DBì—ì„œ ê°€ì ¸ì˜¨ ì •ë³´ë¥¼ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ë„˜ê¸¸ ë•Œ DTO ì— ë„£ì–´ì„œ ì „ì†¡ì„ í•˜ê³ , ì„œë¹„ìŠ¤ ê³„ì¸µì´ ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µìœ¼ë¡œ ë„˜ê¸¸ ë•Œ DTOë¥¼ ì‚¬ìš©í•œë‹¤ .\nEntity Entity ëŠ” DDDì˜ ê´€ì ì—ì„œ ë³´ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ê³ , JPAë¡œ ë³´ë©´ DBí…Œì´ë¸” ê·¸ ìì²´ì´ë‹¤. ì´ë ‡ê²Œ ì¤‘ìš”í•œ ë¶€ë¶„ ê·¸ ìì²´ì´ê¸° ë•Œë¬¸ì— ë³€ê²½ë„ ì—”í‹°í‹° ì•ˆì—ì„œ ì¼ì–´ë‚˜ì•¼ í•˜ê³ , ë‹¤ë¥¸ ê³„ì¸µìœ¼ë¡œ ë„˜ê¸¸ë•Œë„ ê·¸ëƒ¥ ë„˜ê²¨ì„œëŠ” ì ˆëŒ€ ì•ˆëœë‹¤. ê¼­ DTOì— ë‹´ì•„ì„œ ì „ë‹¬ì„ í•´ ì¤˜ì•¼ í•œë‹¤.\nRequest Method GET ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•œ ìš”ì²­ì´ë‹¤. ëª‡ë²ˆì„ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­í•´ë„ ë°›ì•„ë³´ëŠ” ë°ì´í„°ì— ë³€í™”ê°€ ì—†ë‹¤ëŠ” ê²Œ ì¤‘ìš”í•œ ì ì´ë‹¤. ì´ëŸ° GETì˜ ì„±ê²© ë•Œë¬¸ì— ë¬´ì—‡ì¸ê°€ë¥¼ ë°”ê¾¸ë ¤ëŠ” ì‘ì—…ì„ GETìœ¼ë¡œ ë§Œë“¤ì§€ ë§ì•„ì•¼ í•œë‹¤. POST POSTëŠ” ë¬´ì—‡ì¸ê°€ë¥¼ ë°”ê¾¸ê¸° (update/insert/delete) ìœ„í•œ ìš”ì²­ì´ë‹¤. ê°™ì€ ìš”ì²­ì„ ì—¬ëŸ¬ë²ˆ ë‚ ë¦¬ë‹¤ë³´ë©´ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. GET VS POST POSTê°€ GETë³´ë‹¤ ë³´ì•ˆìƒ ì•ˆì „í•˜ë‹¤. GETì€ URLì•ˆì— ëª¨ë“  ì •ë³´ë¥¼ ë‹¤ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì›¹ì„œë²„ ë“±ì§€ì—ì„œ ì—‘ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ê²½ìš° GETì— ìˆë˜ ì •ë³´ë“¤ì´ ê·¸ëŒ€ë¡œ ë‚¨ê²Œ ëœë‹¤. í•˜ì§€ë§Œ POST ë˜í•œ ë°ì´í„°ë¥¼ URLì— ë„£ì§€ ì•Šê³  bodyì— ë„£ì—ˆë‹¨ ì°¨ì´ë§Œ ìˆì„ ë¿ì´ê³ , ì´ bodyë„ ê¹Œì„œ ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§ˆëƒ¥ ì•ˆì „í•˜ë‹¤ê³  ë³¼ ìˆ˜ ì—†ë‹¤. ë¯¼ê°í•œ ë°ì´í„°ëŠ” ì–´ì§€ê°„í•˜ë©´ ë„¤íŠ¸ì›Œí¬ë¥¼ íƒ€ê³  ì›€ì§ì´ì§€ ì•ŠëŠ” ê²ƒì´ ì œì¼ ì¢‹ë‹¤. ë©±ë“±ì„± ì´ë ‡ê²Œ GETì²˜ëŸ¼ ë˜‘ê°™ì€ ìš”ì²­(ì—°ì‚°)ì„ ì—¬ëŸ¬ë²ˆ í•˜ë”ë¼ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” ì„±ì§ˆì„ ë©±ë“±ì„±(Idempotent)ë¼ê³  í•œë‹¤. Rest apiì—ì„œ ì œì¼ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë“¤ ì¤‘ì—ì„œ POSTë¥¼ ì œì™¸í•œ GET, PUT, DELETEì€ ë©±ë“±ì„±ì„ ì§€ì¼œì•¼ í•¨ì„ ëª…ì‹¬í•˜ë©´ì„œ ì„œë²„ êµ¬í˜„ì„ í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.\n[Picture 7] HTTP Method POST VS PUT ì²˜ìŒì— HTTP ë©”ì„œë“œë“¤ì„ ë°°ì› ì„ ë•Œ POSTì™€ PUT êµ¬ë¶„ì´ ì–´ë ¤ì› ë‹¤. ê²°êµ­ POSTë‚˜ PUT ë‘˜ ë‹¤ CREATEì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—. ê·¸ëŸ°ë° ì°¾ì•„ë³´ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ì‚¬í•­ìœ¼ë¡œ êµ¬ë¶„ì„ í•  ìˆ˜ ìˆì—ˆê³ , ë‹¤ì‹œ ê³ ë ¤í•´ë³´ë©´ PUTì€ CREATE ë³´ë‹¤ëŠ” UPDATEì— ë” ì í•©í•´ ë³´ì¸ë‹¤.\nì‹œë‚˜ë¦¬ì˜¤ 1: ë©±ë“±ì„±ì„ ìœ ì§€í•´ì•¼ í•˜ëŠ”ê°€?\nPOST = (a++) â‡’ ê³„ì† 1ì´ ì¦ê°€í•˜ì—¬ ê²°ê³¼ ê°’ì´ ë§¤ë²ˆ ë‹¬ë¼ì§„ë‹¤. PUT = (a=4) â‡’ ê³„ì† aëŠ” 4ë¡œ ì—…ë°ì´íŠ¸ ë˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ê°’ì´ ë§¤ë²ˆ ê°™ë‹¤. ì‹œë‚˜ë¦¬ì˜¤ 2: ë¦¬ì†ŒìŠ¤ ê²°ì •ê¶Œì´ ìˆëŠ”ê°€?\në¦¬ì†ŒìŠ¤ ê²°ì •ê¶Œì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì´ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ (ë¦¬ì†ŒìŠ¤ id)ë¥¼ ì •í™•íˆ ì•„ëŠ”ì§€ ëª¨ë¥´ëŠ”ì§€ì˜ ì°¨ì´ë‹¤.\nPOST /articles PUT /articles/11120 PUT í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ì†ŒìŠ¤ê°€ ì–´ë””ì— ì €ì¥ì´ë˜ëŠ”ì§€ ì •í™•íˆ ì•Œ ìˆ˜ ìˆë‹¤. ë‚´ê°€ ë§ì´ ì“°ë˜ POSTì˜ path variable ì´ ë“¤ì–´ê°„ URLì´ ì‚¬ì‹¤ì€ PUTì— ë§ëŠ” ì»¨ë²¤ì…˜ì´ì—ˆë‹¤. POST POSTëŠ” í•´ë‹¹ URLì„ ìš”ì²­í•˜ê¸°ë§Œ í•˜ë©´ ì›í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“¤ì–´ì£¼ê² ë‹¤ë©° factoryë§Œ ì œê³µí•´ì£¼ê³  ë¦¬ì†ŒìŠ¤ì˜ ì •í™•í•œ ìœ„ì¹˜ëŠ” ì œê³µí•˜ì§€ ì•Šê³  ìˆë‹¤. PUT VS PATCH ë‘˜ ë‹¤ ë¦¬ì†ŒìŠ¤ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤ëŠ” ëŠë‚Œì´ ê°•í•˜ì§€ë§Œ ì‘ì€ ì°¨ì´ê°€ ìˆë‹¤.\nPUTì€ ë¦¬ì†ŒìŠ¤ ì „ì²´ ë˜ëŠ” ë‹¤ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ëŠë‚Œì´ ê°•í•˜ë‹¤. PATCHëŠ” ë¦¬ì†ŒìŠ¤ì˜ ì¼ë¶€ ë˜ëŠ” ë‹¨ í•˜ë‚˜ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ëŠë‚Œì´ ê°•í•˜ë‹¤. Cross Origin Resource Sharing CORSì˜ ì •í™•í•œ ê°œë… ì¤„ì—¬ì„œ CORSë¼ê³  í•œë‹¤. ìœ„í‚¤ì‚¬ì „ì—ì„œ ì°¾ì•„ë´¤ì„ ë•Œ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¼ê³  ì§ì—­ì„ í•˜ê³  ìˆë‹¤.\nì›ë˜ ë‚´ê°€ ì•Œê³  ìˆë˜ ë¶€ë¶„ì€ ê°™ì€ ì¶œì²˜ê°€ ì•„ë‹Œ, ë‹¤ë¥¸ ì¶œì²˜ì—ì„œ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ í–ˆì„ ë•Œ ë³´ì•ˆìƒ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ê³  errorë¥¼ ë³´ë‚¸ë‹¤ ì˜€ë‹¤. ê·¸ë˜ì„œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì •ì±…ì´ CORSì´ê³ . ê·¸ëŸ°ë° ë‚´ê°€ ì‹¬ê°í•˜ê²Œ ì˜¤í•´í•˜ê³  ìˆë˜ ë¶€ë¶„ì€, ì—¬ê¸°ì„œì˜ Originì´ ì„œë²„ë¥¼ ì˜ë¯¸í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ìš”ì²­ì„ ë³´ë‚¸ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì˜ë¯¸í•˜ëŠ” ê²ƒ ì´ì—ˆë‹¤.\në¸Œë¼ìš°ì €ì— ì¹˜ì¤‘ë˜ì–´ ìˆëŠ” CORS RFCì— ì¡´ì¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì •ì±…ì€ 2ê°€ì§€ ì´ë‹¤. í•˜ë‚˜ëŠ” SOP (Same-Origin Policy) ì´ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” CORSì´ë‹¤. í•˜ì§€ë§Œ ì´ ì •ì±…ë“¤ì€ ë¸Œë¼ìš°ì €ì—ë¯¼ êµ¬í˜„ë˜ì–´ìˆëŠ” ìŠ¤í™ì´ë‹¤.\nì„œë²„ì™€ ì„œë²„ê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì£¼ê³  ë°›ì„ ë•ŒëŠ” CORS ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì„œë²„ì—ì„œ ì‘ë‹µì„ ì£¼ë”ë¼ë„ ë¸Œë¼ìš°ì € ë‹¨ì—ì„œ ì‘ë‹µì„ ë§‰ê³  errorë¥¼ ë‚´ë ¤ì¤€ë‹¤. ë•Œë¬¸ì— ì„œë²„ ë¡œê·¸ì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì´ ë‚´ë ¤ê°”ë‹¤ê³  ë³´ì´ë©° ë””ë²„ê¹…ì´ ìƒë‹¹íˆ ì–´ë ¤ì›Œì§„ë‹¤. ë•Œë¬¸ì— ì„œë²„ì—ì„œë„ CORSì˜ ì¡´ì¬ì— ëŒ€í•´ ì—¼ë‘í•´ ë‘ê³  ìˆì–´ì•¼ í•œë‹¤!\n[Picture 8] CORS [Picture 8] ì˜ ì„¤ëª…ì´ ì œì¼ ëª…í™•í–ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” ìŠ¤í¬ë¦½íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì§€ê¸ˆ ìŠ¤í¬ë¦½íŠ¸ê°€ ì„œë¹„ìŠ¤ ë˜ê³  ìˆëŠ” urlê³¼ ìš”ì²­ì„ ë³´ë‚´ëŠ” urlì„ ë¹„êµí•œë‹¤. ì—¬ê¸°ì„œ ë™ì¼í•œ urlë¡œ ë³´ì—¬ì§€ëŠ” ì¡°ê±´ì€ í”„ë¡œí† ì½œ/ìŠ¤í‚¤ë§ˆ (https, http) ì™€ í˜¸ìŠ¤íŠ¸ (www.google.com) í¬íŠ¸ë²ˆí˜¸ê°€ ëª¨ë‘ ê°™ì„ ë•Œ ë™ì¼í•œ urlë¡œ ì¸ì •í•œë‹¤.\nCORS ë°œìƒ ì‹œë‚˜ë¦¬ì˜¤ Preflight Simple Request Credentialed Request ì–´ë–»ê²Œ, ì–´ë–¤ ì¡°ê±´ì—ì„œ í—¤ë”ë¥¼ ì±„ì›Œì„œ ë³´ë‚´ëŠ”ì§€ì— ë”°ë¼ ë¸Œë¼ìš°ì €ê°€ ì„ì˜ë¡œ í•˜ë‚˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë³´ë‚´ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì–´ë–¤ ì¡°ê±´ì†ì—ì„œ ì–´ë–¤ CORS ì‹œë‚˜ë¦¬ì˜¤ê°€ ë§Œë“¤ì–´ì§€ëŠ”ì§€ ì˜ ìœ ë…í•˜ì.\nCORS í•´ê²° ë°©ë²• í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì´ì§€ë§Œ ì´ê±¸ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì„œë²„ê°€ ì‘ì—…ì„ í•´ì•¼ í•œë‹¤. í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ì–´ë–¤ originë“¤ì´ ìš”ì²­ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ì‘ë‹µ í—¤ë”ì¤‘ í•˜ë‚˜ì¸ Access-Control-Allow-Originì— ê¸°ì…ì„ í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì— ì™€ì¼ë“œ ì¹´ë“œë¥¼ ë„£ì–´ë²„ë¦´ ìˆ˜ ìˆì§€ë§Œ ì´ëŸ¼ ì–¸ì œë‚˜ ë³´ì•ˆ ë¬¸ì œê°€ ì¼ì–´ë‚  ìˆ˜ ìˆìŒì„ ëª…ì‹¬í•˜ì. Access-Control-Allow-Originì— ë“¤ì–´ìˆëŠ” Originë“¤ê³¼ ìš”ì²­ì„ ë³´ëƒˆë˜ í´ë¼ì´ì–¸íŠ¸ì˜ Originì„ ë³´ê³  ë¸Œë¼ìš°ì €ê°€ ìœ íš¨í•œ ì‘ë‹µì„ì„ íŒë‹¨í•œë‹¤.\nOptions Method Options ë©”ì†Œë“œê°€ ì–¸ì œ ì“°ì´ëŠ”ì§€ ê¶ê¸ˆí–ˆì—ˆëŠ”ë° ì´ë ‡ê²Œ Access-Control-Allow-Origin ì„ ì•Œê¸° ìœ„í•´ ì„ í–‰ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë„ ì‚¬ìš©ì´ ëœë‹¤ê³  í•œë‹¤.\n[Picture 9] Options Method ì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [Cross Origin Resource Sharing - CORS] [CORSëŠ” ì™œ ì´ë ‡ê²Œ ìš°ë¦¬ë¥¼ í˜ë“¤ê²Œ í•˜ëŠ”ê±¸ê¹Œ?] Authentication ê³¼ Authorizationì˜ ì°¨ì´ Oauth2ì— ëŒ€í•´ ëŒ€ë‹µì„ í•˜ë‹¤ê°€ ë‚˜ì˜¨ ë¬¸ì œì˜€ë‹¤. ë‘˜ì´ ì–´ë–¤ ê°œë…ì¸ì§€ëŠ” ì•Œì§€ë§Œ ìš©ì–´ì ìœ¼ë¡œ ë‚¯ì„¤ì–´ ì œëŒ€ë¡œ ëŒ€ë‹µì„ í•˜ì§€ ëª» í•´ ì´ë²ˆì— ì •ë¦¬ë¥¼ í•˜ë©´ì„œ ì°¾ì•„ë´¤ë‹¤. Authenticationê³¼ Authorizationì„ ì‰½ê²Œ ë¹„êµí•˜ê¸° ìœ„í•´ í‘œë¥¼ ì‘ì„±í–ˆë‹¤.\n/ Authentication Authorization ì—­í•  ì‚¬ìš©ì ì‹ ì› í™•ì¸ ë¦¬ì†ŒìŠ¤, ê¸°ëŠ¥ ì— ëŒ€í•œ ì—‘ì„¸ìŠ¤ ê¶Œí•œ í™•ì¸ ëª©ì  ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€ í™•ì¸/íŒë³„ ì‚¬ìš©ìê°€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤/ê¸°ëŠ¥ì— ëŒ€í•´ ì‚¬ìš© ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸/íŒë³„ ë°©ë²• ë¡œê·¸ì¸, ìƒì²´ì¸ì‹ session key, JWT, Oauth ì ˆì°¨ëŠ” Authentication â¡ï¸ Authorization ì´ ì´ë£¨ì–´ì§„ë‹¤ê³  ë³´ë©´ ëœë‹¤.\nAuthenticationì´ ë˜ì—ˆë‹¤ê³  í•´ë„ ë³´ë‚´ëŠ” ë¦¬í€˜ìŠ¤íŠ¸ë§ˆë‹¤ ì´ ì‚¬ìš©ìê°€ ì •ë§ë¡œ ìê²©ì´ ìˆëŠ”ì§€ ë§¤ë²ˆ í™•ì¸ì„ í•˜ëŠ” ì ˆì°¨ê°€ Authenticationì´ë¼ê³  ìƒê°í•œë‹¤.\nìŠ¤í‚¤ë§ˆë¥¼ ì§¤ ë•Œ í•˜ëŠ” ê³ ë¯¼ ì´ê±´ ì •ë§ ê´‘ë²”ìœ„í•œ ë²”ìœ„ê°€ ì•„ë‹ê¹Œ? ì•„ì§ë„ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ì§œëŠ” ê²Œ ìµœì ì¸ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. ì •ë§ ì„œë¹„ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ê²ƒ ê°™ë‹¤. ë‚´ê°€ ìŠ¤í‚¤ë§ˆë¥¼ ì§œë©´ì„œ í™•ì‹¤í•˜ê²Œ ëŠê¼ˆë˜ ë¶€ë¶„ ì •ë„ë§Œ ì •ë¦¬ë¥¼ í–ˆë‹¤.\në†’ì€ ìˆ˜ì¤€ì˜ ì •ê·œí™”ë¥¼ í–ˆì„ ë•ŒëŠ” ì¡°íšŒë¥¼ í•  ë•Œ JOINì„ ë§ì´ í•´ì¤˜ì•¼ í•˜ì§€ë§Œ ë°ì´í„° ìˆ˜ì •ê³¼ ì‚­ì œê°€ ìš©ì´í•˜ë‹¤. ë‚®ì€ ìˆ˜ì¤€ì˜ ì •ê·œí™”ë¥¼ í–ˆì„ ë•ŒëŠ” ì¡°íšŒí•  ë•Œ JOINì„ ë§ì´ ì•ˆ í•´ì¤˜ë„ ëœë‹¤. ê·¸ëŸ¬ë‚˜ ì¤‘ë³µëœ ë°ì´í„°ê°€ ë§ì•„ì§„ë‹¤. ì˜›ë‚ ì—ëŠ” í•˜ë“œê°€ ë¹„ì‹¸ì„œ ì •ê·œí™”ì— ì‹ ê²½ì„ ë§ì´ ì¼ëŠ”ë° ìš”ì¦˜ì€ í•˜ë“œê°€ ë¹„ì‹¸ì§€ ì•Šì•„ ì •ê·œí™”ë¥¼ ë§ì´ í•  í•„ìš”ê°€ ì—†ë‹¤ê³  í•œë‹¤. íˆìŠ¤í† ë¦¬ ì²˜ëŸ¼ ì•„ë˜ë¡œ ìŒ“ì´ëŠ” ë°ì´í„°ì˜ ê²½ìš° ë†’ì€ ìˆ˜ì¤€ì˜ ì •ê·œí™”ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. UPDATEê°€ ìì£¼ ì¼ì–´ë‚˜ëŠ” ë°ì´í„°ì¸ì§€ INSERTê°€ ë§ì´ ì¼ì–´ë‚˜ëŠ” ë°ì´í„°ì¸ì§€ì— ë”°ë¼ì„œ ìŠ¤í‚¤ë§ˆê°€ ë‹¬ë¼ì§ˆ í•„ìš”ê°€ ìˆë‹¤. ê³ ìˆ˜ì¤€ ì¸í„°í˜ì´ìŠ¤ì™€ ì €ìˆ˜ì¤€ ì¸í„°í˜ì´ìŠ¤ ê³ ìˆ˜ì¤€ ì¸í„°í˜ì´ìŠ¤ì™€ ì €ìˆ˜ì¤€ ì¸í„°í˜ì´ìŠ¤ë¼ëŠ” ë‹¨ì–´ë³´ë‹¤ëŠ” ê³ ìˆ˜ì¤€ ëª¨ë“ˆ, ì €ìˆ˜ì¤€ ëª¨ë“ˆ ì´ë¼ëŠ” ë§ì„ ë” ë§ì´ ì‚¬ìš©í•œë‹¤.\nê³ ìˆ˜ì¤€ ëª¨ë“ˆ ì¶”ìƒí™”ê°€ ë˜ì–´ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. 1 2 3 public interface Animal { void eat(); } ì €ìˆ˜ì¤€ ëª¨ë“ˆ ê³ ìˆ˜ì¤€ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‹¤ì œë¡œ êµ¬í˜„í•œë‹¤. 1 2 3 4 5 6 public People implements Animal { @Override void eat() { Systems.out.println(\u0026#34;People eat many things\u0026#34;); } ì—¬íƒœ ê³ ìˆ˜ì¤€ê³¼ ì €ìˆ˜ì¤€ì„ ë°˜ëŒ€ë¡œ ìƒê°í•˜ê³  ìˆì—ˆë‹¤. ê³ ìˆ˜ì¤€ì´ ì‹¤ì œë¡œ êµ¬í˜„ì´ ëœ ë¶€ë¶„ì´ê³  ì €ìˆ˜ì¤€ì´ ì¶”ìƒí™”ì˜ ë¶€ë¶„ì¸ì¤„ ì•Œì•˜ìœ¼ë‚˜ ì‹¤ì œëŠ” ë°˜ëŒ€ì˜€ë‹¤.\n","date":"2022-01-01","permalink":"https://leeleelee3264.github.io/post/2022-01-01-interview-python/","tags":["General"],"title":"2021 ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ ì¸í„°ë·° - Python, General"},{"content":"\n2021 ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ ì¸í„°ë·°ì˜ ë©´ì ‘ì§ˆë¬¸ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.\nIndex\nIntro ê¸°ìˆ ë©´ì ‘ íšŒê³  Java Intro 10ì›” ë‹¬ ë¶€í„° ì´ì§ì„ ì¤€ë¹„í•˜ê¸° ì‹œì‘í•˜ë©° Resume ì™€ Cover Letter ë¥¼ ì¼ê³ , 11ì›” ë‹¬ì—ëŠ” ë©´ì ‘ì„ ë³´ëŸ¬ ë‹¤ë…”ë‹¤. ëŒ€ë¶€ë¶„ì˜ ë©´ì ‘ë“¤ì´ ëª‡ ë‹¨ê³„ë¡œ ì´ë£¨ì–´ì ¸ìˆì—ˆëŠ”ë° ê¸°ìˆ  ë©´ì ‘ì—ì„œ ë©´ì ‘ê´€ë“¤ì´ ë¬¼ì–´ë´¤ë˜ ì§ˆë¬¸ë“¤ì„ ê¸°ë¡í•´ë‘ê³  ê³µìœ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ í¬ìŠ¤íŒ…ì„ í•˜ê¸°ë¡œ í–ˆë‹¤.\nì§€ì›ë¶„ì•¼ê°€ Backendì´ê¸° ë•Œë¬¸ì— ëŒ€ë¶€ë¶„ì˜ ì§ˆë¬¸ë“¤ì´ Backend ì™€ ê´€ë ¨ì´ ë˜ì–´ìˆì§€ë§Œ, ì§ì „ì— ê·¼ë¬´í•˜ê³  ìˆë˜ íšŒì‚¬ì—ì„œ DevOpsì˜ ê²½í—˜ë„ ìˆë‹¤ê³  ì´ë ¥ì„œì— ì ì–´ì„œ DevOpsì™€ ê´€ë ¨ëœ ì§ˆë¬¸ë“¤ë„ ì•½ê°„ ìˆì—ˆë‹¤. ê¹ƒí—ˆë¸Œì— [DevOps ì»¤ë¦¬í˜ëŸ¼]ì´ ìˆëŠ”ë° ë©´ì ‘ ë•Œ ë³´ê³  ê°€ë©´ ë„ì›€ì´ ë  ê±° ê°™ë‹¤.\nê¸°ìˆ ë©´ì ‘ íšŒê³  ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘í•˜ê³  ì´ë ‡ë‹¤ í•  ë©´ì ‘ë“¤ì„ ë³´ëŸ¬ ë‹¤ë‹Œì ì´ ì—†ì—ˆëŠ”ë° ê¸°ìˆ ë©´ì ‘ì„ ë³´ê³  ë‚˜ë‹ˆ ì™œ ê¸°ìˆ  ê³µë¶€ë¥¼ ë” ì—´ì‹¬íˆ í•´ì•¼ í•˜ëŠ”ì§€ ê¹¨ë‹¬ì•˜ë‹¤. ì´ë¡ ì ì¸ ì¸¡ë©´ë“¤ì€ ì§€ë£¨í•´ì„œ ê³µë¶€ë¥¼ í”¼í•˜ê¸° ë§ˆë ¨ì´ì—ˆëŠ”ë° ê¸°ìˆ ë©´ì ‘ì—ì„œ ë‹¤ ë¬¼ì–´ë³´ëŠ” ê²ƒë“¤ì´ì—ˆê³ , ê²°êµ­ì€ ì´ ì´ë¡ ì ì¸ ì¸¡ë©´ë“¤ì„ ì˜ ì•Œì•„ì•¼ì§€ë§Œ ë” ì¢‹ì€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\nê¹Šì´ëŠ” ì—†ëŠ” ìƒˆë¡œìš´ ê¸°ìˆ ì— ëŒ€í•œ ìš•ì‹¬ íŒŒì´ì¬ì„ ê·¸ëƒ¥ ì¨ë³´ê¸°ë§Œ í–ˆê³  ê¹Šì´ê°€ ì—†ì—ˆë‹¤. ë‹¤ë¥¸ ê°œë…ë“¤ë„ ë§ˆì°¬ê°€ì§€ì˜€ë‹¤. ë§‰ ì»¤ë¦¬ì–´ë¥¼ ì‹œì‘í–ˆì„ ë•ŒëŠ” ì´ê²ƒì €ê²ƒ ì¡°ê¸ˆì”© ê³µë¶€í•˜ëŠ” ê²Œ ì¢‹ì•˜ëŠ”ë° ì´ì œëŠ” ê¹Šì´ê°€ ìˆëŠ” ê³µë¶€ë¥¼ í•´ì•¼í•˜ëŠ” ë•Œê°€ ì•„ë‹Œê°€ ì‹¶ë‹¤.\ní‡´ì‚¬ë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ì´ê²ƒì €ê²ƒ ë§ì´ ì—¬ì­¤ë´¤ë˜ íŒ€ì¥ë‹˜ê»˜ ì¸ì‚¬ë¥¼ ë“œë ¸ëŠ”ë° ê¸°ìˆ ì— ëŒ€í•œ ìš•ì‹¬ì„ ì¡°ê¸ˆ ë²„ë¦¬ëŠ” ê²Œ ì¢‹ë‹¤ê³  ì¡°ì–¸í•´ì£¼ì…¨ë‹¤. ê·¸ë„ ê·¸ëŸ´ê²Œ 2ë…„ ë™ì•ˆ ì •ë§ ì‹ ê¸°ìˆ ì— ì§‘ì°©ì„ ë§ì´ í–ˆë˜ ê²ƒ ê°™ë‹¤\u0026hellip; ê·¸ ë¶„ì´ í•­ìƒ í•´ì£¼ì‹œë˜ ë§ì”€ì´ í”„ë ˆì„ì›Œí¬ë¥¼ ê³µë¶€í•˜ê¸°ë³´ë‹¤ëŠ” ì–¸ì–´ë¥¼ ë” ê³µë¶€í•˜ë¼ ì˜€ëŠ”ë° ê²°êµ­ ê¸°ë³¸ê¸°ê°€ ì œì¼ ì¤‘ìš”í•œ ê²Œ ì•„ë‹ê¹Œ? ë””ìì¸ íŒ¨í„´ê³¼ ì •ê·œì‹ì€ ì–´ë””ì—ì„œë„ ì“°ì´ëŠ” ê²ƒì²˜ëŸ¼.\në¹¨ë¦¬ ì‚¬ë‘” ë””ìì¸ íŒ¨í„´ ì±…ë„ ì½ê³  ì´íŒ©í‹°ë¸Œ ìë°”ë„ ë‹¤ì‹œ ì½ì–´ë´ì•¼ê² ë‹¤. ìë°” ë¹¨ë¦¬ë¹¨ë¦¬ ê³µë¶€í•˜ê³  íŒŒì´ì¬ìœ¼ë¡œ ì§„ì§œ ë„˜ì–´ê°€ì•¼ì§€!\në©´ì ‘ ì§ˆë¬¸ ì¶”ì´ ì´ë ¥ì„œì— ì£¼ë¡œ ì‚¬ìš©í•˜ë˜ ì–¸ì–´ê°€ ìë°”ë¼ê³  ì¼ê¸° ë•Œë¬¸ì— ìë°” ì§ˆë¬¸ì´ ë“¤ì–´ì™”ê³  ë©´ì ‘ì„ ë³¸ íšŒì‚¬ë“¤ì€ ëŒ€ë¶€ë¶„ íŒŒì´ì¬ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— íŒŒì´ì¬ ì§ˆë¬¸ë„ ë§ì•˜ë‹¤. ì§ˆë¬¸ì˜ êµ¬ì„±ì€ í¬ê²Œ ì•„ë˜ì™€ ê°™ì•˜ë‹¤.\nìë°” ì§ˆë¬¸ íŒŒì´ì¬ ì§ˆë¬¸ ê°œë°œ ì „ë°˜ ìƒì‹ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ìë°” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ë‹¤ë£¬ë‹¤.\nJava ì‹¤í–‰ì¤‘ì¸ Spring Bootì—ì„œ ë³€ê²½ëœ properties ë¡œë“œí•˜ê¸° ë§¨ ì²˜ìŒì—ëŠ” Spring bootì—ì„œ properties ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì§ˆë¬¸ì¸ ì¤„ ì•Œê³  Spring boot externalized properties ìš°ì„ ìˆœìœ„ì— ëŒ€í•´ ë‹µë³€í–ˆëŠ”ë° ì•„ë‹ˆì—ˆë‹¤. ì´ë¯¸ ëŸ¬ë‹ì¤‘ì¸ ì„œë²„ì— ìˆ˜ì •ëœ propretiesë¥¼ ì¬ì‹œì‘ì—†ì´ ì–´ë–»ê²Œ ë°˜ì˜í•˜ëƒì— ëŒ€í•œ ì§ˆë¬¸ì´ì—ˆë‹¤.\nSpring Boot Actuator Spring Boot Actuator ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤. ì´ë ‡ê²Œ config ë¥¼ ëŸ¬ë‹ íƒ€ì„ì— ì—…ë°ì´íŠ¸ í•˜ëŠ” ìƒí™©ì€ ì„œë²„ê°€ í•˜ë‚˜ ë– ìˆì„ ë•Œ ë³´ë‹¤ëŠ” ì„œë²„ë¥¼ ì—¬ëŸ¬ ê°œ ë„ì›Œë‘ëŠ” Spring Cloud í™˜ê²½ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.\n[Picture 1] Spring Cloud Config Spring Cloud ConfigëŠ” Spring Cloud Config ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ ([Picture 1] ì—ì„œ Microservice #1 #2 #3 ë¡œ í‘œê¸°ëœ ì„œë²„ë“¤) ë¡œ êµ¬ì„±ì´ ë˜ì–´ìˆëŠ”ë° config ì„œë²„ ì„¤ì •ì— ë³€ê²½ì´ ìƒê²¼ì„ ë•Œ í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ë„ ë³€ê²½ì„ ë°˜ì˜í•´ì¤˜ì•¼ í•œë‹¤. ì´ë•Œ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³  actuator ë¥¼ ì´ìš©í•´ì„œ refresh í•˜ë©´ ëœë‹¤.\nì—¬ê¸°ì„œ actuator ëŠ” ì‹¤í–‰ì¤‘ì¸ ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ ì •ë³´ë¥¼ REST ì—”ë“œí¬ì¸íŠ¸ì™€ JMX MBeans(Java Management Extension. ëª¨ë‹ˆí„°ë§ìš© ê°ì²´) ë¡œ ë…¸ì¶œì‹œí‚¤ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ í™•ì¥ëª¨ë“ˆì´ë‹¤. ì‹¤í–‰ì¤‘ì¸ ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ëœ¯ì–´ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê²Œ ì¤‘ìš”í•˜ë‹¤!\nSpring Boot Actuator ì‚¬ìš©ë²• í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— actuator ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ implement í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ application.propertiesë˜ëŠ” application.yml ì— actuator ì‚¬ìš©ì„ ìœ„í•œ ì„¤ì •ì„ ì¶”ê°€ í•œë‹¤. Config ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ ë¶€ë¶„ì— @RefreshScope ì¶”ê°€ í•œë‹¤. http://í´ë¼ì´ì–¸íŠ¸ì„œë²„/actuator/refresh POST í˜¸ì¶œë¡œ ë³€ê²½ì‚¬í•­ ì ìš©í•œë‹¤. ì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [Spring cloud config ë¦¬í”„ë˜ì‹œ í•˜ê¸° (Use RefreshScope)] [Spring Cloud Config 2] JDBC Java Database Connectivityì˜ ì•½ìì´ë‹¤.\në°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” ìë°” APIë¡œ, ì¿¼ë¦¬ì™€ ì»¤ë§¨ë“œë¥¼ ë°œí–‰í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê±´ë‚´ì£¼ëŠ” ê²°ê³¼ ì…‹ì„ ì²˜ë¦¬í•œë‹¤. JDBCëŠ” ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” RDBMSì™€ ì†Œí†µí•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë˜ë° ë ˆë²¨ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤.\n[Picture 2] JDBC ìƒì„¸ JDBCëŠ” ê²°ê³¼ì ìœ¼ë¡œ ìë°” ì½”ë“œë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì¤€ë‹¤.\nJDBC APIëŠ” ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ JDBC Manager ì‚¬ì´ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì§€ì›í•œë‹¤. JDBC DriverëŠ” ë°ì´í„°ë² ì´ìŠ¤ì™€ JDBC Manager ì‚¬ì´ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì§€ì›í•œë‹¤. ì§ë ¬í™” ì§ë ¬í™”ëŠ” ê°ì²´ë¥¼ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤. ì´ì™€ ë°˜ëŒ€ë¡œ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ê°ì²´ë¡œ ë°”ê¾¸ëŠ” ê²ƒì€ ì—­ì§ë ¬í™”ë¼ê³  í•œë‹¤.\nê°ì²´ëŠ” í”Œë«í¼ì—ì„œ ë…ë¦½ì ì´ì§€ ëª»í•˜ë‹¤. ê·¸ë˜ì„œ [Picture 3] ì²˜ëŸ¼ íŒŒì¼, ë©”ëª¨ë¦¬, ë°ì´í„°ë² ì´ìŠ¤ ì²˜ëŸ¼ ë‹¤ë¥¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë³´ë‚´ë ¤ê³  í•  ë•Œ í”Œë«í¼ì—ì„œ ë…ë¦½ì ì¸ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜ì„ í•œë‹¤.\n[Picture 3] ì§ë ¬í™”ë€? ìë°” ì§ë ¬í™” ìë°” ì§ë ¬í™”ë„ ë§ˆì°¬ê°€ì§€ë¡œ JVM ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ìˆëŠ” ê°ì²´ë¥¼ byte ìŠ¤íŠ¸ë¦¼ (byte í˜•íƒœì˜ ë°ì´í„°) ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤.\n[Picture 4] ìë°” ì§ë ¬í™” ìƒì„¸ ê·¸ëŸ°ë° ìš”ì¦˜ì˜ APIë“¤ì„ ìƒê°í•´ë³´ë©´ ë°ì´í„°ë¥¼ ë‹¤ JSONìœ¼ë¡œ ì§ë ¬í™” í•´ì„œ ë‚´ë³´ë‚´ê³  ìˆë‹¤. JSON ì²˜ëŸ¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” í˜•íƒœê°€ ì•„ë‹ˆë¼ ì´ì§„ í‘œí˜„ìœ¼ë¡œ ë³€í™˜í•´ì„œ ë‚´ë³´ë‚¼ë•ŒëŠ” Protocol Bufferë¥¼ ì‚¬ìš©í•œë‹¤ê³  í•œë‹¤. ê·¸ëŸ¼ ì†ì‰¬ìš´ JSONê³¼ Protocol Bufferê°€ ì•„ë‹ˆë¼ ë²ˆê±°ë¡œìš´ ìë°” ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•  ë•Œì˜ ì¥ì ì€ ë¬´ì—‡ì¼ê¹Œ?\nìë°” ì§ë ¬í™” ì¥ì  ìë°” ì§ë ¬í™”ì˜ ì¥ì ì€ ìë°”ì— ìµœì í™” ë˜ì—ˆë‹¤ëŠ” ì ì´ë‹¤. ìë°” ì‹œìŠ¤í…œì—ì„œ ë˜ ë‹¤ë¥¸ ìë°” ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ì†ì‰½ê²Œ ì§ë ¬í™”-ì—­ì§ë ¬í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤. ì„œë¸”ë¦¿ ì„¸ì…˜ì´ ëŒ€í‘œì ì¸ ì‚¬ìš©ì²˜ë¼ê³  í•˜ëŠ”ë° í™ˆí˜ì´ì§€ë¥¼ ë§Œë“¤ë•Œë„ ìœ ì €ì˜ ë¡œê·¸ì¸ ì„¸ì…˜ì„ ì§ë ¬í™”í•´ì„œ ê´€ë¦¬í–ˆë˜ ê²Œ ìƒê°ì´ ë‚œë‹¤.\nìë°” ì§ë ¬í™” ë¬¸ì œì  ì™¸ë¶€ì— ë‚˜ê°€ì„œ ì¥ê¸° ë³´ê´€ë  ì •ë³´ëŠ” ìë°” ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¶”í›„ì— ë³€ê²½ì´ ìˆìœ¼ë©´ ì˜¤ë¥˜ê°€ ë‚˜ê¸° ë•Œë¬¸ì´ë‹¤. ìë°” ì§ë ¬í™”ì— ì‚¬ìš©í•˜ëŠ” ì‹œë¦¬ì–¼ IDë„ ê°œë°œì‹œì— ë”°ë¡œ ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤. ì§ë ¬í™”-ì—­ì§ë ¬í™”ë¥¼ í•  ë•Œ íƒ€ì…ê³¼ í•„ë“œì˜ ë³€ê²½ì— ì—„ê²©í•´ ì˜¤ë¥˜ê°€ ì˜ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë•Œë¬¸ì— ìì£¼ ë³€ê²½ë˜ëŠ” í´ë˜ìŠ¤ëŠ” ìë°” ì§ë ¬í™”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤. ìë°” ì§ë ¬í™”ëœ ë°ì´í„°ëŠ” JSON ë³´ë‹¤ í›¨ì”¬ í¬ê¸°ê°€ í¬ë‹¤. ë–„ë¬¸ì— ì§ë ¬í™”ëœ ë°ì´í„°ë¥¼ ìºì‹œë“±ì˜ ì´ìœ ë¡œ ì¡´ì¬í•˜ëŠ” Redis ì™€ ê°™ì€ ë©”ëª¨ë¦¬ ì„œë²„ì— ì €ì¥ì„ í•˜ë©´ íŠ¸ë˜í”½ì— ë”°ë¼ ë¹„ìš©ì´ ê¸‰ì¦í•  ìˆ˜ ìˆë‹¤. ìœ„ì™€ ê°™ì€ ì´ìœ ë“¤ë¡œ ìµœëŒ€í•œ JSON í¬ë§·ìœ¼ë¡œ ë³€ê²½ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤. ì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [ìë°” ì§ë ¬í™”, ê·¸ê²ƒì´ ì•Œê³ ì‹¶ë‹¤. í›‘ì–´ë³´ê¸°í¸] ì €ë²ˆì— FCMìœ¼ë¡œ ë³´ë‚¼ í‘¸ì‹œ ë©”ì„¸ì§€ë“¤ì„ ì§ë ¬í™”í•´ì„œ Redis ë©”ëª¨ë¦¬ì— ë„£ì–´ë‘ì–´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì—ì„œ í êµ¬ì¡°ë¡œ ìˆœì°¨ì ìœ¼ë¡œ êº¼ë‚´ê°ˆ ìˆ˜ ìˆê²Œ í•´ë’€ëŠ”ë° ì´ë²ˆì— ì§ë ¬í™”ë¥¼ ì°¾ì•„ë³´ë‹ˆ JSONìœ¼ë¡œ ë°”ê¾¸ëŠ” ë°©í–¥ìœ¼ë¡œ í•´ì•¼ê² ë‹¤..\nInterfaceì™€ Abstract classì˜ ì°¨ì´ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ëª¨ë‘ ì„ ì–¸ë§Œ ê°€ëŠ¥í•˜ê³ , new ë¥¼ ì‚¬ìš©í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²Œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê³µí†µì ì´ ìˆì§€ë§Œ, ì°¨ì´ì ì´ ë” ë§ë‹¤.\nInterface ì¸í„°í˜ì´ìŠ¤ëŠ” A is able to B ë¥¼ ë§Œì¡±ì‹œí‚¨ë‹¤. ì¸í„°í˜ì´ìŠ¤ëŠ” ìë°”8, 9ì— ë“¤ì–´ì˜¤ë©´ì„œ ì›ë˜ì˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ë§ì€ ë³€í™”ê°€ ìƒê²¼ë‹¤.\nInterfaceì˜ ë³€í™” ì¶”ìƒë©”ì„œë“œë§Œ ë§Œë“¤ ìˆ˜ ìˆì—ˆìœ¼ë‚˜ JAVA 8ì— ë“¤ì–´ì˜¤ë©´ì„œ defaultë¥¼ ì‚¬ìš©í•´ ë©”ì„œë“œ êµ¬í˜„ì´ ê°€ëŠ¥í•´ì¡Œë‹¤. í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ì—ˆìœ¼ë‚˜ JAVA 8ì— ë“¤ì–´ì˜¤ë©´ì„œ final ê³¼ static í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì ‘ê·¼ ì§€ì •ìê°€ defaultë¡œ private ì´ì—ˆìœ¼ë‚˜ JAVA 9ì— ë“¤ì–´ì˜¤ë©´ì„œ private ì‚¬ìš©ë„ ê°€ëŠ¥í•´ì¡Œë‹¤. Abstract class ì¶”ìƒí´ë˜ìŠ¤ëŠ” A is Bë¥¼ ë§Œì¡±ì‹œí‚¨ë‹¤. ì¶”ìƒë©”ì„œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , êµ¬í˜„ì´ ëœ ë©”ì„œë“œë¥¼ ë§Œë“¤ ìˆ˜ ë„ ìˆë‹¤. ì¼ë°˜ í´ë˜ìŠ¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•„ë“œë„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\nAbstract class ì‚¬ìš©ì‹œ ì£¼ì˜ ì  ì‹¤ë¬´ì—ì„œ ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ìƒì†ê´€ê³„ë¥¼ ì œëŒ€ë¡œ ê³ ë ¤í•˜ì§€ ì•Šì•˜ì—ˆê¸° ë•Œë¬¸ì— ëª¨ë‘ ë¦¬íŒ©í† ë§ì„ í•´ì•¼ í–ˆë‹¤. ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©ì„ í•  ë•Œì—ëŠ” super í´ë˜ìŠ¤ì™€ í•˜ìœ„í´ë˜ìŠ¤ì˜ ê´€ê³„ë¥¼ ì˜ ìƒê°í•´ì„œ êµ¬í˜„ì„ í•´ì•¼ í•˜ê³ , ì¶”ìƒí´ë˜ìŠ¤ ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ì„ ê¶Œì¥í•œë‹¤.\nDI, IOC Dependency Injectionê³¼ Inversion Of Control. Springì—ì„œ ì²˜ìŒ ì ‘í•œ ê°œë…ì¸ë°, Spring ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì–¸ì–´ì™€ í”„ë ˆì„ì›Œí¬ì—ì„œë„ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ê°œë…ì´ë‹¤.\nIoCëŠ” ì„¤ê³„ ì›ì¹™ì´ê³  DI ëŠ” IoC ì›ì¹™ì„ ì§€í‚¤ê¸° ìœ„í•œ ë””ìì¸ íŒ¨í„´ì´ë‹¤. ì‹¤ì œë¡œ DI ë§ê³ ë„ IoCë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ íŒ¨í„´ì´ ì¡´ì¬í•œë‹¤.\n[Picture 4] IoC Pattern êµ¬í˜„ ë°©ë²•ë¡  IoC IoCëŠ” ê°ì²´ ì‚¬ì´ì˜ ê²°í•©ë„ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì œì–´ë¥¼ ì—­ì „ì‹œí‚¨ë‹¤. ê°€ì¥ í”í•œ ì œì–´ì˜ ì—­ì „ì˜ ì˜ˆì‹œë¡œëŠ” ê°ì²´ ìƒì„±ì´ ìˆë‹¤. ì œì–´ ì—­ì „ì´ ì¼ì–´ë‚˜ë©´ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³ , ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•˜ê¸°ë§Œ í•œë‹¤.\nSpringìœ¼ë¡œ ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´ Beanìœ¼ë¡œ ì„ ì–¸ëœ ê°ì²´ë“¤ì€ Springì—ì„œ ê´€ë¦¬ë¥¼ í•œë‹¤. Bean ê°ì²´ë“¤ì€ IoC Container ì•ˆì— ìƒì„±ì´ ë˜ê³ , ê´€ë¦¬ê°€ ëœë‹¤. ìš°ë¦¬ëŠ” ê·¸ ê°ì²´ë“¤ì´ ì–´ë–»ê²Œ ê´€ë¦¬ê°€ ë˜ê³  ìˆëŠ”ì§€ ì•Œ í•„ìš” ì—†ì´ í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ì•„ (DI) ì‚¬ìš©ì„ í•˜ë©´ ëœë‹¤.\nDI DIëŠ” ì˜ì¡´ì„± ìˆëŠ” ê°ì²´ì˜ ìƒì„±ì„ class ì™¸ë¶€ì—ì„œ ìˆ˜í–‰í•œ í›„, ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ í•´ë‹¹ ê°ì²´ë¥¼ class ì—ê²Œ ì œê³µí•œë‹¤.\nDI ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 @Controller public class TestController { private final TestService testService; public TestController(TestService testService) { this.testService = testService; } } DIì„ ì´ìš©í•´ ê°ì²´ ê²°í•©ë„ë¥¼ ëŠìŠ¨í•˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” Client, Service, Injector í´ë˜ìŠ¤ê°€ í•„ìš”í•˜ë‹¤. Injector í´ë˜ìŠ¤ê°€ Service ê°ì²´ë¥¼ ë§Œë“¤ì–´ Client í´ë˜ìŠ¤ì— ì œê³µí•˜ëŠ” í˜•íƒœì¸ë° ì½”ë”©ì„ í•˜ë©´ì„œ ë¬´ìˆ˜íˆ ë§ì€ ê°ì²´ë“¤ì˜ ì˜ì¡´ì„±ì„ ë§¤ë²ˆ ì´ë ‡ê²Œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ëŠ” ì—†ë‹¤.\në•Œë¬¸ì— IoC Containerì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•´ ìœ„ì™€ ê°™ì€ ì¼ì„ ìœ„ì„í•œë‹¤. í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ì˜ ì˜ì¡´ë„ë¥¼ ê³ ë ¤í•˜ë©´ì„œ ê°ì²´ì˜ ìƒì„±. ì†Œë©¸ì„ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ì½”ë“œì— ë” ì§‘ì¤‘ì„ í•  ìˆ˜ ìˆê³  ê²°ê³¼ì ìœ¼ë¡œ ë³€ê²½ì— ìœ ì—°í•œ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\nì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [Dependency Injection, IoC, DIP, IoC containerì •ë¦¬] Static static í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ë©”ì„œë“œì™€ ë³€ìˆ˜ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ í•´ë‹¹ ë©”ì„œë“œì™€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë§¤ë²ˆ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì— ì†ì‰½ê²Œ ì‚¬ìš©ì„ í•  ìˆ˜ ìˆì–´ ë‚´ ê²½ìš°ëŠ” Utill ì„± ë©”ì„œë“œë“¤ì„ staticìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.\nstatic ì˜ íŠ¹ì§• staticì€ ë©”ëª¨ë¦¬ì— ë”± í•œ ë²ˆ í• ë‹¹ì´ ëœë‹¤. ì¼ë°˜ì ì¸ ê°ì²´ë“¤ì´ Heap ì˜ì—­ì— í• ë‹¹ì´ ë˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ê²Œ stack ì˜ì—­ì— ë§Œë“¤ì–´ì§„ë‹¤. ë•Œë¬¸ì— Heap ì²˜ëŸ¼ Garbage Collectionì„ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. stack ì€ ëª¨ë“  ê°ì²´ê°€ ê³µìœ í•˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì´ê¸° ë•Œë¬¸ì— ê°ì²´ ìƒì„±ì´ ì—†ì´ë„ static ë©”ì„œë“œì™€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Java8ì—ì„œì˜ static Java 8ì´ì „ì— static ë³€ìˆ˜ì™€ ë©”ì„œë“œëŠ” JVM ë©”ëª¨ë¦¬ì—ì„œ PermGenì— ì €ì¥ì´ ë˜ì—ˆìœ¼ë‚˜ Java 8ì—ì„œëŠ” PermGen ê°€ ì‚¬ë¼ì§€ê³  MetaSpaceê°€ ê·¸ ì—­í• ì„ ëŒ€ì‹ í•œë‹¤. ë³€ê²½ëœ Java 8 JVM êµ¬ì¡°ëŠ” [Picture 5] ì™€ ê°™ë‹¤.\n[Picture 5] IoC Pattern êµ¬í˜„ ë°©ë²•ë¡  static í•µì‹¬ êµ¬í˜„ ì‚¬í•­ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ (non-static) ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê³  í´ë˜ìŠ¤ ë³€ìˆ˜ (static) ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œëŠ” static ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.\ní´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ì¸ìŠ¤í„´ìŠ¤ì— ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë§´ë²„ë³€ìˆ˜ì— staticì„ ì‚¬ìš©í•œë‹¤. static ë©”ì„œë“œì—ì„œëŠ” staticì´ ì•„ë‹Œ ë§´ë²„ë³€ìˆ˜ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. static ì´ ì•„ë‹Œ ë©”ì„œë“œì—ì„œëŠ” staticì¸ ë§´ë²„ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë©”ì„œë“œ ì•ˆì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ staticì„ ì‚¬ìš©ì„ ê³ ë ¤í•œë‹¤. 1ê³¼ ê°™ì€ íŠ¹ì„±ìœ¼ë¡œ í•œ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ static ë³€ìˆ˜ì˜ ê°’ì„ ë°”ê¿¨ì„ ë•Œ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— ë³€ê²½ì´ ì ìš©ëœë‹¤. ì´ì™€ ê°™ì€ ëª¨ë‘ ë³€ê²½ ë¶ˆìƒì‚¬ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œ static ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ final í‚¤ìœ„ë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ ë³€ê²½ì„ ë¶ˆê°€í•˜ê²Œ ë§Œë“ ë‹¤.\n2, 3ê³¼ ê°™ì€ ì¼ì´ ì¼ì–´ë‚˜ëŠ” ì´ìœ ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ê°€ static ë³€ìˆ˜ ë˜ëŠ” ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì ì—ì„œëŠ” static ë³€ìˆ˜ì™€ ë©”ì„œë“œê°€ ì´ë¯¸ ìƒì„±ì´ ë˜ì–´ìˆì§€ë§Œ ë°˜ëŒ€ì˜ ê²½ìš°ì—ëŠ” ì‚¬ìš© ì‹œì ì— ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.\n","date":"2021-12-02","permalink":"https://leeleelee3264.github.io/post/2021-12-02-interview-java/","tags":["General"],"title":"2021 ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ ì¸í„°ë·° - Java"},{"content":"\nShell Script ë¡œ Mysql db ì „ì²´ë°±ì—…í•˜ê¸°ì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.\nIndex\në°±ì—… ì§„í–‰ ìˆœì„œ ë°±ì—…ì— ì‚¬ìš©ëœ ìŠ¤í¬ë¦½íŠ¸ \u0026amp; ì„¸ë¶€ ì‚¬í•­ ê°œì„ í•´ì•¼ í•  ì ê³¼ ì°¸ê³ ìë£Œ ë°±ì—… ì§„í–‰ ìˆœì„œ Intro: ë°±ì—…ì˜ ì¢…ë¥˜ SQL ë°±ì—…ì—ëŠ” ì „ì²´ë°±ì—…, ì¦ë¶„ë°±ì—…, ì°¨ë“±ë°±ì—…ì´ ìˆë‹¤. ë°±ì—… ì¢…ë¥˜ì— ëŒ€í•œ ë” ìì„¸í•œ ì •ë³´ëŠ” ì´ì „ì˜ í¬ìŠ¤íŒ…ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. [SQL ë°±ì—… ì¢…ë¥˜]\në°±ì—… í™˜ê²½ ìƒìš©ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ë¹„ì˜ ë°ì´í„°ë¥¼ ì¼ì£¼ì¼ì— í•œ ë²ˆ ì”© ë¡œì»¬ ì„œë²„ë¡œ ë°±ì—…ì„ í•´ë‘ê¸°ë¡œ í–ˆë‹¤. ë¹ˆë²ˆí•˜ê²Œ ì§„í–‰ë˜ëŠ” ë°±ì—…ì´ ì•„ë‹ˆë¼ì„œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ì§€ë§Œ ê°„ë‹¨í•œ ì „ì²´ë°±ì—… ì„ í•˜ê¸°ë¡œ í–ˆë‹¤. ëŒ€ì‹  ì„œë¹„ìŠ¤ì— ì¥ì• ê°€ ê°€ì§€ ì•Šë„ë¡ ì‚¬ìš©ëŸ‰ì´ ì ì€ ì›”ìš”ì¼ ì˜¤ì „ 3ì‹œì— ë°±ì—…ì´ ë˜ë„ë¡ crontabìœ¼ë¡œ ìŠ¤ì¼€ì¥´ë§ì„ ê±¸ì–´ë‘ì—ˆë‹¤.\nìš°ë¶„íˆ¬ í™˜ê²½ì˜ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ Mysql db ë°±ì—…ì„ ì§„í–‰í–ˆë‹¤.\në°±ì—… ê³¼ì • í˜„ì¬ ìƒíƒœ ìƒìš©ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ë¹„ ì´ë¦„ì€ mydb ì´ë‹¤. ê³¼ê±°ì˜ ìƒìš© ë°ì´í„°ë¥¼ ê°€ì§„ ë¡œì»¬ ë””ë¹„ ì´ë¦„ì€ prev_mydbì´ë‹¤. ë°±ì—…ì„ ì§„í–‰í•˜ëŠ” ì¼ì‹œëŠ” 2021ë…„ 09ì›” 06ì¼ì´ë‹¤. ë¡œì»¬ ë””ë¹„ì—ëŠ” ì €ë²ˆì£¼ì¸ 08ì›” 30ì¼ì˜ snapshot ì¸ mydbì™€ 2ì£¼ì „ì¸ 08ì›” 23ì¼ì˜ snapshotì¸ prev_mydbê°€ ìˆë‹¤. ë°±ì—… ëª©í‘œ ë¡œì»¬ë””ë¹„ì˜ mydbë¥¼ prev_mydb ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•œë‹¤. ìƒìš©ë””ë¹„ì˜ mydbë¥¼ í†µì§¸ë¡œ ë¡œì»¬ë””ë¹„ë¡œ ì˜®ê²¨ì˜¨ë‹¤. (ì „ì²´ë°±ì—…) ë¡œì»¬ ë””ë¹„ì— ë‚¨ëŠ” ë””ë¹„ëŠ” prev_mydbì™€ mydbê°€ ëœë‹¤. ìƒì„¸ ì‘ì—… ìˆœì„œ mysqlì€ ë°ì´í„°ë² ì´ìŠ¤ ìì²´ë¥¼ RENAME í•  ìˆ˜ ì—†ì–´ì„œ prev_mydbë¥¼ ì§€ìš°ê³  ë‹¤ì‹œ ë§Œë“¤ì–´ì•¼ í–ˆë‹¤. ë°±ì—…ê³¼ì •ì„ [Picture 1] ì—ì„œ ëª¨ì‹ë„ë¡œ ë‚˜íƒ€ëƒˆë‹¤.\n[Picture 1] DB ë°±ì—… ìƒì„¸ ì‘ì—… ìƒìš© ì„œë²„ì—ì„œì˜ action ë¡œì»¬ ì„œë²„ê°€ ìƒìš© dbë¡œ ì ‘ì† mysqldumpë¥¼ ì‹¤í–‰í•´ì„œ ìƒìš© ë””ë¹„ì˜ mydbì˜ ì „ì²´ ë°ì´í„°ë¥¼ ë¡œì»¬ ì„œë²„ë¡œ ë³µì‚¬ (prod mydb data ìƒì„±) ë¡œì»¬ ì„œë²„ì—ì„œì˜ action ì„œë²„ì—ëŠ” ì§€ê¸ˆ ë§‰ ë¤í”„í•œ prod mydb dataì™€ mydb, prev_mydb 3ê°œê°€ ì¡´ì¬í•œë‹¤. prev_mydb ë¥¼ ì‚­ì œí•˜ê³ , mydbë¥¼ ë³µì‚¬í•œë‹¤. (local mydb data ìƒì„±) local mydb data ë¡œ prev_mydb ë¥¼ ìƒì„±í•œë‹¤. mydbë¥¼ ì‚­ì œí•œë‹¤. prod mydb data ë¡œ mydb ë¥¼ ìƒì„±í•œë‹¤. ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ë¡œì»¬ ë””ë¹„ì—ëŠ” ìƒˆë¡œìš´ mydbì™€ prev_mydb ê°€ ë‚¨ëŠ”ë‹¤. prod mydb data ëŠ” ì••ì¶•ì„ í•´ gz íŒŒì¼ í˜•ì‹ìœ¼ë¡œ ë¡œì»¬ ì„œë²„ì— ë‚¨ê²¨ë‘”ë‹¤. ë°±ì—…ì— ì‚¬ìš©ëœ ìŠ¤í¬ë¦½íŠ¸ \u0026amp; ì„¸ë¶€ì‚¬í•­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 #!/bin/bash # ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ # Title: bk_prod.sh # Author: Seungmin Lee # Date: 2021-08-16 # Schedule: Every Sunday AM 03:00 # # This script is for backup rds (product) database. Backup db will be used in statistic part cd ~/bk_prod DATE=`date +\u0026#39;%Y%m%d\u0026#39;` # dest db info HOST=rds.examplehost.com READ_ID=rds_id # src db info LOCAL_ID=local_id # pre setting file. # default pre setting file is ~/.my.cnf LOCAL_CNF_PATH=~/bk_prod/.my.local.cnf LOCAL_BASIC=\u0026#34;--defaults-file=${LOCAL_CNF_PATH} --user=${LOCAL_ID}\u0026#34; DB=mydb PRE_DB=prev_mydb # view will be ignored from db dump VIEW_ONE=${DB}.v_channel_lang VIEW_TWO=${DB}.v_voice_usage # --------------------------------------------------------------------------------------------------------------------------------------------- # # --------------------------------------------------------------------------------------------------------------------------------------------- # # dump rds db first mysqldump --single-transaction --host=${HOST} --user=${READ_ID} --ignore-table=${VIEW_ONE} --ignore-table=${VIEW_TWO} ${DB} \u0026gt; ${DB}${DATE}.sql # local db backup for db rename mysqldump ${LOCAL_BASIC} ${DB} \u0026gt; local_${DB}${DATE}.sql # create and dump previous db in local db # ---------------------------------------------------------------------------------------------------------------------------------------------- # # ---------------------------------------------------------------------------------------------------------------------------------------------- # # check prev_mydb is in local db RESULT=`mysql ${LOCAL_BASIC} --skip-column-names -e \u0026#34;show databases like \u0026#39;${PRE_DB}\u0026#39;\u0026#34;` if [ ${RESULT} == ${PRE_DB} ] then echo \u0026#34;DELETE FORMER ${PRE_DB}\u0026#34; mysql ${LOCAL_BASIC} -e \u0026#34;DROP DATABASE ${PRE_DB}\u0026#34; else : fi mysql ${LOCAL_BASIC} -e \u0026#34;CREATE DATABASE ${PRE_DB}\u0026#34; mysql ${LOCAL_BASIC} pre_${DB} \u0026lt; local_${DB}${DATE}.sql # now delete xouchcare db in local db mysql ${LOCAL_BASIC} -e \u0026#34;DROP DATABASE ${DB}\u0026#34; # make new xouchcare db in local db mysql ${LOCAL_BASIC} -e \u0026#34;CREATE DATABASE ${DB}\u0026#34; mysql ${LOCAL_BASIC} ${DB} \u0026lt; ${DB}${DATE}.sql echo \u0026#34;DB back up fine\u0026#34; # done gzip *.sql mysql command options â€”defaults-file (line 25) ì‰˜ìŠ¤í¬ë¦½íŠ¸ì—ì„œ DB ì ‘ì† ë¬¸ì œ\nmysqldumpì™€ ê°™ì€ mysqlì—ì„œ ì‚¬ìš©í•˜ëŠ” ì»¤ë§¨ë“œëŠ” ì‹¤í–‰ì„ ìœ„í•´ì„œëŠ” db ì ‘ì† í˜¸ìŠ¤íŠ¸ ì •ë³´ì™€ id, pwë¥¼ í•¨ê»˜ ì…ë ¥í•´ì•¼ í•œë‹¤. í„°ë¯¸ë„ì— ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•  ë•ŒëŠ” ìƒê´€ì´ ì—†ì§€ë§Œ ì‰˜ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹¤í–‰ì„ í•  ë•ŒëŠ” ë”°ë¡œ í„°ë¯¸ë„ë¡œ ê³„ì • ì •ë³´ë¥¼ ê¸°ì…í•´ ì¤„ ìˆ˜ ì—†ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ê³„ì • ì •ë³´ë¥¼ ë„£ì–´ë‘” my.cnf ë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤.\nì‹¤í–‰í•˜ë ¤ëŠ” ì‰˜ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì ‘ì†ì„ í•´ì•¼ í•˜ëŠ” ë””ë¹„ê°€ ìƒìš©ê³¼ local ë‘ê°€ì§€ë¼ì„œ ê°ê°ì˜ ê³„ì • ì •ë³´ë¥¼ ë„£ì–´ë‘” my.cnf ì™€ my.local.cnf íŒŒì¼ì„ ë§Œë“¤ì—ˆë‹¤. my.local.cnf ì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ ì‹¤í–‰ì„ í•´ì•¼í•˜ëŠ” ì»¤ë§¨ë“œë³„ë¡œ ê³„ì •ì •ë³´ë¥¼ ë„£ì–´ë‘ë©´ ì‰˜ì—ì„œ í•´ë‹¹ mysql ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•  ë•Œ id, pw ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\ncnf íŒŒì¼ ê²½ë¡œ ì„¤ì •\nê¸°ë³¸ my.cnf ìœ„ì¹˜ëŠ” ~/my.cnf ë¡œ í™ˆë””ë ‰í† ë¦¬ì— ìƒì„±ì´ ë˜ê±°ë‚˜, í™ˆë””ë ‰í† ë¦¬ì— ì§ì ‘ ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤. ì‰˜ì—ì„œë„ ë”°ë¡œ ê²½ë¡œë¥¼ í‘œê¸°í•˜ì§€ ì•Šì•„ë„ ì•Œì•„ì„œ my.cnfì˜ ìœ„ì¹˜ë¡œ ê°€ì„œ íŒŒì¼ì„ ì½ì–´ì˜¨ë‹¤. my.local.cnf ì²˜ëŸ¼ ì¶”ê°€ë¡œ ë§Œë“¤ë•Œë©´ ê²½ë¡œë¥¼ ë”°ë¡œ í‘œê¸°í•´ì¤˜ì•¼ í•œë‹¤. ì‹¤ì œ ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì‚¬ìš©ì„ í•  ë•ŒëŠ” â€”defaults-file=path_of_cnf_file ì„ ì¨ì£¼ë©´ ëœë‹¤.\nìƒìš© ë””ë¹„ ê³„ì • ì •ë³´ë¥¼ ë„£ì–´ë‘” my.cnf íŒŒì¼\n1 2 3 [mysqldump] user=rds_id password=rds_pw Local ë””ë¹„ ê³„ì • ì •ë³´ë¥¼ ë„£ì–´ë‘” my.local.cnf íŒŒì¼\n1 2 3 4 5 6 7 [mysqldump] user=local_id password=local_pw [mysql] user=local_id password=local_pw â€”ignore-table (in line 37) mysqldump ë¥¼ ì‹¤í–‰í•  ë•Œ ë¤í”„ë¥¼ í•˜ì§€ ë§ì•„ì•¼ í•˜ëŠ” í…Œì´ë¸”ì„ ëª…ì‹œí•´ì£¼ë©´ ë¤í”„ì—ì„œ ì œì™¸ê°€ ëœë‹¤. ì œì™¸ë¥¼ í•  í…Œì´ë¸”ë“¤ì´ ìˆìœ¼ë©´ â€”ignore-table=table_name ì„ í•˜ë‚˜ì”© ì ì–´ì£¼ë©´ ëœë‹¤. ì•„ì‰½ê²Œë„ í•˜ë‚˜ì˜ ì˜µì…˜ì— ì—¬ëŸ¬ê°œì˜ í…Œì´ë¸”ì„ ì“¸ ìˆ˜ëŠ” ì—†ì—ˆë‹¤.\në‚´ ê²½ìš°ëŠ” ë¡œì»¬ ë””ë¹„ì— ì ‘ì†ì„ í•˜ë ¤ëŠ” ê³„ì •ì´ viewì— ëŒ€í•œ ê¶Œí•œì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì•„ì˜ˆ ìƒìš© ë””ë¹„ë¥¼ ë¤í”„í•  ë•Œ ì œì™¸ë¥¼ ì‹œì¼œë†¨ë‹¤.\nâ€”single-transaction (in line 37) innodbëŠ” íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë¤í”„ë¥¼ í•  ë•Œ í•˜ë‚˜ì˜ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ì—´ì–´ì„œ ì§„í–‰ì„ í•œë‹¤. ê·¸ëŸ¼ ë¤í”„ë¥¼ ì‹¤í–‰í•˜ëŠ” ë”± ê·¸ ìˆœê°„ì˜ ë””ë¹„ê°€ ìŠ¤ëƒ…ìƒ·ì²˜ëŸ¼ ë¤í”„ê°€ ë– ì§„ë‹¤. ë¤í”„ë¥¼ í•˜ê³  ìˆëŠ” ì¤‘ì— dbì— ì‹¤í–‰ëœ delete, insert, updateê³¼ ê°™ì€ DML ì¿¼ë¦¬ì˜ ê²°ê³¼ëŠ” ë°˜ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤.\nì•„ì˜ˆ íŠ¸ëœì­ì…˜ì„ ê±¸ê¸° ë•Œë¬¸ì— ë¤í”„ë¥¼ í•˜ë©´ì„œ ì‘ì—…ì¤‘ì¸ í…Œì´ë¸”ì— ë½ì„ í•˜ë‚˜í•˜ë‚˜ ê±¸ì§€ ì•Šì•„ë„ ëœë‹¤. innodbê°€ ì•„ë‹ˆë©´ lock-tables ì˜µì…˜ì„ ê±¸ì–´ì¤˜ì•¼ í•œë‹¤.\nsingle-transactionì˜ í•œê³„\në‹¨, ë°ì´í„°ë¥¼ ë°”ê¾¸ëŠ” DMLì€ íŠ¸ëœì­ì…˜ì´ ë§‰ì„ ìˆ˜ ìˆì§€ë§Œ ìŠ¤í‚¤ë§ˆë¥¼ ë°”ê¾¸ëŠ” DDLì€ íŠ¸ëœì­ì…˜ì´ ë§‰ì„ ìˆ˜ ì—†ë‹¤ê³  í•œë‹¤. ê·¸ë˜ì„œ ì„±ê³µì ìœ¼ë¡œ ë¤í”„ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ë¤í”„ë¥¼ í•˜ëŠ” ë™ì•ˆ DDL ì¿¼ë¦¬ë¥¼ í•´ì„œëŠ” ì•ˆëœë‹¤.\nâ€”skip-column-names (in line 47) ë§ ê·¸ëŒ€ë¡œ ê²°ê³¼ì—ì„œ ì»¬ëŸ¼ì˜ ì´ë¦„ì„ ë¹¼ê³  ë³´ì—¬ì£¼ëŠ” ì˜µì…˜ì´ë‹¤. ì‰˜ìŠ¤í¬ë¦½íŠ¸ì—ì„œ mysqlì˜ ê²°ê³¼ ê°’ì„ ì¸ìë¡œ ë°›ì•„ ì‹¤í–‰ì„ í•  ë•Œ ì»¬ëŸ¼ ì´ë¦„ì´ ë“¤ì–´ê°€ ìˆìœ¼ë©´ ê²°ê³¼ë¥¼ ì‹ë³„í•˜ê¸°ê°€ ì–´ë ¤ì›Œ â€”skip-column-names ë¥¼ ì‚¬ìš©í•œë‹¤.\nì‚¬ìš© ì˜ˆì‹œ\n1 2 3 4 5 6 # with column +----------------------+ | Database (mydb) | +----------------------+ | mydb | +----------------------+ 1 2 3 4 # without column +----------------------+ | mydb | +----------------------+ -e (in line 47) â€”execute ê³¼ ë™ì¼í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì˜µì…˜. í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ mysqlì€ ë”°ì˜´í‘œë¡œ ê°ì‹¸ì¤€ ì¿¼ë¦¬(SQL statement)ë¥¼ ì‹¤í–‰í•˜ê³  ê°’ì„ ë±‰ì–´ë‚¸ ë‹¤ìŒì— ì¢…ë£Œí•œë‹¤.\nmysqlì— ì ‘ì†í•´ì„œ ì½˜ì†”ì„ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ì¿¼ë¦¬ë„ ì‹¤í–‰ì„ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ -e ë¥¼ ì‚¬ìš©í•˜ë©´ mysql ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì›í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.\n-e ì‚¬ìš© ì˜ˆì‹œ\n1 2 3 4 5 # ì˜ˆì‹œ 1 RESULT=`mysql ${LOCAL_BASIC} --skip-column-names -e \u0026#34;show databases like \u0026#39;${PRE_DB}\u0026#39;\u0026#34; # ì˜ˆì‹œ 2 mysql -uroot -p1234 -e \u0026#34;select * from test.user from age=20\u0026#34; ê°œì„ í•  ì ê³¼ ì°¸ê³ ìë£Œ ê°œì„ í•  ì  ì „ì²´ë°±ì—…ì˜ ì¥ì ì€ êµ¬í˜„ì´ ì‰½ë‹¤. ê·¸ëŸ°ë° ë””ë¹„ ì†ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë°±ì—…í•˜ê¸° ë•Œë¬¸ì— ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤.\nê·¸ë¦¬ê³  ë§Œì•½ ì „ì²´ ë°±ì—…ì´ ì œëŒ€ë¡œ ì§„í–‰ì´ ì•ˆëœë‹¤ë©´ ë§ì€ ì–‘ì˜ ë°±ì—… ë°ì´í„°ë¥¼ ìœ ì‹¤í•  ìœ„í—˜ë„ í¬ë‹¤. ê·¸ë˜ì„œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì „ì²´ë°±ì—… + ì°¨ë“±ë°±ì—… / ì „ì²´ë°±ì—… + ì°¨ë“±ë°±ì—… + ì¦ë¶„ë°±ì—… ìœ¼ë¡œ ì—¬ëŸ¬ ì£¼ê¸°ë¡œ ë°±ì—…ì„ ì§„í–‰í•œë‹¤.\në¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ DB ë°±ì—… í•˜ê¸° ì‰˜ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§¤ ìˆ˜ ìˆëŠ” ì „ì²´ë°±ì—…ê³¼ëŠ” ë‹¤ë¥´ê²Œ ì°¨ë“±ë°±ì—…ê³¼ ì¦ë¶„ë°±ì—…ì€ êµ¬í˜„ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¨ì„œ ë§ì´ ì§„í–‰í•œë‹¤.\nê²€ìƒ‰ì„ í–ˆì„ ë•Œ ë§ì´ ë³´ì˜€ë˜ ê²Œ XtraBackup ì¸ë° ì§€ì› ë¬¸ì œê°€ ìˆì–´ì„œ ìš”ì¦˜ì€ Mariabackup ì„ ì‚¬ìš©í•œë‹¤. ë‚˜ì¤‘ì— ì¢€ ë” ì„¸ë°€í•œ ë°±ì—…ì„ ìœ„í•´ êµ¬ì¡°ë¥¼ ë°”ê¾¸ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ XtraBackupê³¼ Mariabackupì— ê´€ë ¨ëœ ë¬¸ì„œë¥¼ ë‚¨ê²¨ë‘”ë‹¤.\n[ìš°ì•„í•œ-ì¥ì• ì™€ ê´€ë ¨ëœ XtraBackup ì ìš©ê¸°] [Mariabackupì„ ì´ìš©í•œ ì¦ë¶„ ë°±ì—…] [XtraBackupì—ì„œ Mariabackupë¡œ ë³€ê²½í•´ì•¼ í•˜ëŠ” ì´ìœ ] ì°¸ê³ ìë£Œ [Mysqldump \u0026ndash;single-transaction option] [4.2.2.1 Using Options on the Command Line] [Storage Engine (InnoDB vs MyISAM)] ","date":"2021-09-09","permalink":"https://leeleelee3264.github.io/post/2021-09-09-linux-shell-db-backup/","tags":["Infra"],"title":"Shell Script ë¡œ MySQL db ì „ì²´ë°±ì—…í•˜ê¸°"},{"content":"\nSQL ë°±ì—… ì¢…ë¥˜ì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.\nIndex\nì–¸ì œ DB ë°±ì—…ì„ í•´ì•¼ í•˜ë‚˜? ë°±ì—… ê°œë… MySQLì˜ ë°±ì—… ì»¤ë§¨ë“œ Linux DB Migration ì–¸ì œ DB ë°±ì—…ì„ í•´ì•¼ í•˜ë‚˜? ë°±ì—…ì˜ ìš©ë„ ë‚´ê°€ ì‹¤ë¬´ì—ì„œ ì ‘í•  ìˆ˜ ìˆëŠ” ë””ë¹„ ë°±ì—…ì˜ ìš©ë„ëŠ” 2ê°€ì§€ê°€ ì •ë„ì´ë‹¤.\n(ë³´ê´€) ë°ì´í„° ìœ ì‹¤ì„ ë§‰ê¸° ìœ„í•´ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ë¹„ ì™¸ì˜ ë‹¤ë¥¸ ë””ë¹„ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ (ì´ì „) ì›ë˜ìˆë˜ ë””ë¹„ë¥¼ ë²„ë¦¬ê³  ìƒˆë¡œìš´ ë””ë¹„ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ 2ì˜ ê²½ìœ„ì—ëŠ” ë””ë¹„ê°€ ë°”ë€Œë‹ˆ ì´ì— ë”°ë¼ ì½”ë“œë‚˜ ëª…ì„¸ë“± ì—¬ëŸ¬ê°€ì§€ë¥¼ ë°”ê¿”ì¤˜ì•¼ í•˜ê³ , ë°ì´í„° ì–‘ì´ ë§ìœ¼ë©´ ì´ì „í•˜ëŠ” ì‘ì—… ìì²´ê°€ ì˜¤ë˜ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— ìì£¼ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ê²Œ ì œì¼ ì¢‹ì§€ë§Œ, ì„œë¹„ìŠ¤ ì´ˆê¸°ì™€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë©´ì„œ ê·œëª¨ì™€ êµ¬ì¡°ëŠ” ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í•­ìƒ ë§ˆìŒì˜ ì¤€ë¹„ë¥¼ í•´ë‘ëŠ” ê²Œ ì¢‹ë‹¤.\nì‹¤ë¬´ì—ì„œ ë°±ì—… ì‘ì—…ì„ í•œ ê²½í—˜ ì„œë²„ì™€ DBê°€ í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ì— ìˆì„ ë•Œ ë¬¸ì œì  ì•±/ì›¹ì„œë²„ë“¤ê³¼ ë””ë¹„ì„œë²„ë¥¼ í•˜ë‚˜ì— ëª°ì•„ë‘ëŠ” ê²ƒì€ ì¢‹ì€ êµ¬ì¡°ê°€ ì•„ë‹ˆë‹¤. í•œ ê³³ì— ëª°ì•„ë‘ë©´ ê´€ë¦¬ëŠ” ì‰¬ìš¸ ìˆ˜ ìˆê² ì§€ë§Œ í•˜ë‚˜ê°€ ì˜ëª»ë˜ë©´ ë‹¤ë¥¸ ë¶€ë¶„ê¹Œì§€ ì˜í–¥ì„ ë¯¸ì³ ê²°êµ­ ì„œë¹„ìŠ¤ë¥¼ ë§ˆë¹„ì‹œí‚¬ ìˆ˜ ìˆëŠ” ìœ„í—˜ë¶€ë‹´ì´ í¬ë‹¤. ì•±ì„œë²„ì— ìš”ì²­ì´ ëª°ë¦¬ê±°ë‚˜, ëŒ€ê·œëª¨ ë””ë¹„ ì—°ì‚°ì´ ìˆ˜í–‰ë˜ë©´ ì–‘ìª½ì´ ì •ìƒì‘ë™ í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œí–‰í•œë‹¤.\nëŒ€í‘œì ì¸ ì˜ˆê°€ ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê°œë°œ ì„œë²„ì´ë‹¤. ìƒìš©ì„œë²„ì¸ APIëŠ” ì„œë²„ì™€ ì•„ë§ˆì¡´ RDSë¥¼ ì‚¬ìš©í•˜ëŠ” ë””ë¹„ê³¼ ì™„ì „íˆ ë¶„ë¦¬ê°€ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— êµ¬ì¡°ì  ë¬¸ì œê°€ ì—†ë‹¤. ê·¸ëŸ¬ë‚˜ ê°œë°œì„œë²„ì¸ TPIëŠ” ë””ë¹„ê°€ TPI ì„œë²„ ì•ˆì— ë“¤ì–´ê°€ ìˆë‹¤.\n[Picture 1] íšŒì‚¬ ì„œë²„ êµ¬ì¡° ë¬¸ì œ ë°œìƒ ê°œë°œì„œë²„ë‹¤ ë³´ë‹ˆ ì„œë²„ì•ˆì— ì—¬ëŸ¬ê°€ì§€ ì•± ì„œë²„ë“¤ì„ ë„ì›Œë‘ì—ˆëŠ”ë° ì´ˆê¸°ì— ê°œë°œì„œë²„ê°€ ì»¤ì§ˆ ê²ƒì„ ì˜ˆìƒí•˜ì§€ ëª»í•˜ê³  AWSì—ì„œ CPUì™€ ë©”ëª¨ë¦¬ ì„±ëŠ¥ì´ ì‘ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•´ì„œ ì„œë²„ë¡œ ë„ì› ë‹¤. ê²Œë‹¤ê°€ ìœ„ì—ì„œ ë§í•œ ê²ƒ ì²˜ëŸ¼ ê°œë°œì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ë¹„ë˜í•œ í•´ë‹¹ ì„œë²„ ì•ˆì— ë„ì›Œë‘ì—ˆë‹¤. ì•±ì„œë²„ì˜ ê°¯ìˆ˜ê°€ ëŠ˜ìˆ˜ë¡ ì„œë²„ì˜ ìì›ì€ ë¶€ì¡±í•´ì¡Œë‹¤.\nê²°êµ­ ì–´ëŠ í•œ ì•± ì„œë²„ì—ì„œ ì§€ë‚˜ì¹˜ê²Œ CPUë¥¼ ë…ì í•´ì„œ ì—°ì‚°ì„ ì§„í–‰í•˜ë©´ì„œ ë‹¤ë¥¸ ì•±ì„œë²„ë“¤ê³¼ ë””ë¹„ê°€ ë©ˆì·„ê³  ì‹¬ì§€ì–´ ì„œë²„ ìì²´ì— sshë¡œ ì ‘ì†í•˜ëŠ” ê²ƒë„ ë¶ˆê°€ëŠ¥í–ˆë‹¤. ìì›ì´ ì ì€ ì„œë²„ì— ì´ê²ƒì €ê²ƒ ì˜¬ë ¤ë‘ëŠ” ê²ƒë„ ë¬´ë¦¬ì˜€ì§€ë§Œ ì œì¼ í° ë¬¸ì œëŠ” ì„œë²„ê°€ í„°ì§€ì ë””ë¹„ê¹Œì§€ ì‘ë™ì„ ë©ˆì·„ë˜ ì ì´ë‹¤. ë„ë¯¸ë…¸ì²˜ëŸ¼ ë‹¤ ë©ˆì¶˜ ì„œë²„ëŠ” ê²°êµ­ ì¬ë¶€íŒ…ì„ í•´ì„œ ì‚´ë ¸ë‹¤.\në¬¸ì œ í•´ê²° ì´ëŸ° ë„ë¯¸ë…¸ ë¬¸ì œê°€ ë°œìƒí•˜ë‹¤ë³´ë‹ˆ í•˜ë‚˜ì— ë­‰ì³ìˆëŠ” ì„œë²„ë¥¼ ì‘ê²Œ ìª¼ê°œëŠ” ìˆ˜ ë°–ì— ì—†ë‹¤. ì„œë²„ë¥¼ 3ëŒ€ë¥¼ ë„ì›Œì„œ 2ëŒ€ë¥¼ ì•±ì„œë²„ ì»¨í…Œì´ë„ˆ ì„œë²„ë¡œ ì‚¬ìš©í•˜ê³  ë‚˜ë¨¸ì§€ í•˜ë‚˜ë¥¼ ë””ë¹„ ì»¨í…Œì´ë„ˆ ì„œë²„ë¡œ ì‚¬ìš©í•œë‹¤. ìƒìš© ì„œë²„ ì²˜ëŸ¼ RDS ë””ë¹„ë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ê² ì§€ë§Œ RDSëŠ” ë¹„ì‹¸ê¸° ë•Œë¬¸ì— ì„ íƒí•˜ì§€ ëª»í–ˆê³  ì›ë˜ ëª©ì ì¸ ì„œë²„ì™€ ë””ë¹„ì˜ ë¶„ë¦¬ëŠ” ì´ë£¨ì–´ì¡Œë‹¤!\nì´ë ‡ê²Œ ë‚˜ëˆ ë‘ë©´ ì•ì˜ ë‘ ì»¨í…Œì´ë„ˆ ì„œë²„ì— ìš”ì²­ì´ ì‹¬ê°í•œ ìˆ˜ì¤€ê¹Œì§€ ëª°ë ¤ì„œ ì„œë²„ê°€ ë‹¤ìš´ì´ ëœë‹¤ê³  í•´ë„ ë””ë¹„ ì»¨í…Œì´ë„ˆ ì„œë²„ì—ëŠ” ì•„ë¬´ëŸ° ì˜í–¥ì´ ì—†ê³ , ë””ë¹„ë¥¼ ë„ì›Œë‘” ì„œë²„ì—ëŠ” ë‹¤ë¥¸ ê²ƒë“¤ì„ ë„ì›Œë‘ì§€ ì•Šê³  ì •ë§ Mysql ë§Œ ë„ì›Œë‘ê¸° ë•Œë¬¸ì— ì„œë²„ì— ê³¼ë¶€í•˜ê°€ ê±¸ë¦´ í™•ë¥ ì´ í¬ê²Œ ë‚®ì•„ì§„ë‹¤.\në” ì–´ë ¤ìš´ ë°±ì—…ì€? ë””ë¹„ ì´ì „ì„ ìœ„í•œ ë°±ì—…ì€ ì‚¬ìš©í•˜ê³  ìˆë˜ ë””ë¹„ ì†ì˜ ë°ì´í„°ë¥¼ ëª½ë•… êº¼ë‚´ì™€ì„œ ìƒˆë¡œ ë§Œë“  ë””ë¹„ì— ë„˜ê²¨ì£¼ê¸°ë§Œ í•˜ë©´ ëì´ë¼ì„œ ë¹„êµì  ì‰¬ìš´ ë°±ì—…ì´ë‹¤. ë¬¸ì œëŠ” ë°ì´í„° ìœ ì‹¤ì„ ë§‰ê¸°ìœ„í•´, ì •ë§ ë°±ì—…ì˜ ìš©ë„ë¡œ ì´ë£¨ì–´ì§„ ë””ë¹„ ë°±ì—…ì´ë‹¤. ë””ë¹„ë¥¼ í†µì§¸ë¡œ ë³µì‚¬í•´ì„œ ê°€ì§€ê³  ìˆì„ ê²ƒì¸ì§€, ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ë°±ì—…ì„ ì§„í–‰í•´ì„œ ë§ˆì§€ë§‰ ë°±ì—… ì´í›„ì— ì´ì–´ì„œ ë°±ì—…ì„ í•  ê²ƒì¸ì§€ ë“±ë“± ì—¬ëŸ¬ ì»¨ì…‰ì˜ ë°±ì—…ì´ ìˆë‹¤.\n(plus) ë¬¸ì œ í•´ê²° ì¤‘ ëŠë‚€ ì  ì´ë²ˆ ë¬¸ì œë¥¼ ì§ë©´í•˜ë©´ì„œ ìš”ì¦˜ ì™œ MSAê°€ ë§ì´ ì„ íƒì„ ë°›ëŠ”ì§€ ì´ìœ ë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ ì•Œ ê²ƒ ê°™ì•˜ë‹¤. MSAë¥¼ ë‹¤ë£¬ ê¸€ì—ì„œëŠ” ì—ìì¼ì‹ìœ¼ë¡œ ë¹ ë¥´ê²Œ ê°œë°œì´ ê°€ëŠ¥í•œê²Œ í° ì¥ì ì´ì—ˆëŠ”ë° ì´ë ‡ê²Œ ì˜ê²Œ ë‚˜ëˆ ë‘ë©´ ì„œë²„ì˜ ì˜¤ë¥˜ê°€ ë©€ë¦¬ í¼ì§€ëŠ” ê²ƒë„ ìµœì†Œí™” í•  ìˆ˜ ìˆëŠ” ê²ƒë„ ì¥ì ì´ë¼ê³  ìƒê°ëœë‹¤. í•œêµ°ë°ì— ëª°ë ¤ë‘” TPI í˜•íƒœì˜ ì•„í‚¤í…ì²˜ê°€ ëª¨ë†€ë¦¬í‹±ì´ê³  ëª¨ë†€ë¦¬í‹±ë³´ë‹¤ëŠ” ë¶„ë¦¬ê°€ ë˜ì–´ìˆëŠ” ê²Œ SOA (Service-Orient Architecture) ì˜€ë‹¤.\nSOAì™€ MSAì˜ ì°¨ì´ëŠ” ì—¬ê¸°ì„œ ë” ìì„¸íˆ ë³¼ ìˆ˜ ìˆë‹¤. [SOA vs MSA]\n[Picture 2] ì—¬ëŸ¬ê°€ì§€ ì•„í‚¤í…ì²˜ ë°±ì—… ê°œë… ì•„ë˜ì˜ ì»¨ì…‰ì€ ë°ì´í„°ë² ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ ì»´í“¨í„° ì „ë°˜ì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ë°±ì—…ì—ì„œ í†µìš©ë˜ëŠ” ì»¨ì…‰ì´ë‹¤.\nì „ì²´ ë°±ì—… (Full Backup) ì°¨ë“± ë°±ì—… (Differential Backup) ì¦ë¶„ ë°±ì—… (Incremental Backup) ì „ì²´ ë°±ì—… ë””ë¹„ ì´ì „ì„ ìœ„í•´ ì§„í–‰í•˜ëŠ” ë°±ì—…ì€ ì „ì²´ ë°±ì—…ì´ë‹¤. ì•„ë¬´ ì¡°ê±´ ì—†ì´ ëª¨ë“  ë°ì´í„°ë¥¼ ë¤í”„ ëœ¨ê¸° ë•Œë¬¸ì— ì¡°ê±´ì´ ì—†ì–´ ë°±ì—…ì„ ì§„í–‰í•˜ê¸° ì‰½ì§€ë§Œ ì‹œê°„ì´ ì œì¼ ì˜¤ë˜ ê±¸ë¦¬ê³  íŒŒì¼ í¬ê¸°ë„ ì œì¼ í¬ë‹¤.\nì°¨ë“± ë°±ì—… [Picture 3] ì°¨ë“± ë°±ì—… ì°¨ë“± ë°±ì—…ì€ ì „ì²´ ë°±ì—…ë³´ë‹¤ ì¡°ê¸ˆ ë” ì •êµí•œ í˜•íƒœì˜ ë°±ì—…ì´ë‹¤. ì „ì²´ë°±ì—…ì€ í° ê·œë¬˜ì˜ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ë‹¤ë³´ë‹ˆ ì¼ì£¼ì¼ì— í•œ ë²ˆ ì •ë„ ì§„í–‰ì´ ëœë‹¤. ë§Œì•½ ì €ë²ˆì£¼ì˜ ì „ì²´ ë°±ì—…ì€ ì˜ ë§ˆì³¤ì§€ë§Œ ì´ë²ˆì£¼ì˜ ì „ì²´ ë°±ì—…ì´ ì •ìƒì ìœ¼ë¡œ ì§„í–‰ì´ ì•ˆë˜ì—ˆë‹¤ë©´ ë§ì€ ë°ì´í„°ë¥¼ ìœ ì‹¤í•˜ê²Œ ëœë‹¤.\nì´ëŸ° ì „ì²´ë°±ì—…ì˜ ë¬¸ì œì ì„ ì»¤ë²„í•˜ê¸° ìœ„í•œ ì°¨ë“± ë°±ì—…ì€ ì „ì²´ ë°±ì—… ì´í›„ ì¶”ê°€ëœ ë°ì´í„°ë“¤ë§Œ ë°±ì—…ì„ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ, ê·¸ë¦¼ì²˜ëŸ¼ ì¼ìš”ì¼ì— ì „ì²´ ë°±ì—…ì„ í•œë‹¤ê³  í•˜ë©´\nì›”: ì›”ìš”ì¼ì— ì¶”ê°€ëœ ë°ì´í„°\ní™”: ì›”ìš”ì¼ + í™”ìš”ì¼ì— ì¶”ê°€ëœ ë°ì´í„°\nìˆ˜: ì›”ìš”ì¼ + í™”ìš”ì¼ + ìˆ˜ìš”ì¼\n\u0026hellip;\nì´ëŸ° ì‹ìœ¼ë¡œ ë‹¤ìŒ ì „ì²´ ë°±ì—…ì´ ìˆëŠ” ì¼ìš”ì¼ ì „ê¹Œì§€ ë°±ì—…ì´ ì§„í–‰ëœë‹¤. (ë§ˆì§€ë§‰ ì°¨ë“±ë°±ì—…ì€ ë¬´ì‹œëœë‹¤ê³  í•œë‹¤). ì „ì²´ ë°±ì—…ë³´ë‹¤ëŠ” ì •êµí•˜ê³ , ë°ì´í„°ë„ ë¹„êµì  ì ê¸° ë–„ë¬¸ì— í¬ê¸°ë„ ì‘ê³  ì‘ì—… ì‹œê°„ë„ ë‹¨ì¶•ë˜ì—ˆìœ¼ë‚˜ ë‹¤ìŒ ì „ì²´ ë°±ì—… ë‚ ì´ ë‹¤ê°€ì˜¬ìˆ˜ë¡ íŒŒì¼ í¬ê¸°ê°€ ì»¤ì§„ë‹¤. ê·¸ë¦¬ê³  ë³€ê²½ëœ ì‚¬í•­ë“¤ì„ ëˆ„ì í•´ê°€ë©´ì„œ ì €ì¥í•˜ê¸° ë–„ë¬¸ì— í•˜ë£¨ì— í•œ ë²ˆ ì´ìƒ ì§„í–‰í•˜ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆë‹¤.\nì¦ë¶„ ë°±ì—… [Picture 4] ì¦ë¶„ ë°±ì—… ì¦ë¶„ ë°±ì—…ì€ ì°¨ë“±ë°±ì—…ë³´ë‹¤ ë” ì‘ì€ ê·œëª¨ì˜ ë°±ì—…ì„ ì§„í–‰í•œë‹¤. ì°¨ë“±ë°±ì—…ì´ ì „ì²´ë°±ì—… ì´í›„ì˜ ë³€ê²½ì„ í•˜ë£¨í•˜ë£¨ ëˆ„ì í•œë‹¤ë©´ ì¦ë¶„ë°±ì—…ì€ ë”± ê·¸ë‚  ë°”ë€ ë¶€ë¶„ë§Œ ë°±ì—…ì„ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¼ìš”ì¼ë‚  ì „ì²´ë°±ì—…ì„ ì§„í–‰í–ˆë‹¤ë©´\nì›”: ì›”ìš”ì¼ì— ì¶”ê°€ëœ ë°ì´í„°\ní™”: í™”ìš”ì¼ì— ì¶”ê°€ëœ ë°ì´í„°\nìˆ˜: ìˆ˜ìš”ì¼ì— ì¶”ê°€ëœ ë°ì´í„°\n\u0026hellip;\nì´ëŸ° ì‹ìœ¼ë¡œ ê·¸ë‚ ì˜ ë°ì´í„°ë§Œ ì €ì¥ì„ í•œë‹¤. ë•Œë¬¸ì— í¬ê¸°ê°€ ê°€ì¥ ì‘ê³ , ë°±ì—…ì„ ì§„í–‰í•˜ëŠ” ì†ë„ë„ ê°€ì¥ ë¹ ë¥´ë‹¤. ì›Œë‚™ì— ì‘ê³  ë¹ ë¥¸ ë°±ì—…ì´ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë°±ì—…ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ í•œ ì‹œê°„ì— í•œ ë²ˆ ì”© ë°±ì—…ì„ í•´ë„ ë¬´ë¦¬ê°€ ì—†ë‹¤!\nì´ë ‡ê²Œ ë³´ë©´ ì¦ë¶„ ë°±ì—…ì´ ì œì¼ ì¢‹ì•„ë³´ì´ì§€ë§Œ ë°±ì—…ë³¸ì´ ë‚ ì•„ê°€ì„œ ë³µêµ¬ë¥¼ í•´ì•¼ í•˜ê±°ë‚˜ í•  ë•Œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤. ì •êµí•œ ë°±ì—…ì„ ì§„í–‰í•œ ë§Œí¼ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë˜‘ê°™ì´ ìª¼ê°œì„œ ë°±ì—…ì„ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—. ë°˜ë©´ ì „ì²´ë°±ì—…ì€ ë˜‘ê°™ì´ í†µìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°ë§Œ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ê°€ì¥ ë¹ ë¥´ê²Œ ë³µêµ¬í•  ìˆ˜ ìˆë‹¤.\ní‘œë¡œ ì •ë¦¬í•˜ëŠ” ë°±ì—…ì˜ ì¥ë‹¨ì  [Picture 5] ë°±ì—…ì˜ ì¥ë‹¨ì  MySQLì˜ ë°±ì—… ì»¤ë§¨ë“œ ë°±ì—… ì»¤ë§¨ë“œëŠ” DBì„œë²„ì— ì§ì ‘ ë“¤ì–´ê°€ì„œ ì‹¤í–‰í•´ì•¼ í•œë‹¤. (DML/DDL/DCL ì²˜ëŸ¼ DB ì½˜ì†”ì°½ì—ì„œ ì‹¤í–‰ ë¶ˆê°€)\në°±ì—…í•˜ê¸°\n1 2 3 4 5 6 7 8 9 \u0026lt;-- ì•„ë˜ì— ë‚˜ì˜¤ëŠ” # ëŠ” ë¦¬ëˆ…ìŠ¤ í”„ë¡¬í”„íŠ¸ ì…ë‹ˆë‹¤. ex) root# --\u0026gt; \u0026lt;-- DB ë°±ì—… --\u0026gt; # mysqldump -uê³„ì¡ -píŒ¨ìŠ¤ì›Œë“œ ë³µì‚¬í• _DB_ì´ë¦„ \u0026gt; file_name.sql # mysqldump -uroot -p1234 mine \u0026gt; /etc/var/log/temp/my_backup.sql \u0026lt;-- Table ë°±ì—… --\u0026gt; # mysqldump -uê³„ì • -píŒ¨ìŠ¤ì›Œë“œ DB_ì´ë¦„ Table_ì´ë¦„ \u0026gt; file_name.sql # mysqldump -uroot -p1234 mine mine_table \u0026gt; /etc/var/log/temp/my_table_backup.sql ë³µì›í•˜ê¸°\n1 2 3 4 5 6 7 \u0026lt;-- DB ë³µì› --\u0026gt; # mysql -uê³„ì • -píŒ¨ìŠ¤ì›Œë“œ ë³µì›í• _DB_ì´ë¦„ \u0026lt; file_name.sql # mysql -uroot -p1234 mine \u0026lt; /etc/var/log/temp/my_backup.sql \u0026lt;-- Table ë³µì› --\u0026gt; # mysql -uê³„ì • -píŒ¨ìŠ¤ì›Œë“œ DB_ì´ë¦„ Table_ì´ë¦„ \u0026lt; file_name.sql # mysql -uroot -p1234 mine mine_table \u0026lt; /etc/var/log/temp/my_table_backup.sql Linux Mysql DB Migration ì¶”í›„ì— ìˆì„ DB ì´ì „ ì‘ì—…ì„ ìœ„í•´ ë¦¬ëˆ…ìŠ¤ í™˜ê²½ì—ì„œ í•œ ì„œë²„(old server)ì—ì„œ ë‹¤ë¥¸ ì„œë²„(new server)ë¡œ ë””ë¹„ë¥¼ ì˜®ê¸°ëŠ” ë°©ë²•ì„ ì¶”ê°€ë¡œ ì•Œì•„ë´¤ë‹¤.\nì„ í–‰ ì‘ì—…\nDB ë°±ì—… (ìœ„ í•­ëª©ì˜ DB ë°±ì—… Command ì‚¬ìš©) ë°±ì—…í•œ sql íŒŒì¼ì„ FTP ë“±ì„ ì´ìš©í•´ new serverë¡œ ì „ë‹¬ new serverì—ì„œ ì§„í–‰í•˜ëŠ” ì‘ì—…\n1 2 3 4 5 6 \u0026lt;-- in mysql server --\u0026gt; mysql \u0026gt; create database db_name mysql \u0026gt; quit \u0026lt;-- in mysql server host --\u0026gt; # mysql -uê³„ì • -píŒ¨ìŠ¤ì›Œë“œ db_name \u0026lt; file_name.sql ","date":"2021-07-21","permalink":"https://leeleelee3264.github.io/post/2021-07-21-mysql-backup/","tags":["Infra"],"title":"SQL ë°±ì—… ì¢…ë¥˜"},{"content":"\nMySQLì˜ Join \u0026amp; Join Setì— ëŒ€í•´ì„œ ë‹¤ë£¬ë‹¤.\nIndex\nHistory of Join Join Set Reference ë¦¬ë·° í›„ì— ì•Œê²Œëœ ë¶€ë¶„ë“¤ ë¹„ë“±ê°€ ì¡°ì¸. Oracleì—ì„œëŠ” ì§€ì›ì„ í•˜ëŠ”ë° Mysqlì´ ì§€ì›ì„ í•˜ëŠ”ì§€ ëª¨ë¥´ê² ë‹¤. ì¼ë°˜ ì¡°ì¸ì´ë‘ ë¹„ë“±ê°€ ì¡°ì¸ ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì§œì„œ ê²°ê³¼ë¥¼ ë³´ê³  ë¹„êµí•´ì•¼ í•  ê²ƒ ê°™ë‹¤ [ë¹„ë“±ê°€ ì¡°ì¸] ë‚˜ì¤‘ì— ì¿¼ë¦¬ ì¶”ê°€í•˜ê¸°. í…Œì´ë¸” ì¡°ì¸ ë°©ì‹ì´ ì›ë˜ for loopì„ ëŒë¦¬ëŠ” ê±´ ì•Œê³ ìˆì—ˆì§€ë§Œ ë” ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ì´ ìˆë‹¤. [í…Œì´ë¸” ì¡°ì¸ ì•Œê³ ë¦¬ì¦˜] History of Join Join í…Œì´ë¸”ê³¼ í…Œì´ë¸”ì„ ë¬¶ì–´ì„œ ë³´ì—¬ì£¼ëŠ” Join ì»¤ë§¨ë“œëŠ” ê´€ê³„ë¥¼ í•µì‹¬ìœ¼ë¡œ í•˜ëŠ” RDBMSì—ì„œëŠ” ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ê¸°ëŠ¥ì´ë‹¤. í•œ í…Œì´ë¸”ì— ëª¨ë“  ì •ë³´ë¥¼ ë„£ì–´ë†¨ë‹¤ë©´ Joinì„ ì“¸ í•„ìš”ê°€ ì—†ê² ì§€ë§Œ ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ ì •ê·œí™”ë¥¼ ê±°ì¹˜ê³  ë°ì´í„° ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ í…Œì´ë¸”ì„ ìª¼ê°œë‹¤ë³´ë©´ Joinì„ ê¼­ ì¨ì•¼ í•œë‹¤. ì„œë¸Œ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ì„œ ì¡°ì¸ì„ í‰ë‚´ë‚¼ ìˆ˜ ìˆë‹¤ê³  í•˜ëŠ”ë°, ì„œë¸Œì¿¼ë¦¬ íŠ¹ì„±ìƒ ì¿¼ë¦¬ê°€ ë” ì–´ë µê³  ì§€ì €ë¶„í•´ì§€ì§€ ì•Šì„ê¹Œ?\nJoin? Inner Join?\nJoinê³¼ Inner Joinì€ ë™ì¼í•œ ê¸°ëŠ¥ì¸ë°, ì¿¼ë¦¬ë¥¼ ì½ì„ ë•Œ ë” ëª…í™•í•œ ëŠë‚Œì„ ì£¼ê¸° ìœ„í•´ Inner Joinì´ë¼ê³  ì“´ë‹¤ê³  í•œë‹¤. ë™ì¼í•˜ê²Œ Left Joinê³¼ Left Outer Join, Right Joinê³¼ Right Outer Joinì€ ë™ì¼í•œ ê¸°ëŠ¥ì´ë‹¤.\nì§€ê¸ˆì€ ì´ë ‡ê²Œ í•„ìˆ˜ê°€ ë˜ì–´ë²„ë¦° Joinì´ ì‚¬ì‹¤ì€ sqlì´ ë§Œë“¤ì–´ì¡Œì„ ë•Œ ë¶€í„° ìˆë˜ ê¸°ëŠ¥ì€ ì•„ë‹ˆë¼ê³  í•œë‹¤.\nHistory of Join [Picture 1] history of join [Picture 1] ì—ì„œ ë³´ëŠ” ê²ƒ ì²˜ëŸ¼ Joinì€ 1992ë…„ì— ë§Œë“¤ì–´ì§„ SQL-92 standard ì—ì„œ ë§Œë“¤ì–´ì¡Œë‹¤. 92ëŠ” Joinë¿ë§Œ ì•„ë‹ˆë¼ DDLì¸ ALTERê³¼ DROPë„ í¬í•¨ì´ ë˜ì–´ìˆê³ , í•™êµì—ì„œ ì œì¼ ë§ì´ ê°€ë¥´ì¹˜ê³  ì‹¤ë¬´ì—ì„œë„ ì œì¼ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤.\nJoinì´ ì—†ì—ˆì„ ë•Œì˜ Join ë°©ë²• ì´ì²˜ëŸ¼ Joinì´ ì—†ì„ë•Œë„ Joinì„ í‰ë‚´ë‚´ëŠ” ë°©ë²•ì€ ìˆì—ˆëŠ”ë° Fromì— ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì¨ì£¼ë©´ ëœë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ Aì™€ B í…Œì´ë¸”ì„ í•©ì¹˜ë ¤ê³  í•  ë•Œ From ì— Aì™€ Bë¥¼ ì¨ì£¼ë©´ ë‘ í…Œì´ë¸”ì„ í•©ì¹  ë•Œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë“¤ì´ ë‹¤ ë‚˜ì˜¤ê³ , ONì—ì„œ A.id = B.a_id í•˜ëŠ” ê²ƒì²˜ëŸ¼ WHERE ì¡°ê±´ì—ì„œ A.id = B.a_idë¥¼ í•˜ë©´ Inner Joinì„ í•œ ê²ƒê³¼ ë™ì¼í•œ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.\nfromê³¼ join ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 # Multiple Table In From SELECT * FROM orders O, users U WHERE user_id = U.id # Join SELECT * FROM orders O INNER JOIN users U ON O.user_id = U.id # í…Œì´ë¸” ë³„ì¹­ì„ ì‚¬ìš©í–ˆì„ ë•Œ ë§¨ë‚  O.user_id, U.id ì´ëŸ° ì‹ìœ¼ë¡œ ëª¨ë“  Columnì— í…Œì´ë¸” ëª…ì‹œë¥¼ í•´ì¤¬ëŠ”ë° # ì•Œê³ ë³´ë‹ˆ í•œ ìª½ í…Œì´ë¸”ì—ë§Œ ì¡´ì¬í•˜ëŠ” Columnì´ë©´ ë”°ë¡œ ëª…ì‹œë¥¼ ì•ˆ í•´ì¤˜ë„ ëœë‹¤! # ê·¸ëŸ°ë° í•˜ë‚˜í•˜ë‚˜ ëª…ì‹œë¥¼ í•´ì£¼ëŠ” ìª½ì´ ì¿¼ë¦¬ë¥¼ í•œ ëˆˆì— íŒŒì•…í•˜ê¸° ë” ìš©ì´í•´ë³´ì¸ë‹¤. Where ì¡°ê±´ì„ ê±¸ì§€ ì•Šì•„ì„œ ordersì™€ usersë¥¼ í•©ì³¤ì„ ë•Œ ë‚˜ì˜¤ëŠ” ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ê°€ ë‹¤ ë‚˜ì™”ë‹¤. ì´ê±¸ Cross Join ë˜ëŠ” Cartesian Joinì´ë¼ê³  í•œë‹¤. Joinì—°ì‚°ì€ í•­ìƒ ì¹´í‹°ì „ Join ê³¼ ë™ì¼í•˜ê±°ë‚˜ ì‘ì€ ìˆ˜ì˜ ê²°ê³¼ë¥¼ ë¦¬í„´í•œë‹¤.\n[Picture 2] Cross Join Cross Join ê²°ê³¼\në”ë³´ê¸° id user_id cost id name number addr active 4 100 33 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 4 100 33 200 Lee 01087654321 ê²½ê¸°ë„ N 4 100 33 300 Jamie 403926999 Calgary Alberta Canda N 5 100 11 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 5 100 11 200 Lee 01087654321 ê²½ê¸°ë„ N 5 100 11 300 Jamie 403926999 Calgary Alberta Canda N 6 200 2 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 6 200 2 200 Lee 01087654321 ê²½ê¸°ë„ N 6 200 2 300 Jamie 403926999 Calgary Alberta Canda N 7 200 100 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 7 200 100 200 Lee 01087654321 ê²½ê¸°ë„ N 7 200 100 300 Jamie 403926999 Calgary Alberta Canda N 8 100 20 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 8 100 20 200 Lee 01087654321 ê²½ê¸°ë„ N 8 100 20 300 Jamie 403926999 Calgary Alberta Canda N 9 400 200 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 9 400 200 200 Lee 01087654321 ê²½ê¸°ë„ N 9 400 200 300 Jamie 403926999 Calgary Alberta Canda N Where ì¡°ê±´ì„ ê±´ Joinê³¼ ë™ì¼í•œ ê²°ê³¼\nid user_id cost id name number addr active 4 100 33 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 5 100 11 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 6 200 2 200 Lee 01087654321 ê²½ê¸°ë„ N 7 200 100 200 Lee 01087654321 ê²½ê¸°ë„ N 8 100 20 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y ê·¸ëŸ¼ Joinì„ ì•ˆ ì¨ë„ ë˜ë‚˜? ì‚¬ì‹¤ Joinê³¼ Multiple Table In Fromì˜ í¼í¬ë¨¼ìŠ¤ëŠ” ë™ì¼í•˜ë‹¤. í•˜ì§€ë§Œ ìš”ì¦˜ì€ ëª¨ë‘ê°€ Joinì„ ì“°ëŠ” ì¶”ì„¸ì´ê³ , Joinì„ ì‚¬ìš©í•´ì„œ ê¸°ë³¸ì ìœ¼ë¡œ í”¼í•´ì§€ëŠ” ì˜¤ë¥˜ë“¤ì´ ìˆìœ¼ë‹ˆ ê°€ëŠ¥í•˜ë©´ Joinì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.\nJoinì˜ ì¥ì  1 Joinì€ í…Œì´ë¸”ì„ í•©ì¹˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¡°ê±´ê³¼ ê°’ì„ ë½‘ì•„ë‚´ê¸° ìœ„í•œ ì¡°ê±´ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.\nJoinì˜ í…Œì´ë¸” ê²°í•© ì¡°ê±´ì€ ONì— ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— WHEREì—ëŠ” ì •ë§ ê°’ì„ ë½‘ì•„ë‚´ê¸° ìœ„í•œ ì¡°ê±´ë§Œ ì¨ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì— ë³µì¡í•œ WHERE ì¡°ê±´ì´ ë“¤ì–´ê°„ë‹¤ê³  í•´ë„ í—·ê°ˆë¦¬ì§€ ì•ŠëŠ”ë‹¤.\nì—¬ëŸ¬ ê°’ì„ ë½‘ëŠ” ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 # 2021-07-13ì˜ ë°ì´í„°ë¥¼ ë½‘ì•„ë‚¸ë‹¤ê³  ê°€ì • #Join SELECT * FROM orders O INNER JOIN users U ON O.user_id = U.id WHERE O.sold_date = \u0026#39;2021-07-13\u0026#39; # Multiple Table In From SELECT * FROM orders O, users U WHERE O.user_id = U.id AND O.sold_date = \u0026#39;2021-07-13\u0026#39; Joinì˜ ì¥ì  2 ì—¬ëŸ¬ê°œì˜ í…Œì´ë¸”ì„ í•©ì¹  ë•Œ Joinì´ í›¨ì”¬ ìš©ì´í•˜ê³ , Multiple Table In Fromì€ ì¬ì•™ì´ ëœë‹¤.\nì—¬ëŸ¬ ê°œì˜ í…Œì´ë¸” í•©ì¹˜ëŠ” ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 # Join SELECT * FROM orders O INNER JOIN users U ON O.user_id = U.id INNER JOIN point P ON O.id = P.order_id # Multiple Table In From # í…Œì´ë¸”ì´ í•©ì³ì§ˆë•Œë§ˆë‹¤ ë¬´ê±°ì›Œì§€ëŠ” WHERE ì¡°ê±´ SELECT * FROM orders O, users U , point P WHERE O.user_id = U.id AND O.id = P.order_id Joinì˜ ì¥ì  3, 4 Left Join, Right Join, Full Outer Joinì˜ ì§€ì›ìœ¼ë¡œ ë‚´ê°€ ì›í•˜ëŠ” í˜•íƒœë¡œ í…Œì´ë¸”ì„ í•©ì¹˜ê¸°ê°€ ë” ì¢‹ë‹¤. ê¸°ë³¸ Joinê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Multiple Table In From ë¥¼ ì‚¬ìš©í•´ì„œëŠ” ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ë½‘ì•„ë‚´ê¸° í˜ë“¤ê±°ë‚˜, ë” ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§œì•¼ í•œë‹¤. Joinì„ ì‚¬ìš©í•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ Cross Join ë¬¸ì œë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤. Join Set ìœ„ì—ì„œ ë§í•œ ê²ƒ ì²˜ëŸ¼ Joinì€ ì—¬ëŸ¬ê°€ì§€ ê²°í•© í˜•íƒœë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ìƒí™©ì— ë§ì¶° í…Œì´ë¸”ë“¤ì„ ì¡°í•©í•´ì„œ ì§‘í•©ì„ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆë‹¤. ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ ì •ë§ ë‹¤ì–‘í•œ ì§‘í•©ì„ ë§Œë“¤ ìˆ˜ ìˆì—ˆëŠ”ë° ì‹¤ë¬´ë¥¼ í•˜ë©´ì„œ í‰ì†Œì— ì“¸ ì¼ì´ ì œì¼ ë§ì•˜ë˜ Join í˜•íƒœ 4ê°œë¥¼ ê³¨ë¼ì„œ ì •ë¦¬í–ˆë‹¤.\nì˜ˆì‹œë¡œ ì‚¬ìš©í•  ë°ì´í„°\nusers (ì‚¬ìš©ì) id name number addr active 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 200 Lee 01087654321 ê²½ê¸°ë„ N 300 Jamie 403926999 Calgary Alberta Canda N orders (ì£¼ë¬¸) id user_id cost 4 100 33 5 100 11 6 200 2 7 200 100 8 100 20 9 400 200 ìœ„ì˜ ì˜ˆì‹œ ë°ì´í„°ë¡œ [Picture 3] ì˜ Join setì„ ë‹¤ë¤„ë³´ë„ë¡ í•˜ê² ë‹¤.\n[Picture 3] Join Set Inner Join Joinì¤‘ì—ì„œ ì œì¼ ë§ì´ ì“°ëŠ” ê¸°ë³¸í˜• JOIN.\në‘ í…Œì´ë¸”ì—ì„œ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ë°ì´í„°ë¥¼ êº¼ë‚´ì˜¬ ë•Œ ì‚¬ìš©í•œë‹¤. table1 ì„ ê¸°ì¤€ìœ¼ë¡œ table2ì— ìˆëŠ” ê°’ì´ë¼ê³  í•´ë„ table1ì— ì—†ìœ¼ë©´ ê°’ì´ ëˆ„ë½ëœë‹¤. ì´ëŸ°ë•ŒëŠ” ê³µí†µë¶„ëª¨ë§Œ ë½‘ì•„ì˜¤ëŠ” Inner joinì´ ì•„ë‹ˆë¼ ì»¤ë²„ í•´ì£¼ëŠ” ë²”ìœ„ê°€ ë„“ì€ ë‹¤ë¥¸ JOIN ì—°ì‚°ë“¤ì„ ì¨ì•¼ í•œë‹¤.\nLeft Join ì™¼ìª½ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•©ì¹˜ëŠ” JOIN.\nJoin ì—°ì‚°ì—ì„œ ê¸°ì¤€ì´ ë˜ëŠ” í…Œì´ë¸”ì´ table1ì´ë‹¤ ë³´ë‹ˆê¹Œ ì¿¼ë¦¬ë¥¼ ì§¤ ë•Œë„ ë°ì´í„°ë¥¼ ë½‘ì•„ì˜¤ëŠ” ì¤‘ì‹¬ì´ ë˜ëŠ” í…Œì´ë¸”ì„ table1 ìë¦¬ì— ë‘ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ table2ì˜ ë°ì´í„° ì¡´ì¬ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ì¼ë‹¨ table1ì— ìˆëŠ” ë°ì´í„°ëŠ” ë‹¤ ë½‘ì•„ì˜¤ëŠ” Left Joinì„ Right Join ë³´ë‹¤ ë§ì´ ì‚¬ìš©í•œë‹¤.\nLeft Join ì˜ˆì‹œ\n1 2 3 SELECT * FROM users u LEFT JOIN orders o ON u.id = o.user_id; Left Join ê²°ê³¼\nid name number addr active id user_id cost 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 4 100 33 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 5 100 11 200 Lee 01087654321 ê²½ê¸°ë„ N 6 200 2 200 Lee 01087654321 ê²½ê¸°ë„ N 7 200 100 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 8 100 20 300 Jamie 403926999 Calgary Alberta Canda N \\0 \\0 \\0 Orderì— 300ë²ˆ ì†ë‹˜ì´ ì£¼ë¬¸í•œ ë°ì´í„°ê°€ ì—†ë‹¤ê³  í•´ë„ table1ë¡œ users ì„ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì— ê²°ê³¼ì—ì„œë„ 300ë²ˆì„ ë³´ì—¬ì¤€ë‹¤.\nRight Join ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•©ì¹˜ëŠ” JOIN.\nLeft Joinì´ ìˆëŠ”ë° Right Joinì´ ì™œ í•„ìš”í• ê¹Œ? Left Join í•˜ë‚˜ë§Œ ìˆê³  í…Œì´ë¸” ìœ„ì¹˜ë§Œ ê·¸ë•Œê·¸ë•Œ ë°”ê¿”ì£¼ë©´ ì•ˆë˜ë‚˜ í•˜ëŠ” ì˜ì‹¬ì´ ìˆì—ˆë‹¤. ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ ë‚˜ë‘ ë˜‘ê°™ì€ ìƒê°ì„ í•œ ì‚¬ëŒì´ ìˆì—ˆëŠ”ë° ê±°ê¸°ì— ë‹¬ë¦° ë‹µë³€ì„ ë³´ë‹ˆ í…Œì´ë¸” 2ê°œë¥¼ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” í…Œì´ë¸” ìˆœì„œë¥¼ ë°”ê¿”ê°€ë©´ì„œ Joinì—°ì‚°ì„ í•˜ë©´ ë˜ëŠ”ë° ì—¬ëŸ¬ê°œì˜ í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ë©´ ê·¸ëŸ´ ìˆ˜ ì—†ì—ˆë‹¤.\nRight Join ì˜ˆì‹œ\n1 2 3 SELECT * FROM users u RIGHT JOIN orders o ON u.id = o.user_id; Right Join ê²°ê³¼\nid name number addr active id user_id cost 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 4 100 33 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 5 100 11 200 Lee 01087654321 ê²½ê¸°ë„ N 6 200 2 200 Lee 01087654321 ê²½ê¸°ë„ N 7 200 100 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 8 100 20 \\0 \\0 \\0 \\0 \\0 9 400 200 Left Joinì„ í–ˆì„ë•Œì™€ëŠ” ë‹¤ë¥´ê²Œ, usersì—ì„œë§Œ ì¡´ì¬í•˜ë˜ 300ë²ˆ ìœ ì €ì— ëŒ€í•œ ì •ë³´ëŠ” ì‚¬ë¼ì¡Œê³  ordersì—ë§Œ ì¡´ì¬í•˜ëŠ” 400ë²ˆ ìœ ì €ì— ëŒ€í•œ êµ¬ë§¤ ë‚´ì—­ì´ ë‚˜ì™”ë‹¤.\nFull Outer Join Full Outer Join = 1 Time of Inner Join + Left Join + Right Join\ní•©ì§‘í•¨ì„ ìœ„í•œ Joinì´ë‹¤. í…Œì´ë¸” 1ê³¼ í…Œì´ë¸” 2ë¥¼ í•©ì¹  ë•Œ ìƒê¸°ëŠ” ì¤‘ë³µì„ ì²˜ë¦¬í•˜ê³  ëŒë ¤ì¤€ ê°’ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ì•„ì‰½ê²Œë„ Mysql ì—ì„œëŠ” Full Outer Joinì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë° Left Joinê³¼ Right Joinì„ ì‚¬ìš©í•´ì„œ ë˜‘ê°™ì€ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤.\nMySQL Full Outer Join ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 SELECT * FROM users U LEFT JOIN orders O ON U.id = O.user_id UNION SELECT * FROM users U RIGHT JOIN orders O ON U.id = O.user_id MySQL Full Outer Join ê²°ê³¼\nid name number addr active id user_id cost 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 4 100 33 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 5 100 11 200 Lee 01087654321 ê²½ê¸°ë„ N 6 200 2 200 Lee 01087654321 ê²½ê¸°ë„ N 7 200 100 100 Peter 01012345678 ëŒ€ì „ê´‘ì—­ì‹œ Y 8 100 20 300 Jamie 403926999 Calgary Alberta Canda N \\0 \\0 \\0 \\0 \\0 \\0 \\0 \\0 9 400 200 ì¬ë¯¸ìˆëŠ” ì ì€ Left Joinê³¼ Right Joinì„ í–ˆì„ ë•Œ ê°ê° Inner Joinì„ í•œ ê²ƒ ê³¼ ê°™ì€ êµì§‘í•© ê°’ì´ ìƒê¸°ëŠ”ë° UNIONì„ í•´ì„œ ì¤‘ë³µì„ ì œê±°í–ˆë‹¤ëŠ” ì ì´ë‹¤! ë§Œì•½ UNION ALLì„ ì‚¬ìš©í–ˆìœ¼ë©´ ì¤‘ë³µì´ ê·¸ëŒ€ë¡œ í¬í•¨ëœë‹¤.\nReference [Difference Between Join and Inner Join] [The History of SQL Standards] [What\u0026rsquo;s the Difference Between Having Multiple Tables in FROM and Using JOIN?] [Why do we have Left Join and Right Join in SQL, if we can use Left Join to get same result as of Right Join by just changing the position of tables?] ","date":"2021-07-14","permalink":"https://leeleelee3264.github.io/post/2021-07-14-mysql-history-of-join-and-join-set/","tags":["Infra"],"title":"MySQL Join \u0026 Join Set"},{"content":"\nMySQL String í•¨ìˆ˜ì™€ ì°¸ì¡° ë¬´ê²°ì„± (Referential Integrity) ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.\nIndex\nMySQLì—ì„œ String í•¨ìˆ˜ ì°¸ì¡° ë¬´ê²°ì • ì†Œì†Œí•œ í•˜ì´ë”” SQL \u0026amp; markdown íŒ Reference ë¦¬ë·° í›„ì— ì•Œê²Œëœ ë¶€ë¶„ë“¤ [Markdown ê°ì£¼/ë¯¸ì£¼ ë‹¬ê¸°] 1 SUBSTRING_INDEX(ë¬¸ìì—´, êµ¬ë¶„ì, ê°€ì ¸ì˜¬ êµ¬ë¬¸ ê°¯ìˆ˜) 1 2 3 4 SELECT SUBSTRING_INDEX(addr, \u0026#39; \u0026#39;, 2) FROM users; # ê²½ê¸°ë„ ì„±ë‚¨ì‹œ íŒêµë™ ëŒ€ì™•íŒêµë¡œ --\u0026gt; ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ê¹Œì§€ ë‚˜ì˜´ ë„ë©”ì¸ ë¬´ê²°ì„±ê³¼ ê³ ìœ  ë¬´ê²°ì„±(Unique Column Values) ë„ë©”ì¸ ë¬´ê²°ì„±ì€ ë§Œì•½ Genderë¥¼ í‘œí˜„ í•œë‹¤ê³  í–ˆì„ ë•Œ ë‚¨ì„±/ì—¬ì„±/ë¬´ì„± ë“± ë¯¸ë¦¬ ì •ì˜ê°€ ë˜ì–´ìˆëŠ” ë„ë©”ì¸ (conventionê°™ì€ ëŠë‚Œ)ì— ì†í•œ ê°’ì´ ë“¤ì–´ê°€ì•¼ í•œë‹¤. ê³ ìœ  ë¬´ê²°ì„±ì€ rowì— ì†í•´ìˆëŠ” íŠ¹ì •í•œ column ë“¤ì´ ìœ ë‹ˆí¬í•œ ê³ ìœ ì˜ ê°’ì¼ë•Œë§Œ ì—…ë°ì´íŠ¸ì™€ ì¸ì„œíŠ¸ë¥¼ í—ˆê°€í•œë‹¤ëŠ” ëœ»ì´ë‹¤. UNIQUE key constraintsì´ ì´ ë¬´ê²°ì„±ì„ ì§€í‚¤ëŠ” ì—­í• ì„ í•œë‹¤. A unique value rule defined on a column (or set of columns) allows the insert or update of a row only if it contains a unique value in that column (or set of columns) \u0026hellip; That is, no two rows of a table have duplicate values in a specified column or set of columns.\nMySQLì—ì„œ String í•¨ìˆ˜ [Picture 1] MySQL String í•¨ìˆ˜ 1 [Picture 2] MySQL String í•¨ìˆ˜ 2 Example LENGTH(), CHAR_LENGTH() LENGTH ëŠ” ë°”ì´íŠ¸ë¡œ ê¸€ìë¥¼ ì¹´ìš´íŠ¸í•˜ê³  CHAR_LENGHTëŠ” ê¸€ì ìì²´ì˜ ê¸¸ì´ë¥¼ ì¹´ìš´íŠ¸í•œë‹¤. í•œê¸€ì˜ ê²½ìš° 1ê¸€ìê°€ 2ë°”ì´íŠ¸ë¼ì„œ ì œì´ë¯¸ ì„¸ê¸€ìë©´ 6ë°”ì´íŠ¸ê°€ ë‚˜ì˜¬ ê²ƒ ê°™ì€ë° DBì— ì„¤ì •ëœ utf8 charsetì€ í•œê¸€ì„ 3ë°”ì´íŠ¸ë¡œ ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ì´ 9ë°”ì´íŠ¸ê°€ ë‚˜ì™”ë‹¤.\nLENGTH(), CHAR_LENGTH() ì˜ˆì œ\n1 2 3 4 5 6 7 SELECT NAME, LENGTH(NAME), CHAR_LENGTH(NAME) FROM users # where ì¡°ê±´ì—ë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì„œ ê²€ìƒ‰ì„ í•  ë•Œ ì‘ìš©í•´ì„œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤. SELECT NAME FROM users WHERE CHAR_LENGTH(NAME) \u0026gt; 3 LENGTH(), CHAR_LENGTH() ê²°ê³¼\nNAME LENGTH(NAME) CHAR_LENGTH(NAME) Peter 5 5 ì œì´ë¯¸ 9 3 RIGHT(), LEFT(), MID() RIGHT(), LEFT(), MID() ëŠ” íŒŒì´ì¬ String ì—°ì‚°ê³¼ ë™ì¼í•´ì„œ ë†€ëë‹¤. ì–´ë–»ê²Œ í™œìš©ì„ í• ê¹Œ í–ˆëŠ”ë° whereë¡œ ê²€ìƒ‰ì„ í•˜ê¸°ì—ëŠ” ì´ë¯¸ ë” í¸í•œ likeê°€ ë‹¤ ì»¤ë²„ë¥¼ í•´ì£¼ê³  ìˆë‹¤. whereì ˆì— ê±¸ê¸°ë³´ë‹¤ëŠ” select ì ˆì— ê±¸ì–´ì„œ ê°„ë‹¨í•˜ê²Œ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ê³  ë¹„ì‹ë³„í™” í•˜ëŠ” ê²ƒì— ì‚¬ìš©í•˜ë©´ ì¢‹ì•„ë³´ì¸ë‹¤.\nì˜ˆì œë¥¼ ì‘ì„±í•˜ë‹¤ë³´ë‹ˆ ì´ë˜ì €ë˜ ê°„í¸í•˜ê²Œ ì“°ê¸° ì¢‹ì•„ë³´ì´ëŠ” ìœ í‹¸ì„± í•¨ìˆ˜ê°™ë‹¤. SUBSTRING()ê³¼ SUBSTR()ë„ ë¹„ìŠ·í•œ ë§¥ë½ì—ì„œ ì‚¬ìš©ì´ ë˜ë©´ ì¢‹ì„ ê²ƒ ê°™ì€ë° ì´ê±´ ì¢€ ë” ì •êµí•œ ì¡°ì‘ì„ í•  ë•Œ ì´ìš©!\nRIGHT(), LEFT(), MID() ì˜ˆì œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 SELECT NAME FROM users WHERE LEFT(NAME, 1) = \u0026#39;ì´\u0026#39;; # likeë¡œ ë” ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤. SELECT NAME FROM users WHERE NAME LIKE (\u0026#39;ì´%\u0026#39;); # concat()ì—°ì‚°ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì„œ ë°ì´í„° ë¹„ì‹ë³„í™”..? SELECT concat(left(NAME,1), \u0026#39;**\u0026#39;) FROM users WHERE LEFT(NAME, 1) = \u0026#39;ì´\u0026#39;; # Replace() ì—°ì‚°ê³¼ í•¨ê»˜ ì‚¬ìš©í•´ë„ ê°€ëŠ¥! SELECT replace(name, RIGHT(NAME, 2), \u0026#39;**\u0026#39;) FROM users WHERE LEFT(NAME, 1) = \u0026#39;ì´\u0026#39;; # ì‘ì •í•˜ê³  ë§Œë“¤ë©´ ì´ë ‡ê²Œ data formatì„ ì”Œì›Œì¤„ ìˆ˜ ìˆëŠ”ë° ì—¬ëŸ¬ë²ˆ ì¨ì•¼ í•œë‹¤ë©´ ì—‘ì…€ì—ì„œ ìˆ˜ì •ì„ í•˜ê±°ë‚˜ #í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ì •ê·œì‹ì„ ì…í˜€ì£¼ëŠ” ê²Œ ë” ê°„í¸í•˜ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤. SELECT concat(left(number,3), \u0026#39;-\u0026#39;, MID(NUMBER, 4, 4), \u0026#39;-\u0026#39;, RIGHT(NUMBER, 4)) FROM users WHERE LEFT(NAME, 1) = \u0026#39;ì´\u0026#39;; RIGHT(), LEFT(), MID() ê²°ê³¼\nconcat(left(number,3), \u0026lsquo;-\u0026rsquo;, MID(NUMBER, 4, 4), \u0026lsquo;-\u0026rsquo;, RIGHT(NUMBER, 4)) number 010-8765-4321 01087654321 INSERT() INSERT() ì˜ˆì œ\n1 2 3 4 5 6 SELECT INSERT(NAME, CHAR_LENGTH(NAME), 5, \u0026#39; ê³ ê°ë‹˜\u0026#39;) FROM users # concatìœ¼ë¡œ í•´ê²° SELECT CONCAT(NAME, \u0026#39; ê³ ê°ë‹˜\u0026#39;) FROM users; INSERT() ê²°ê³¼\nINSERT(NAME, CHAR_LENGTH(NAME), CHAR_LENGTH(NAME), \u0026rsquo; ê³ ê°ë‹˜\u0026rsquo;) Pete ê³ ê°ë‹˜ ì œì´ ê³ ê°ë‹˜ Peter ê³ ê°ë‹˜ê³¼ ì œì´ë¯¸ ê³ ê°ë‹˜ì„ ë½‘ê³  ì‹¶ì—ˆìœ¼ë‚˜ ë‚´ ì˜ë„ëŒ€ë¡œ ë‚˜ì˜¤ì§€ ì•Šì•˜ë‹¤. ë°›ëŠ” ì¸ìê°€ INSERT(ë¬¸ìì—´, ì‹œì‘ìœ„ì¹˜, ê¸¸ì´, ìƒˆë¡œìš´ ë¬¸ìì—´ ìˆœì„œì¸ë° ê¸¸ì´ê°€ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. ìŠ¤íŠ¸ë§ì„ ì¡°ì‘í•  ë•ŒëŠ” INSERT()ë¡œ í•˜ë ¤ í•˜ì§€ ë§ê³  CONCAT() ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ëë‚´ì•¼ í•  ê²ƒ ê°™ë‹¤.\nLPAD(), RPAD() LPADëŠ” ì™¼ìª½ìœ¼ë¡œ, RPADëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•´ë‹¹ ê¸¸ì´ ë§Œí¼ ì…ë ¥ëœ ê¸€ìë“¤ì„ ì±„ì›Œì£¼ëŠ” ê¸°ëŠ¥. ë‹¨ìˆœí•˜ê²Œ ë³´ë©´ ê¸€ììˆ˜ë¥¼ ë§ì¶°ì„œ ì±„ì›Œì£¼ëŠ” ê¸°ëŠ¥ì¸ë° í™”ë©´ì—ì„œë‚˜ ë¬¸ì„œì—ì„œ ê¸€ìë“¤ì´ ëª¨ë‘ ê°™ì€ ê¸€ììˆ˜ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•  ë•Œ ì“¸ ì¼ì´ ìˆì–´ë³´ì¸ë‹¤. RPAD(NAME, 10, ' ') ë¡œ ìë¦¿ìˆ˜ë§Œ ì±„ì›Œì¤„ ìˆ˜ ë„ ìˆë‹¤.\nLPAD(), RPAD() ì˜ˆì œ\n1 2 SELECT RPAD(NAME, 10, \u0026#39;*\u0026#39;), LPAD(NAME, 10, \u0026#39;\u0026amp;\u0026#39;) FROM users; LPAD(), RPAD() ê²°ê³¼\nRPAD(NAME, 10, \u0026lsquo;*\u0026rsquo;) LPAD(NAME, 10, \u0026lsquo;\u0026amp;\u0026rsquo;) Peter***** \u0026amp;\u0026amp;\u0026amp;\u0026amp;\u0026amp;Peter ì œì´ë¯¸******* \u0026amp;\u0026amp;\u0026amp;\u0026amp;\u0026amp;\u0026amp;\u0026amp;ì œì´ë¯¸ PADë¼ëŠ” ë‹¨ì–´ê°€ ìµìˆ™í•´ì„œ ì–´ë””ì„œ ë“¤ì–´ë´¤ë‚˜ í–ˆëŠ”ë° ì €ë²ˆ íšŒì°¨ì—ì„œ ì£¼ì„ë‹˜ì´ ë§ì”€í•˜ì…¨ë˜ dbì—”ì§„ì—ì„œ ê¸€ììˆ˜ ë¹„êµë¥¼ í•  ë•Œ CHARí˜•ì€ ì§€ì •ëœ ê¸€ììˆ˜ë¥¼ ë§ì¶°ì£¼ê¸° ìœ„í•´ ê·¸ë³´ë‹¤ ì§§ì€ ë‹¨ì–´ë“¤ì— ê³µë°±ì„ ì±„ì›Œì„œ ë¹„êµí•´ì¤€ë‹¤ëŠ” PAD Attributeì™€ ê°™ì€ ê¸°ëŠ¥ì´ì—ˆë‹¤.\n[Picture 3] PADì˜ ëœ» ì°¸ì¡° ë¬´ê²°ì • ê´€ê³„ë¥¼ ë§ºì€ í…Œì´ë¸”ë“¤ì˜ ë°ì´í„° ì‚¬ì´ì—ì„œ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ foreign keyë¥¼ ë§Œë“¤ ë•Œ ì°¸ì¡°ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì´ ë§Œë“¤ì–´ì§„ë‹¤. ê°•ì˜ë¥¼ ë“£ëŠ” ì²˜ìŒì—ëŠ” ì°¸ì¡°ë¬´ê²°ì„±ì´ ì™œ í•„ìš”í• ê¹Œ? ì™œ foreign keyë¥¼ ì‚¬ìš©í•˜ì§€? ë¼ëŠ” ì˜êµ¬ì‹¬ì´ ë“¤ì—ˆëŠ”ë° ë°ì´í„°ë¥¼ ì¼ê´€ì ìœ¼ë¡œ ê´€ë¦¬ í•œë‹¤ëŠ” ì„±ê²© ë•Œë¬¸ì— ì°¸ì¡°ë¬´ê²°ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë‹¤.\nforeign keyì˜ íŠ¹ì§• ë³¸í…Œì´ë¸”ì— ì—†ëŠ” ë°ì´í„°ë¥¼ sub í…Œì´ë¸” (ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”)ì— ë„£ì„ ìˆ˜ ì—†ë‹¤. ì´ íŠ¹ì„±ì´ë¼ë©´ í”„ë¡œê·¸ë˜ë°ì  ì˜¤ë¥˜ë¥¼ dbë‹¨ì—ì„œ ë§‰ì„ ìˆ˜ ë„ ìˆë‹¤. ë³¸í…Œì´ë¸”ì— ì—†ëŠ” ë°ì´í„°ë¡œ subì˜ foreign keyë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤. updateì™€ deleteì— cascade ì˜µì…˜ì„ ê±¸ì–´ë†¨ì„ ê²½ìš° ë³¸í…Œì´ë¸”ì— ë³€ê²½ì´ ìˆìœ¼ë©´ ì•„ë¬´ê²ƒë„ ì•ˆí•´ë„ sub í…Œì´ë¸”ì— ì•Œì•„ì„œ ë°˜ì˜ì„ í•´ì¤€ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ admin_userê°€ ë³¸í…Œì´ë¸”ì´ê³  admin_favoriteì´ sub í…Œì´ë¸”ì´ë©´ ì§ì› ì¤‘ í•˜ë‚˜ê°€ í‡´ì‚¬ë¥¼ í•˜ë©´ ë³¸í…Œì´ë¸”ì— deleteì„ í–ˆì„ë•Œ subí…Œì´ë¸”ì—ì„œë„ ìë™ìœ¼ë¡œ deleteì´ ë˜ì–´ì„œ ë”°ë¡œ ê´€ë¦¬ë¥¼ í•  í•„ìš”ê°€ ì—†ë‹¤. stateful í•˜ì§€ ì•Šì€ history ë°ì´í„°ë„ foreign key ì˜ë¯¸ê°€ ìˆì„ê¹Œ? ì™¸ë˜í‚¤ë¥¼ ì„¤ì •í•˜ëŠ”ê²Œ ì´ë ‡ê²Œ 1:1ë¡œ ë°ì´í„°ê°€ statefulí•  ë–„ (ex: ì‚¬ìš©ì-ë””ë°”ì´ìŠ¤ ì •ë³´) ìœ ìš©í•˜ì§€ ê·¸ëƒ¥ ë°‘ìœ¼ë¡œ í™•ì¥í•˜ëŠ” historyì„± í…Œì´ë¸”ì—ì„œë„ ì˜ë¯¸ê°€ ìˆì„ê¹Œ? ë˜ ì˜ì‹¬ì„ í–ˆëŠ”ë° ì¼ë‹¨ historyì„±ì´ì—¬ë„ ë³¸í…Œì´ë¸”ì— ì—†ëŠ” ë°ì´í„°ë¥¼ ë„£ì§€ ëª»í•˜ëŠ” ì¼ê´€ì„±ì´ ë³´ì¥ì´ ë˜ê¸° ë•Œë¬¸ì— í•„ìš” ìì²´ê°€ ì—†ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤.\nforeign key action Restrict : ë³¸í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„°ë¥¼ ë°”ê¾¸ê±°ë‚˜ ì‚­ì œí•˜ë ¤ëŠ”ë° ë‹¤ë¥¸í…Œì´ë¸”ì´ ì°¸ì¡°ë¥¼ í•˜ê³  ìˆì„ ê²½ìš° actionì„ ë¬´ì‹œí•œë‹¤. No Action : mysqlì—ì„œëŠ” restrict ì™€ ë™ì¼í•˜ë‹¤. Cascade : ë³¸í…Œì´ë¸”ì—ì„œ ìˆ˜ì •/ì‚­ì œê°€ ì¼ì–´ë‚¬ì„ ë•Œ ì°¸ì¡°í•˜ê³  ìˆëŠ” í…Œì´ë¸”ë„ ë™ì¼í•˜ê²Œ ìˆ˜ì •/ì‚­ì œê°€ ì ìš©ëœë‹¤. Set Null : ë³¸í…Œì´ë¸”ì—ì„œ ìˆ˜ì •/ì‚­ì œê°€ ì¼ì–´ë‚¬ì„ ë•Œ ì°¸ì¡°í•˜ê³  ìˆëŠ” í…Œì´ë¸”ì˜ Foreign Keyë¥¼ NULLë¡œ ë§Œë“ ë‹¤. ìˆ˜ì •ì—ì„œ ë³´ë‹¤ ì‚­ì œì—ì„œ ë” ìœ ìš©í•œ ì„¤ì • ìƒê°í•´ ë³¼ ë¶€ë¶„ ë§Œì•½ ë°ì´í„°ë¥¼ ì •ë§ ì§€ì›Œë²„ë¦¬ëŠ” Hard Deleteë§ê³  flagë¥¼ ì„¤ì •í•´ì¤˜ì„œ ì§€ìš´ ì²™ì„ í•˜ëŠ” Soft Deleteì—ì„œëŠ” Foreign Key Delete Actionì„ ì–´ë–»ê²Œ ì„¤ì •í•´ì£¼ëŠ” ê²Œ ì¢‹ì„ê¹Œ?\nì†Œì†Œí•œ í•˜ì´ë”” SQL \u0026amp; markdown íŒ í•˜ì´ë”” sqlì—ì„œ ê²©ìí–‰ ë‚´ë³´ë‚´ê¸° í•  ë•Œ ëŒ€ë‹¤ìˆ˜ì˜ ê²½ìš° csv íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°ë¥¼ í–ˆëŠ”ë° wikië‚˜ ë¸”ë¡œê·¸ ì‘ì„± ìš©ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œë„ ë‚´ë³´ë‚¼ ìˆ˜ ìˆëŠ” ê±¸ ì˜¤ëŠ˜ ë°œê²¬í–ˆë‹¤.\nì´ë ‡ê²Œ í•˜ë©´ [Table Generator] ì— ê°€ì„œ ì…€ í•˜ë‚˜í•˜ë‚˜ë¥¼ ë§Œë“¤ê±°ë‚˜ ê²°ê³¼ì°½ì„ ìº¡ì²˜ í•´ ì˜¬ í•„ìš”ê°€ ì—†ì–´ì„œ êµ‰ì¥íˆ í¸ë¦¬í•˜ê²Œ í¬ìŠ¤íŒ…ì„ í•  ìˆ˜ ìˆë‹¤.\n[Picture 4] í•˜ì´ë”” SQL ê²©ì í–‰ ë‚´ë³´ë‚´ê¸° [Picture 5] í•˜ì´ë”” SQL ê²©ì í–‰ ë‚´ë³´ë‚´ê¸° ê²°ê³¼ Reference [Mysql String Function Official Document]\n[MySQL ë¬¸ìì—´ í•¨ìˆ˜]\n[MySQL RESTRICT and NO ACTION]\n[Mysql Foreign Key Action Official Document] 1: ì£¼ì„ì— ê´€í•œ ì„¤ëª…ì„ ì´ê³³ì—\u0026hellip;\n","date":"2021-07-08","permalink":"https://leeleelee3264.github.io/post/2021-07-08-mysql-stringfunction-and-refrential-integrity/","tags":["Infra"],"title":"MySQL String í•¨ìˆ˜ì™€ ì°¸ì¡° ë¬´ê²°ì„±"},{"content":"\nMySQL SQLê³¼ key, collationì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.\nIndex\nStructured Query Language Key Collation Reference ë¦¬ë·° í›„ì— ì•Œê²Œëœ ë¶€ë¶„ë“¤ Primary Keyê°€ ë“¤ì–´ê°„ column ì˜ ì´ë¦„ë„ ì•„ë‹Œ ì œì•½ì¡°ê±´ì— ì´ë¦„ì„ ë§Œë“œëŠ” ì´ìœ \nì£¼ì„ë‹˜ì´ ì£¼ì‹  ì˜ê²¬: ê¸°ë³¸í‚¤ë¥¼ í•­ìƒ í•˜ë‚˜ì˜ columnìœ¼ë¡œ ë§Œë“œëŠ” ê±´ ì•„ë‹ˆê³  ì—¬ëŸ¬ê°€ì§€ í‚¤ë¥¼ ì„ì–´ì„œ ë§Œë“¤ì—ˆì„ ë•Œ ë³´ê¸° í¸í•˜ê²Œ í•˜ê¸° ìœ„í•´. Charset = Symbol (plain text) + encoding\nmysql ì—ì„œ ì§€ì›í•˜ëŠ” Collationì„ ì¿¼ë¦¬í•  ë•Œ ë‚˜ì˜¤ëŠ” pad-attributeë€ ë¬´ì—‡ì¸ê°€?\nê°€ë³€í˜•ì¸ VARCHAR ë§ê³  CHAR í˜•ì˜ í…ìŠ¤íŠ¸ë¥¼ ë¹„êµí•  ë•Œ ë’¤ì— ê³µë°±ì„ ë„£ì–´ì„œ ë¹„êµí•˜ëŠ”ì§€ ì•„ë‹Œì§€ì˜ ì—¬ë¶€. ëª¨ë“  DBê°€ ê·¸ëŸ°ê²ƒì€ ì•„ë‹ˆë‹¤. [Reference: MySQLì—ì„œ â€˜aâ€™ = â€˜a â€˜ê°€ trueë¡œ í‰ê°€ëœë‹¤?] í…Œì´ë¸”ì— ê±¸ë¦° ì œì•½ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ë°©ë²• (í…Œì´ë¸” í•˜ë‚˜ì”© ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì€ ì—†ê³  sql ì„œë²„ ì „ì²´ì— ê±¸ë ¤ìˆëŠ”ê²Œ ë‚˜ì™€ì„œ where ì ˆë¡œ ë½‘ì•„ë‚´ì•¼ í•œë‹¤)\n1 2 3 4 5 select * from information_schema.table_constraints; # use where select * from information_schema.table_constraints WHERE CONSTRAINT_SCHEMA = \u0026#39;test\u0026#39; ì™¸ë˜í‚¤ëŠ” ê³ ìœ í•˜ê²Œ ì‹ë³„ì´ ê°€ëŠ¥í•œ ë°ì´í„°ë©´ ë˜ê¸° ë•Œë¬¸ì— ê¼­ primary keyë§ê³  unique keyë¥¼ ì´ìš©í•´ì„œë„ ì™¸ë˜í‚¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\nForeign key should be made with primary key? Structured Query Language DML Data Manipulation Language\nSELECT, INSERT, DELETE, UPDATE ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•œ SQL ì»¤ë§¨ë“œ ê°œë°œì„ í•  ë•Œ ê¸°ë³¸ì´ ë˜ëŠ” CRUD (Create/Read/Update/Delete)ì´ í•´ë‹¹ëœë‹¤. ì‘ìš©í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ SQLì´ë‹¤. DDL Data Definition Language\nCREATE, ALTER, RENAME, DROP, TRUNCATE ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜/ì¡°ì‘ í•˜ê¸° ìœ„í•œ SQL ì»¤ë§¨ë“œ ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ì™€ ì œì•½ì¡°ê±´ì— ëŒ€í•œ ì „ì²´ì ì¸ ëª…ì„¸ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë©”íƒ€ì„± ë°ì´í„°ì˜ ì§‘í•©ì„ ìŠ¤í‚¤ë§ˆë¼ê³  í•œë‹¤. DBì— ê°€ì¥ í¬ë¦¬í‹°ì»¬í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì»¤ë§¨ë“œë¼ DBAë‚˜ DB ì„¤ê³„ìê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì»¤ë§¨ë“œ ALTER, RENAME ì˜ˆì‹œ\n1 2 3 4 5 # ALTER ìœ¼ë¡œ í…Œì´ë¸” ì´ë¦„ ë³€ê²½í•˜ê¸° ALTER TABLE old_name RENAME new_name; # RENAME ìœ¼ë¡œ í…Œì´ë¸” ì´ë¦„ ë³€ê²½í•˜ê¸° RENAME TABLE old_name TO new_name; DROPê³¼ TRUNCATE ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 # DROPìœ¼ë¡œ í…Œì´ë¸”ì„ ì§€ì›Œë²„ë¦¬ê¸° DROP TABLE table_name; # TRUNCATEìœ¼ë¡œ í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸° TRUNCATE TABLE table_name; # DROPìœ¼ë¡œ í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸° DROP TABLE table_name; CREATE TABLE table_name ( field_name field_type ... ) Dropì€ í…Œì´ë¸” ìì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§€ì›Œë²„ë¦¬ëŠ”ë° Truncateì€ í…Œì´ë¸”ì˜ ì»¬ëŸ¼, ì œì•½ì¡°ê±´ë“¤ì€ ë‚¨ê²¨ë‘ê³  ë°ì´í„°ë§Œ ì§€ì›Œì¤€ë‹¤. ì¡°ê±´ì„ ì´ìš©í•´ì„œ ë ˆì½”ë“œ í•˜ë‚˜ì”© ì§€ì›Œê°€ëŠ” Delete ë³´ë‹¤ Truncateì´ ì‹¤í–‰ì†ë„ëŠ” ë” ë¹ ë¥´ë‹¤ê³  í•œë‹¤.\nDDLì¸ë°ë„ ë¶ˆêµ¬í•˜ê³  ì‘ìš©í”„ë¡œê·¸ë¨ì—ì„œë„ Truncateì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤ê³  í•˜ëŠ”ë° ì‘ìš©í”„ë¡œê·¸ë¨ì—ì„œ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ëª¨ë‘ ì§€ì›Œë²„ë¦¬ëŠ” í–‰ìœ„ëŠ” ë„ˆë¬´ ìœ„í—˜í•˜ë‹¤ê³  ìƒê°í•œë‹¤.\nDCL Date Control Language\nCOMMIT, ROLLBACK, GRANT, REVOKE DBì˜ ê¶Œí•œê³¼ ë¬´ê²°ì„±ì„ ì§€í‚¤ê¸° íœ˜í•œ Transactionì„ ìœ„í•œ SQL ì»¤ë§¨ë“œ COMMITê³¼ ROLLBACKì„ ë”°ë¡œ ë¹¼ì„œ TCL (Transaction Control Language)ë¼ê³  í•˜ê¸°ë„ í•œë‹¤. Transactionì€ ì»¤ë§¨ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•  ë•Œ ë°ì´í„°ì˜ ë³€ê²½ ì—†ì´ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ í™œìš©í•  ìˆ˜ ìˆë‹¤. TRANSACTION ì˜ˆì‹œ\n1 2 3 4 5 6 7 START TRANSACTION; SELECT * FROM users; DELETE FROM users WHERE NAME = \u0026#39;jamie\u0026#39;; SELECT * FROM users; ROLLBACK; ì´ëŸ°ì‹ìœ¼ë¡œ Transactionì„ ê±¸ë©´ ê° ì¤„ì´ ì‹¤í–‰ë˜ë©´ì„œ SELECTë¡œ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ê³  Rollback ì»¤ë§¨ë“œë¡œì¸í•´ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ì „ì˜ ìƒíƒœë¡œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ëŒì•„ê°„ë‹¤. ì¼ë°˜ SELECTê°€ ì•„ë‹Œ ì¡°ê±´ì´ ë³µì¡í•œ DELETE, UPDATE, INSERT ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ ì“°ë©´ ì¢‹ì•„ë³´ì¸ë‹¤.\nê·¸ëŸ°ë° ì €ë ‡ê²Œ ì§  ì¿¼ë¦¬ ì¤‘ì— ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ ë§ˆì§€ë§‰ ROLLBACKê¹Œì§€ ì˜¤ì§€ê°€ ì•Šê¸° ë•Œë¬¸ì— Transaction ì²˜ë¦¬ê°€ ì•ˆëœë‹¤. ì•„ë¬´ë¦¬ Transactionì„ ê±¸ì—ˆë‹¤ê³  í•´ë„ ì¡°ì‹¬ì„ í•´ì•¼í•  í•„ìš”ê°€ ìˆì–´ë³´ì¸ë‹¤.\n[Picture 1] Transaction ì‹¤íŒ¨ Key Keyì™€ ì œì•½ì¡°ê±´ì˜ ì°¨ì´ Key í‚¤ëŠ” í…Œì´ë¸”ì˜ ë‹¨ì¼ í•„ë“œì— ê±¸ê±°ë‚˜ ë³µí•©ì ì¸ í•„ë“œì— ê±¸ ìˆ˜ ìˆë‹¤. í…Œì´ë¸”ì—ì„œ ì¡°ê±´ì— ë”°ë¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©° ë‹¤ë¥¸ í…Œì´ë¸”ê³¼ ë·° ì‚¬ì´ì˜ ê´€ê³„ ë˜í•œ ìƒì„±ì„ í•  ìˆ˜ ìˆë‹¤. ë‚´ê°€ ìƒê°í–ˆë˜ ê²ƒ ì²˜ëŸ¼ í‚¤ ìì²´ë¥¼ ì œì•½ì¡°ê±´ì´ë¼ê³  ë³´ê¸°ëŠ” í˜ë“¤ë‹¤ . ì œì•½ì¡°ê±´ ì œì•½ì¡°ê±´ì€ ë°ì´ë¸”ì˜ ë°ì´í„°ë¥¼ ìœ„í•œ íŠ¹ì •í•œ ê·œì¹™ë“¤ì´ë‹¤. ë§Œì•½ data action(SQL commandë¡œ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•œ actionë“¤)ì´ ì œì•½ì¡°ê±´ì„ ìœ„ë°°í•œë‹¤ë©´ ê·¸ data actionì„ ì·¨ì†Œí•´ë²„ë¦°ë‹¤. ì œì•½ì¡°ê±´ì€ í…Œì´ë¸”ì„ ìƒì„±í•  ì‹œê¸°ë‚˜, ìƒì„±í•œ ì´í›„ì— ê±¸ ìˆ˜ ìˆë‹¤. DBMSì—ì„œì˜ Keyì™€ MySQLì—ì„œì˜ í‚¤ DBMSì˜ í‚¤ì™€ Mysqlì—ì„œ ì‚¬ìš©í•˜ëŠ” í‚¤ì˜ ì°¨ì´ì ì€ DBMSì—ì„œ ë§í•˜ëŠ” Keyë“¤ì€ Conceptì— ê°€ê¹ë‹¤. Mysqlì€ ì‹¤ì œë¡œ Primary Keyì™€ Foreign Key ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ë‚˜ë¨¸ì§€ Keyë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ê³ ë ¤ê°€ ë˜ëŠ” ê°œë…ë“¤ì´ì—ˆë‹¤.\nDBMS Primary Key í…Œì´ë¸” ì•ˆì—ì„œ ì¤‘ë³µë˜ì§€ ì•Šì€ ê°’ì„ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë“¤(row)ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•œë‹¤. í…Œì´ë¸” ì•ˆì—ì„œ Primary Key ëŠ” í•˜ë‚˜ë°–ì— ìˆì„ ìˆ˜ ì—†ë‹¤. NULLì€ absence of value ê¸° ë•Œë¬¸ì— ê°’ì´ë¼ê³  í•  ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ Primary Keyì— NULLê°’ì„ ë„£ì„ ìˆ˜ ì—†ë‹¤. ë¬¼ë¦¬ì ì¸ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ë° ê°’ì´ ë¹„ì–´ìˆìœ¼ë©´ ìˆœì„œë¥¼ ì •í•  ìˆ˜ ì—†ì–´ì„œ NULLê°’ì„ ë„£ì„ ìˆ˜ ì—†ë‹¤. Primary Key = Unique Constraint + NOT NULL Foreign Keyê°€ ê±¸ë ¤ìˆìœ¼ë©´ Primary Keyë¥¼ ë³€ê²½í•  ë•Œ ì´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” Foreign Keyê¹Œì§€ í•¨ê»˜ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤. ì´ë–„ ON UPDATE CASCADE ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤. Foreign Key í…Œì´ë¸”ë“¤ ì‚¬ì´ì— ê´€ê³„ë¥¼ ë§Œë“¤ê³ , ì°¸ì¡° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤. í…Œì´ë¸”ì„ ì—°ê²°ì‹œì¼œ ì£¼ê¸° ë•Œë¬¸ì— ì–´ë–¤ ë°ì´í„°ì¸ì§€ ê³ ìœ í•˜ê²Œ ì‹ë³„ì´ ê°€ëŠ¥í•´ì•¼ í•´ì„œ Foreign Keyë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” Primary Keyë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. NULL ê°’ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. Foreign Keyë¡œ ì´ë¯¸ ê´€ê³„ëŠ” ë§Œë“¤ì–´ì¡Œìœ¼ë‚˜ ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì—ì„œ Primary Keyë¥¼ ë¹„ë¡¯í•œ ë°ì´í„°ê°€ ì•„ì§ ë§Œë“¤ì–´ì§€ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤,. Super Key í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Key ë˜ëŠ” Key Set ì‹ë³„ë§Œ ê°€ëŠ¥í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ê°€ì§€ Columnë“¤ì„ ì¡°í•©í•´ì„œ ì—¬ëŸ¬ê°œì˜ Super Key ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. Primary Keyë„ Super Keyì— ë“¤ì–´ìˆëŠ” Key ì¤‘ í•˜ë‚˜ì´ë‹¤. Candidate Key Super Keyì™€ ë™ì¼í•œ ì„±ê²©ì„ ê°€ì§€ê³  ìˆëŠ” Key ë°ì´í„°ë¥¼ ì‹ë³„í•´ì£¼ë‚˜ ìµœì†Œí•œì˜ Columnì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. (Minimal Super Key) Primary Keyë„ Candidate Key ì—ì„œ ë½‘íŒë‹¤. [Picture 2] Key ë‹¤ì´ì–´ê·¸ë¨ Super Keyì™€ Candidate Key ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Example Of Super Key and Candidate Key # ì „í™”ë²ˆí˜¸ì— ì¤‘ë³µì´ ì—†ë‹¤ëŠ” ì „ì œ | Id | Number | Name | |----|---------------|----------| | 1 | 111-1111-1111 | Seungmin | | 2 | 222-2222-2222 | Jamie | | 3 | 333-3333-3333 | LeeLee | # Super Key {Id} {Number} {Id, Number} {Id, Name} {Id, Number, Name} {Number, Name} # Candidate Key {Id} {Number} Alternate Key Primary Keyë¡œ ì„ ì •ë˜ì§€ ì•Šì€ Keyë“¤ Compound Key ì™€ Composite Key ì—¬ëŸ¬ê°œì˜ Columnì„ ë¬¶ì–´ì„œ í…Œì´ë¸”ì—ì„œ ê³ ìœ í•˜ê²Œ ì‹ë³„ê°€ëŠ¥í•˜ê²Œ ë§Œë“  ë³µí•©í‚¤ Compound KeyëŠ” Column ì¤‘ì— Foreign Key ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. Composite KeyëŠ” Column ì¤‘ì— Foreign Key ë¥¼ ê°€ì§ˆ ìˆ˜ ë„ ìˆê³  ê°€ì§€ê³  ìˆì§€ ì•Šì„ ìˆ˜ ë„ ìˆë‹¤. Compound Keyì™€ Composite Keyë¥¼ êµ¬ë³„í•˜ëŠ” ê²Œ íŠ¹ë³„ì´ ì¤‘ìš”í•˜ì§€ ì•Šì•„ì„œ ìì£¼ ë°”ê¿”ì„œ ë¶€ë¥¸ë‹¤ê³  í•œë‹¤. Surrogate Key ê° ë°ì´í„°ë“¤ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ê¸° ìœ„í•œ ëŒ€ë¦¬ë¡œ ë§Œë“¤ì–´ì§„ í‚¤ ë°ì´í„° ìì²´ì—ëŠ” ì•„ë¬´ëŸ° ì˜ë¯¸ë„ ì—†ê³ , ì •ë³´ë„ ì—†ë‹¤. Primary Key ë¡œ ìì£¼ ì‚¬ìš©ë˜ëŠ” Auto increment ê°€ ê±¸ë¦° Idê°€ ì—¬ê¸°ì— í•´ë‹¹ëœë‹¤. Id ìì²´ì—ëŠ” ì•„ë¬´ëŸ° ëœ»ì´ ì—†ìœ¼ë‚˜ ì„œë¹„ìŠ¤ ì—ì„œëŠ” ìœ ì €ë“¤ì„ ì‹ë³„í•˜ëŠ” ì •ë³´ë¡œ ì‚¬ìš©ëœë‹¤. Natural Keyë¼ê³  ë°˜ëŒ€ ê°œë…ì´ ìˆëŠ”ë° ì´ê²ƒì€ ì •ë³´ ìì²´ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë“¤ì„ ì‹ë³„í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ìœ ì €ë¥¼ ì‹ë³„í•˜ëŠ” ê°’ìœ¼ë¡œ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ ì‚¬ìš©. Surrogate Key VS Natural Key Surrogate Keyì™€ Natural Key ì‚¬ì´ì—ì„œ Primary Key ë¥¼ ê³ ë¥´ëŠ” ë¬¸ì œê°€ ë¹ˆë²ˆíˆ ëŒ€ë‘ë˜ëŠ”ë° ì•„ë¬´ë¦¬ ê³ ìœ í•œ ê°’ì´ë¼ë„ ì¼ë§ì˜ ë°”ë€” ì—¬ì§€ê°€ ìˆëŠ” Natural Key ë³´ë‹¤ëŠ” (ì£¼ë¯¼ë“±ë¡ ë²ˆí˜¸ ë³€ê²½ ë“±) ë¹„ì¦ˆë‹ˆìŠ¤ ì•ˆì—ì„œëŠ” ì ˆëŒ€ ë³€í•  ìˆ˜ ì—†ëŠ” Surrogate Key ë¥¼ Primary Key ë¡œ ë“±ë¡í•˜ëŠ”ê²Œ ì¢‹ë‹¤.\nMySql Key Keyë¥¼ ë§Œë“¤ë©´ Indexê°€ ë§Œë“¤ì–´ì§„ë‹¤. ê²°êµ­ ì¼ë°˜ KeyëŠ” Indexì™€ ë™ì¼í•˜ë‹¤. Primary Key Unique Key Foreign Key Collation Charset: ê¸€ìë“¤ì„ ì–´ëŠì •ë„ ë˜ëŠ” í¬ê¸°ì— ì§‘ì–´ ë„£ì„ ê²ƒì¸ì§€ Collation: í…ìŠ¤íŠ¸ë“¤ì„ ì–´ë–»ê²Œ ì •ë ¬í•  ê²ƒì¸ì§€ MySQLì—ì„œ ì§€ì›í•˜ëŠ” Collation utf8ê³¼ utf8mb4ì˜ Charsetìœ¼ë¡œë§Œ ì´ë£¨ì–´ì§„ Collationë„ 67ê°œë‚˜ ì§€ì›ì„ í•˜ê³  ìˆë‹¤. Mysqlì—ì„œëŠ” ì´ 322ê°œì˜ Collationì„ ì§€ì›í•˜ê³  ìˆë‹¤.\nMySQLì˜ Collationì„ í™•ì¸í•˜ëŠ” ì¿¼ë¦¬ ì˜ˆì‹œ\n1 2 3 4 5 SHOW COLLATION # ì œì¼ ìì£¼ ì‚¬ìš©í•˜ëŠ” charsetì¸ utfë¥¼ ì§€ì›í•˜ëŠ” Collation SHOW COLLATIOn WHERE CHARSET LIKE (\u0026#39;%utf8%\u0026#39;) [Picture 3] SQL Charset UTF charset í•œê¸€ì„ ì‚¬ìš©í•˜ë ¤ë©´ utf8ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ì›¹ì—ì„œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ utf8ë¡œë§Œ ì„¤ì •ì„ í•˜ë©´ ë˜ì§€ë§Œ, mysqlì—ì„œëŠ” utf8, utf8mb4, utf16, utf32 ë¡œ ë‹¤ì–‘í•œ utfë¥¼ ì§€ì›í•œë‹¤.\në‚˜ëŠ” charset í¬ê¸°ê°€ ì ì  ì»¤ì ¸ì„œ utf8 â†’ utf8mb4 â†’ utf16 â†’ utf32 ì´ëŸ° ìˆœì„œë¡œ ë§Œë“¤ì–´ì§„ ì¤„ ì•Œì•˜ëŠ”ë° ê·¸ë ‡ì§€ëŠ” ì•Šì•˜ë‹¤. ì‚¬ìš©í•˜ëŠ” ê³µê°„ì´ í° utf16ê³¼ utf32ë³´ë‹¤ëŠ” utf8ê³¼ utf8mb4ê°€ ë§ì´ ì“°ì¸ë‹¤.\nutf8mb4? utf8ì—ì„œ utf8mb4ê°€ ìƒê²¨ë‚œ ì´ìœ ëŠ” ì´ëª¨ì§€ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œë‹¤. ì›ë˜ëŒ€ë¡œë¼ë©´ utf8ì€ 8bits, ì¦‰ 1byteë§Œ ë“¤ì–´ê°ˆ ê²ƒ ê°™ì§€ë§Œ ì‚¬ì‹¤ utf8ì€ 1~4byte ê¹Œì§€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°€ë³€í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê·¸ë˜ì„œ plain textì¸ ì˜ì–´ì™€ í•œêµ­ì–´ëŠ” ê°ê° 1byte, 3byte í¬ê¸°ë¥¼ ì´ìš©í•´ì„œ ì €ì¥ì´ ëœë‹¤.\nMysqlì„ ì„¤ê³„í• ë•Œë„ utf8í˜•ì´ 3byteë¥¼ ë„˜ì–´ê°ˆ ì¼ì´ ì—†ë‹¤ê³  ìƒê°ì„ í–ˆì–´ì„œì¸ì§€ utf8ì´ ì‹¤ì œë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„ì„ 3byteë¡œ ì œí•œì„ í•´ë²„ë ¸ë‹¤. ê·¸ëŸ°ë° í•œìë‚˜ ì´ëª¨ì§€ë“¤ì€ ê¸¸ì´ê°€ 4byteì¸ ë¬¸ìì—´ë“¤ì´ë¼ì„œ Mysqlì—ì„œ utf8ì„ ì“°ë‹¤ê°€ëŠ” ë°ì´í„°ê°€ ë‹¤ ë“¤ì–´ê°€ì§€ë¥¼ ì•ŠëŠ”ë‹¤.\nê·¸ë˜ì„œ ì›ë˜ì˜ utf8ì˜ ì·¨ì§€ì— ë§ê²Œ 1ì—ì„œ 4byte ê¹Œì§€ ê°€ë³€ì ìœ¼ë¡œ í¬ê¸°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” charsetì¸ utf8mb4ë¥¼ ë§Œë“¤ì—ˆë‹¤. ê·¸ë¦¬ê³  ëŒ€ë¶€ë¶„ì˜ ê²½ìš° utf8mb4 Charsetì„ ì‚¬ìš©í•œë‹¤.\nìì£¼ ì‚¬ìš©í•˜ëŠ” Collation ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” í…ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” Columnì€ ëŒ€ë¶€ë¶„ utf8mb4_unicode_cië¥¼ ì‚¬ìš©í•˜ê³ , ì˜›ë‚ ì— ì‹¤ìˆ˜ë¡œ ì˜ëª» ì„¤ì •ì„ í–ˆì„ ë•Œ utf8mb4_general_cië¥¼ ì‚¬ìš©í–ˆë‹¤. ì—¬ê¸°ì„œ cië€ Case Insensitive ì˜ ì•½ìë¡œ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë³„í•˜ì§€ ì•Šê² ë‹¤ëŠ” ëœ»ì´ë‹¤.\nInsensitive Charset ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 # use case insensitive charset SELECT * FROM users WHERE name = \u0026#39;Jamie\u0026#39;; SELECT * FROM users WHERE name = \u0026#39;jamie\u0026#39;; # ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë³„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— SELECTì˜ ê²°ê³¼ëŠ” ë™ì¼í•˜ë‹¤. utf8mb4_bin ë°”ì´ë„ˆë¦¬ ê°’ì„ ê·¸ëŒ€ë¡œ ì €ì¥í•œë‹¤. binì€ binaryì˜ ì•½ìì´ë‹¤. utf8mb4ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ë°”ì´ë„ˆë¦¬ê°’ì´ ì¤‘ì‹¬ì´ë¼ íŒŒì¼ì´ë‚˜ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” Columnì— ì‚¬ìš©í•˜ë©´ ëœë‹¤. utf8mb4_unicode_ci Unicode ê·œì¹™ì„ ë”°ë¼ì„œ ì •ë ¬ì´ ë˜ì—ˆê³  ì–¸ì–´ë“¤ ì‚¬ì´ì—ì„œ ì œì¼ ë§ì´ ì„ íƒë°›ëŠ” Collation. íŠ¹ë³„í•œ ê¸°í˜¸ë“¤ì„ ì‚¬ìš©í• ë•Œë„ unicode_cië¥¼ ì‚¬ìš©í•˜ëŠ” í¸ì´ë¼ê³  í•œë‹¤. utf8mb4_general_ci í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ì •ë ¬ì„ í•´ì¤€ë‹¤. í•œêµ­ì–´, ì˜ì–´, ì¤‘êµ­ì–´, ì¼ë³¸ì–´ëŠ” general_ciì™€ unicode_ci collationì˜ ê²°ê³¼ê°’ì´ ë™ì¼í•˜ë‹¤. general_ciëŠ” ì†ë„ê°œì„ ì„ ì¤‘ì ìœ¼ë¡œ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì •ë ¬ê³¼ ë¹„êµë¥¼ í•  ë•Œ ê³µì‹ì ì¸ Unicode ê·œì¹™ì„ ë”°ë¥´ì§€ ì•Šê³  ë‚´ë¶€ì—ì„œ ë”°ë¡œ ë””ìì¸ì„ í–ˆë‹¤. ê·¸ë˜ì„œ ë•Œì— ë”°ë¼ì„œ ìš°ë¦¬ê°€ ê¸°ëŒ€í•˜ëŠ” (Unicode ê·œì¹™ì— ë”°ë¥¸) ê°’ì´ ë‚˜ì˜¤ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ìš”ì¦˜ì€ CPUì˜ ì„±ëŠ¥ì´ ë§ì´ ì¢‹ì•„ì ¸ì„œ Unicode ê·œì¹™ì„ ë”°ë¥´ì§€ ì•ŠëŠ” general_cië¥¼ ì¨ê°€ë©´ì„œ ì„±ëŠ¥í–¥ìƒì„ í•  í•„ìš”ê°€ ì—†ë‹¤! Reference [Difference Between Key and Constraint] [Difference Between Composite and Compound Key] [Primary Key - Surrogate Key VS Natural Key] [deep dive into utf8 and utf16] [Difference Between unicode_ci and general_ci] ","date":"2021-06-30","permalink":"https://leeleelee3264.github.io/post/2021-06-30-mysql-sql-and-key-collection/","tags":["Infra"],"title":"MySQL SQLê³¼ key, collation"},{"content":"\nSummary of post\nIndex\nClustered Index / Non-Clustered Index - Concept Clustered Index / Non-Clustered Index - Structure and Index algorithm Side effects of Indexes Related SQL Command with Indexes Reference ë¦¬ë·° í›„ì— ì•Œê²Œëœ ë¶€ë¶„ë“¤ Non-Clustered Indexê°€ ì—¬ëŸ¬ ê°œ ìƒì„±ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ë¬´ì œí•œìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ì¡°íšŒëŠ” Clustered Indexê°€ ë¹ ë¥´ì§€ë§Œ, ìˆ˜ì •ê³¼ ì…ë ¥ì€ Non-Clustered Indexê°€ ë¹ ë¥´ë‹¤. ì™œëƒí•˜ë©´ Non-Clustered IndexëŠ” ë¬¼ë¦¬ì ì¸ ì •ë ¬ì„ ê°€ì§€ê³  ìˆì§€ ì•Šì•„ì„œ ìƒˆ ë°ì´í„°ê°€ ë“¤ì–´ì™€ë„ ìˆœì„œëŒ€ë¡œ ì •ë ¬ì„ ì•ˆ í•´ë„ ëœë‹¤. Clustered Index / Non-Clustered Index - Concept Clustered Indexì™€ Non-Clustered Index ë‘˜ ë‹¤ í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„° ì—‘ì„¸ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•œ ìš©ë„ì´ì§€ë§Œ ë‘˜ì˜ ì„±ê²©ì´ ì¡°ê¸ˆ ë‹¤ë¥´ë‹¤.\nê°€ì¥ í° ì°¨ì´ëŠ” Clustered IndexëŠ” í…Œì´ë¸” ë‹¹ ë”± 1ê°œë§Œ ë§Œë“¤ì–´ì§€ê³ , Non-Clustered IndexëŠ” ë³µìˆ˜ê°œê°€ ë§Œë“¤ì–´ ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ê³¼ Clustered Indexë¥¼ ìƒì„±í•˜ëŠ” Columnì€ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•Šì§€ë§Œ Non-Clustered IndexëŠ” ì¤‘ë³µì„ í—ˆìš©í•œë‹¤ëŠ” ì ì´ë¼ê³  ìƒê°í•œë‹¤.\nClustered Index Primary Key ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. í…Œì´ë¸”ì— ë‹¨ í•˜ë‚˜ë§Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì¤‘ë³µëœ ë°ì´í„°ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ìˆœì„œëŒ€ë¡œ ì €ì¥í•˜ê²Œ í•´ì¤€ë‹¤. í¬ê¸°ê°€ í° í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì•„ì˜¤ê²Œ í•˜ê¸° ìœ„í•´ì„œ ê¼­ ë§Œë“¤ì–´ì£¼ëŠ” ê²Œ ì¢‹ë‹¤. ì†ë„ê°€ Non-Clustered Index ë³´ë‹¤ ë¹ ë¥´ë‹¤. Non-Clustered Index Unique Keyì™€ Key ë¡œ ë§Œë“¤ì–´ ì§„ë‹¤. Mysqlì˜ ì¼ë°˜ KeyëŠ” ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ë§Œ ìˆ˜í–‰í•œë‹¤. Unique Keyì˜ íŠ¹ì„±ìƒ í•´ë‹¹ í‚¤ë¡œ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í–ˆë‹¤ë©´ ì¤‘ë³µê°’ì´ ìˆì„ ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ Unique Keyì˜ Indexë¥¼ Unique Non-Clustered Indexë¼ê³  í•˜ê¸°ë„ í•œë‹¤. í…Œì´ë¸”ì— ì—¬ëŸ¬ê°œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì¤‘ë³µëœ ë°ì´í„°ë¥¼ í—ˆìš©í•œë‹¤. ë°ì´í„° ì €ì¥ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ê³¼ë„í•œ Non-Clustered Index ìƒì„±ì€ í¼í¬ë¨¼ìŠ¤ë¥¼ ë–¨ì–´ëœ¨ë¦¬ê¸° ë•Œë¬¸ì— ì˜ ì„¤ê³„í•´ì„œ ê¼­ í•„ìš”í•œ ë¶€ë¶„ë§Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì†ë„ê°€ Clustered Index ë³´ë‹¤ ëŠë¦¬ë‹¤. Clustered Index / Non-Clustered Index - Structure and algorithm Clustered Index Structure íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. (B-tree) ê° ë…¸ë“œì—ëŠ” ì‹¤ì œ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤. ì‹¤ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— IO ì‘ì—…ì´ ì ì–´ ë°ì´í„° ì°¾ê¸°ê°€ í›¨ì”¬ ë¹ ë¥´ë‹¤. (1)ì†ë„ê°€ ë¹ ë¥´ê³  (2)ëª¨ë“  Columnì„ í•„ìš”ë¡œ í•˜ëŠ” ì½ê¸° ì „ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ë©´ Clustered Indexë¥¼ ë§Œë“¤ë©´ ëœë‹¤. [Picture 1] Cluster structure Non-Clustered Index Structure íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. (B-tree) ê° ë…¸ë“œì—ëŠ” í¬ì¸í„° (ì£¼ì†Œ)ê°€ ì €ì¥ë˜ì–´ ìˆê³ , ì´ ì£¼ì†Œë“¤ì€ Clustered Indexì˜ ë…¸ë“œë“¤ì„ ê°€ë¥´í‚¤ê³  ìˆë‹¤. ì¸ë±ìŠ¤ ì•ˆì— ë°ì´í„°ë“¤ì€ ë…¼ë¦¬ì ìœ¼ë¡œ ìˆœì„œë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” ë‹¤ë¥¸ ìˆœì„œë¥¼ ê°€ì§€ê³  ìˆì„ ìˆ˜ ìˆë‹¤. Indexì— í•´ë‹¹ë˜ëŠ” Columnì— ë”°ë¼ ë…¼ë¦¬ì ìœ¼ë¡œ ì •ë ¬ì´ ë˜ì–´ìˆë‹¤. Non-Clustered Indexë¥¼ ì‚¬ìš©í•´ ê²€ìƒ‰ì„ í–ˆì„ ê²½ìš° ê²°êµ­ Clustered Indexê¹Œì§€ ê±°ì³ì„œ ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. Clustered Indexê°€ ì—†ëŠ” í…Œì´ë¸”ì˜ Non-Clustered IndexëŠ” Heapì„ ê°€ë¥´í‚¨ë‹¤. Heap in MySQL Clustered Indexë¥¼ ì„¤ì •í•˜ì§€ ì•Šì€ í…Œì´ë¸”ì„ Heapì´ë¼ê³  í•œë‹¤. Heapì€ ìˆœì„œì—†ì´ ì €ì¥ëœ ë°ì´í„°ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. Heapì€ ìˆœì„œë¥¼ ì‹ ê²½ì“°ì§€ ì•Šì•„ í¬ê¸°ê°€ í¬ê³ , ìˆœì„œê°€ ì¤‘ìš”í•˜ì§€ ì•Šì€ ë°ì´í„°ë“¤ì˜ Insert ì—°ì‚°ì´ í•„ìš”í•œ í…Œì´ë¸”ì— ì‚¬ìš©ëœë‹¤. [Picture 2] Non-cluster structure Index algorithm B-Tree O(logN)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤. í•˜ë‚˜ì˜ ë…¸ë“œì— ì—¬ëŸ¬ê°€ì§€ ë°ì´í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê³ , ë•Œë¬¸ì— ì°¸ì¡° í¬ì¸í„°ê°€ ì ì–´ ë¹ ë¥¸ ë©”ëª¨ë¦¬ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. íƒìƒ‰ ë¿ ì•„ë‹ˆë¼ ìˆ˜ì •ê³¼ ì €ì¥ì—ì„œë„ O(logN)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤. B-Treeë¥¼ ì“°ëŠ” ì´ìœ  ì‹œê°„ë³µì¡ë„ê°€ O(1)ì¸ Hash ëŒ€ì‹ ì— O(logN) ì‹œê°„ì´ ê±¸ë¦¬ëŠ” B-treeë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” HashëŠ” Keyê°’ì„ ê°€ì§€ê³  ë‹¨ í•˜ë‚˜ì˜ ë°ì´í„°ì— ì—‘ì„¸ìŠ¤ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ì—°ì‚°ì—ì„œ ë™ì¼í•œ ê°’ì„ ì°¾ì•„ë‚´ëŠ” = ë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê³ , ëŒ€ì†Œë¹„êµë¥¼ í•˜ê±°ë‚˜ Between ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ëœë‹¤. ë°ì´í„° ì—‘ì„¸ìŠ¤ê°€ ë¹ ë¥¸ ë°°ì—´ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  í¬ì¸í„°ë¡œ ë¶„ì‚°ë˜ì–´ìˆëŠ” B-Treeë¥¼ ì“°ëŠ” ì´ìœ ëŠ” ë°°ì—´ì€ íƒìƒ‰ì„ í•  ë•Œë§Œ ë¹ ë¥´ê³  ë‹¤ë¥¸ ì—°ì‚°ì— ëŒ€í•´ì„œëŠ” B-Treeë³´ë‹¤ ë” ëŠë¦¬ê¸° ë•Œë¬¸ì´ë‹¤. [Picture 3] B-Tree index algorithm R-Tree ê³µê°„ ì •ë³´ íƒìƒ‰ì„ ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ (ê¸°í•˜í•™) Mysqlì—ì„œ ê³µê°„ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” íƒ€ì…ì¸ Geometryì™€ í•˜ìœ„ íƒ€ì…ë“¤ì—ì„œ ì“°ì¸ë‹¤ê³  í•œë‹¤. [R-Tree ì•Œê³ ë¦¬ì¦˜] Side effects of Indexes Clustered Indexê°€ ìˆìœ¼ë©´ ë°ì´í„°ë¥¼ Insert/update í•  ë•Œ ë§ˆë‹¤ ìˆœì„œëŒ€ë¡œ ë‹¤ì‹œ ì •ë ¬ì„ í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì†ë„ê°€ ëŠë¦¬ë‹¤. Non-Clustered IndexëŠ” ë””ìŠ¤í¬ì— ë¶„ì‚°ì´ ë˜ì–´ ì €ì¥ì´ ë˜ëŠ”ë° ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ Column ê°’ì´ ì¤‘ë³µìœ¼ë¡œ ì €ì¥ì´ ë˜ê¸° ë•Œë¬¸ì— ë””ìŠ¤í¬ ë‚­ë¹„ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. Indexë¥¼ ë„ˆë¬´ ë§ì´ ë§Œë“¤ì–´ë‘ë©´ ì˜¤íˆë ¤ íƒìƒ‰ ì„±ëŠ¥ê¹Œì§€ ë–¨ì–´ì§€ê²Œ ëœë‹¤. íƒìƒ‰ ì„±ëŠ¥ ì €í•˜ ì‹œë‚˜ë¦¬ì˜¤\nINDEX1ëŠ” Aì™€ B Columnì„ ê°€ì§€ê³  ìˆê³ , INDEX2ëŠ” Aì™€ C Columnì„ ê°€ì§€ê³  ìˆë‹¤. ì´ëŸ° ê²½ìš° ë””ìŠ¤í¬ì—ëŠ” Bê°€ 2 ë²ˆ ê¸°ë¡ì´ ëœë‹¤. ì´ëŸ° ìƒíƒœì—ì„œ Bì™€ Cë¥¼ ì¡°íšŒí•œë‹¤ë©´ INDEX 1,2 ë¥¼ ë‘˜ ë‹¤ ì‚¬ìš©í•´ì„œ í¬ì¸í„°ë¥¼ ì°¾ê³ , í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„°ë¥¼ ì°¾ê¸° ì‹œì‘í•œë‹¤.\nRelated SQL Command with Indexes ì¸ë±ìŠ¤ì™€ ê´€ë ¨ëœ CommandëŠ” DMLì´ ì•„ë‹ˆë¼ DDL (Date Define Language) ë‹¤!\nì¸ë±ìŠ¤ ì¿¼ë¦¬ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 # ìƒì„±ë˜ì–´ìˆëŠ” ì¸ë±ìŠ¤ í™•ì¸ SHOW INDEX FROM table_name # ì¸ë±ìŠ¤ ì¶”ê°€ ALTER TABLE table_name ADD INDEX index_name (column1, column2); # ì¸ë±ìŠ¤ ì‚­ì œ ALTER TABLE table_name DROP INDEX index_name; # ì¸ë±ìŠ¤ë¥¼ íƒ€ëŠ”ì§€ ì•ˆ íƒ€ëŠ”ì§€ ì‹¤í–‰ê³„íš ë³´ê¸° EXPLAIN query ex) EXPLAIN SELECT * FROM table_name EXPLAIN ì¿¼ë¦¬ EXPLAIN ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì‘ì„±í•œ ì¿¼ë¦¬ì˜ ì„±ëŠ¥ê³¼ index ì‚¬ìš© ì—¬ë¶€ ë“±ì„ ìì„¸íˆ ì•Œ ìˆ˜ ìˆë‹¤.\n[Picture 4] EXPLAIN ì¿¼ë¦¬ ì˜ˆì‹œ Id SELECT ë¬¸ì˜ ìˆœì„œ ì„œë¸Œ ì¿¼ë¦¬ê°€ ìˆì„ ê²½ìš° ìˆœì„œë¥¼ ë¶€ì—¬í•´ì¤€ë‹¤. select_type SELECT ë¬¸ì˜ ìœ í˜• SIMPLE: UNIONì´ë‚˜ ì„œë¸Œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ SELECT PRIMARY: ì„œë¸Œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ì œì¼ ë°”ê¹¥ì— ìˆëŠ” SELECT SUBQUERY: ì„œë¸Œì¿¼ë¦¬ SELECT DERIVED: FROM ì ˆì— ì„œë¸Œì¿¼ë¦¬ê°€ ìˆëŠ” SELECT type SELECT ë¬¸ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í…Œì´ë¸”ì„ ì–´ë–»ê²Œ ì¡°íšŒí–ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ALL: table full scan, í…Œì´ë¸”ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì¡°íšŒí–ˆë‹¤. (ì œì¼ ë‚˜ì¨) INDEX: index full scan, ì¸ë±ìŠ¤ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì¡°íšŒí–ˆë‹¤. RANGE: íŠ¹ì • ë²”ìœ„ ì•ˆì—ì„œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ì¡°íšŒí–ˆë‹¤. INDEX_MERGE: ë‘ ê°œì˜ ì¸ë±ìŠ¤ë¥¼ ë³‘í•©í•´ì„œ ì¡°íšŒí–ˆë‹¤. REF: ì¡°ì¸ì„ í•  ë•Œ Primary ë‚˜ Unique ê°€ ì•„ë‹Œ Keyë¡œ ë§¤ì¹­í•´ì„œ ì¡°íšŒí–ˆë‹¤. CONST: ë§¤ì¹­ë˜ëŠ” rowê°€ ë‹¨ í•œ ê±´ì´ë©°, Primary ë‚˜ Uniqueë¥¼ ì‚¬ìš©í•´ì„œ ì¡°íšŒí–ˆë‹¤. possible_keys í•´ë‹¹ Columnì„ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©ëœ ì¸ë±ìŠ¤ ì´ ê°’ì´ NULLì´ë¼ë©´ ì‚¬ìš©ëœ ì¸ë±ìŠ¤ê°€ ì—†ëŠ” ê²ƒì´ë‹¤. (ì´ê±¸ ë³´ê³  ì¸ë±ìŠ¤ë¥¼ íƒ€ê²Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤) key ìµœì í™”ë¥¼ ìœ„í•´ Mysql ì˜µí‹°ë§ˆì´ì €ê°€ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í•œ ì¸ë±ìŠ¤ ref ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ í‚¤ì™€ í•¨ê»˜ ì‚¬ìš©ëœ ì»¬ëŸ¼ ë˜ëŠ” ìƒìˆ˜ rows ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ê²€ìƒ‰í•´ì•¼ í•  Rowì˜ ê°¯ìˆ˜ Extra Mysql ì˜µí‹°ë§ˆì´ì €ê°€ ì¶”ê°€ë¡œ í•´ì„í•œ ì •ë³´. using index : ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ ìë£Œ ì¶”ì¶œ using where : where ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ì¶œ, ë§Œì•½ typeì´ NULLì¸ë° ì´ ê°’ì´ ë‚˜ì™”ë‹¤ë©´ ì¿¼ë¦¬ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•Šë‹¤ëŠ” ëœ» using temporary: ì¿¼ë¦¬ ì•ˆì—ì„œ ì„ì‹œ í…Œì´ë¸”ì„ ìƒì„±/ì‚¬ìš© using filesort: ë°ì´í„° ì •ë ¬ ì—°ì‚°ì´ í¬í•¨ë¨. Reference [Clustered Vs Non Clustered Index] [ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ëŠ” ì™œ B-Treeë¥¼ ì„ íƒí•˜ì˜€ëŠ”ê°€] [R-tree ì•Œê³ ë¦¬ì¦˜] [Mysql Explain ì‹¤í–‰ê³„íš ì‚¬ìš©ë²• ë° ë¶„ì„] ","date":"2021-06-21","permalink":"https://leeleelee3264.github.io/post/2021-06-21-mysql-index/","tags":["Infra"],"title":"MySQL Index"},{"content":"\në¦¬ëˆ…ìŠ¤ ì„œë²„ ì„¤ì¹˜ì™€ ì´ˆê¸° ì„¤ì •ì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.\nIndex\në¦¬ëˆ…ìŠ¤ ì„¤ì¹˜ ì´ˆê¸° ë„¤íŠ¸ì›Œí¬ ì„¤ì • SSH ì„¤ì • ì‚¬ìš©ì ì„¤ì • ê¸°íƒ€ ì„¤ì • MariDB ì„¤ì¹˜/ì„¤ì • ë¦¬ëˆ…ìŠ¤ ì„¤ì¹˜ ë¦¬ëˆ…ìŠ¤ ì„¤ì¹˜ìš© usb ë¦¬ëˆ…ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ë ¤ë©´ ì„¤ì¹˜ìš© usbë¥¼ ë¨¼ì € ë§Œë“¤ì–´ì•¼ í•œë‹¤. [ë¦¬ëˆ…ìŠ¤ usb ë§Œë“¤ê¸°] ì´ ë¸”ë¡œê·¸ì— ë‚˜ì˜¤ëŠ” í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•´ì„œ Rufus ë¡œ ìš°ë¶„íˆ¬ 20 server ìš© ë¶€íŒ… usb ë¥¼ ë§Œë“¤ì—ˆë‹¤.\në¶€íŒ…ìš© usbê°€ ë§Œë“¤ì–´ì§€ë©´ ë‹¤ë¥¸ ìš´ì˜ì²´ì œë¥¼ ì„¤ì¹˜í• ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë¶€íŒ…ì‹œì— boot configurationìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ë²„íŠ¼ì„ ì—´ì‹¬íˆ ëˆŒëŸ¬ì„œ usb driveë¥¼ ì„ íƒí•´ì„œ ë¶€íŒ…í•˜ë©´ ë¦¬ëˆ…ìŠ¤ ì„¤ì¹˜ëŠ” ëì´ ë‚œë‹¤.\në¦¬ëˆ…ìŠ¤ server VS desktop ì‚¬ì‹¤ ì´ì „ì— í•œê°€ì§€ ì‹¤ìˆ˜ë¥¼ í–ˆëŠ”ë° ìš°ë¶„íˆ¬ 20 desktop ë¶€íŒ… usbë¥¼ ë§Œë“¤ì–´ì„œ ì„œë²„ë¥¼ ì„¤ì¹˜í–ˆë‹¤. ë…¸íŠ¸ë¶ì„ ë‹«ì„ë•Œ ìš´ì˜ì²´ì œì—ì„œ ì¼ì–´ë‚˜ëŠ” ë™ì‘ì„ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë‹«ëŠ” ë™ì‘ì„ ë¬´ì‹œí•˜ë©´ ì„œë²„ê°€ ê³„ì† ì¼œì €ìˆì„ ê±°ë¼ê³  ìƒê°í–ˆëŠ”ë° 1ì£¼ì¼ ì •ë„ ë…¸íŠ¸ë¶ì„ ë‹«ê³  ì„œë²„ë¥¼ ëŒë¦¬ë‹ˆ ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆë‹¤. ì°¾ì•„ë³´ë‹ˆ ìš°ë¶„íˆ¬ë¥¼ ì„œë²„ë¡œ ëŒë¦´ ëª©ì ì´ë¼ë©´ ì´ˆë°˜ë¶€í„° ê¼­! ìš°ë¶„íˆ¬ ì„œë²„ìš©ì„ ì‚¬ìš©í•´ì•¼ í–ˆë‹¤.\n[ë…¸íŠ¸ë¶ ë®ì–´ë„ ì„œë²„ ìœ ì§€] ì´ í¬ìŠ¤íŒ…ì— ë…¸íŠ¸ë¶ ë‹«ì„ ë•Œ ìš°ë¶„íˆ¬ì˜ ì‘ë™ ì œì–´ ë°©ë²•ì´ ë‚˜ì™€ìˆë‹¤.\në¦¬ëˆ…ìŠ¤ ì„¤ì¹˜ ë…¸íŠ¸ë¶ ë¦¬ëˆ…ìŠ¤ë¥¼ ì„¤ì¹˜í•  ë…¸íŠ¸ë¶ì€ dell xps 14 2012 ëª¨ë¸ë¡œ InsydeH20 biosë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì²˜ìŒì—ëŠ” ì´ bios ì„¤ì • ì‚¬í•­ë“¤ì„ ì˜ ëª°ë¼ì„œ ì‹œê°„ì„ ë§ì´ ì¼ëŠ”ë° ì´ [ë¸”ë¡œê·¸] ë¥¼ ë³´ë©´ì„œ ë”°ë¼í•  ìˆ˜ ìˆì—ˆë‹¤.\nì´ˆê¸° ë„¤íŠ¸ì›Œí¬ ì„¤ì • í¬ìŠ¤íŒ…ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ì™€ì´íŒŒì´ë¡œ ì—°ê²°í–ˆëŠ”ë°, ë„¤íŠ¸ì›Œí¬ ì†ë„ê°€ ë„ˆë¬´ ëŠë ¤ ë‚˜ì¤‘ì—ëŠ” ê²°êµ­ ì´ë”ë„· ì—°ê²°ì„ í–ˆë‹¤.\nì™€ì´íŒŒì´ ì—°ê²° ì§‘ì—ì„œ KT ì™€ì´íŒŒì´ë¥¼ ì“°ê¸° ë•Œë¬¸ì— ìš°ë¶„íˆ¬ ì„œë²„ì—ì„œë„ ì™€ì´íŒŒì´ì— ì—°ê²°í•˜ë ¤ê³  í–ˆëŠ”ë° ì´ˆê¸°ì—ëŠ” ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ê³  ë‚˜ì„œëŠ” ëœì„ ì— ìš°ì„  ì—°ê²°ì„ í•´ì•¼ í•œë‹¤.\nì™€ì´íŒŒì´ì— ì—°ê²°í•˜ë ¤ë©´ ëª‡ê°œì˜ íŒ¨í‚¤ì§€ë¥¼ ë°›ì•„ì•¼ í•˜ëŠ”ë° ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì§€ ì•Šì€ ìƒíƒœë¡œëŠ” ë‹¤ìš´ì„ ë°›ì„ ìˆ˜ ì—†ë‹¤\u0026hellip; ìš°ë¶„íˆ¬ ë°ìŠ¤í¬í†±ì—ëŠ” ê¸°ë³¸ìœ¼ë¡œ ê¹”ë ¤ìˆìœ¼ë‚˜ ìš°ë¶„íˆ¬ ì„œë²„ì—ì„œëŠ” ì§ì ‘ ë‹¤ìš´ ë°›ì•„ì¤˜ì•¼ í•œë‹¤. ì—¬ëŸ¬ê°€ì§€ í¬ìŠ¤íŒ…ì„ ì°¾ì•„ë³´ë‹¤ê°€ [wpaë¡œ ì™€ì´íŒŒì´ ì—°ê²°] ë³´ê³  ê·¸ëŒ€ë¡œ ë”°ë¼í•˜ë©° ì™€ì´íŒŒì´ ì—°ê²°ì— ì„±ê³µí–ˆë‹¤.\nwpa ì‹¤í–‰\n1 sudo wpa_supplicant -c /etc/wpa_supplicant.conf -i wlp4s0 ì´ ì»¤ë§¨ë“œì—ì„œ \u0026amp;ì„ ì‚¬ìš©í•´ì„œ ë°±ê·¸ë¼ìš´ë“œë¡œ ëŒë¦¬ë ¤ê³  í–ˆëŠ”ë° ì•„ë¬´ë¦¬ í•´ë„ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì´ ì•ˆ ë˜ì–´ì„œ ctrl + alt + f1 ~f6 ìœ¼ë¡œ ì „í™˜í•  ìˆ˜ ìˆëŠ” í„°ë¯¸ë„ ì¤‘ í•˜ë‚˜ì—ì„œ ì € ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ê³  ë‹¤ë¥¸ ì‘ì—…ë“¤ì€ ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ì§„í–‰í–ˆë‹¤.\nê·¸ëŸ°ë° í¬ìŠ¤íŠ¸ë¥¼ ì“°ê³  ìˆëŠ” ì§€ê¸ˆ ë³´ë‹ˆê¹Œ wpa_supplicantì—ì„œ ë°±ê·¸ë¼ìš´ë“œë¥¼ ì§€ì›í•˜ëŠ” ì»¤ë§¨ë“œê°€ ë”°ë¡œ ìˆì—ˆë‹¤. \u0026amp;ë¡œ ì§ì ‘ ë°±ê·¸ë¼ìš´ë“œë¡œ ëŒë¦¬ëŠ”ê²Œ ì•„ë‹ˆì—ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\nwpa ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰\n1 sudo wpa_supplicant -B -c /etc/wpa_supplicant.conf -i wlp4s0 ê³ ì • ip ì„¤ì •í•˜ê¸° ì´ë”ë„·ì´ë‚˜ ì™€ì´íŒŒì´ë¥¼ ì—°ê²°í•´ì„œ ì‚¬ìš©í• ë•Œë©´ ì„œë²„ê°€ ì„¤ì¹˜ëœ ì»´í“¨í„°ë¥¼ ì¢…ë£Œí–ˆë‹¤ê°€ ë‹¤ì‹œ í‚¤ë©´ í• ë‹¹ëœ ipì£¼ì†Œê°€ ë°”ë€”ë•Œê°€ ìˆë‹¤. ì–¼ë§ˆì „ì— íšŒì‚¬ì—ì„œ ì •ì „ì´ ë˜ì–´ì„œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ë˜ ì„œë²„ ì»´í“¨í„° ì „ì›ì´ ë‚˜ê°”ë‹¤ê°€ ë‹¤ì‹œ ë“¤ì–´ì™”ëŠ”ë° sshë¡œ ì ‘ì†ì´ ì•ˆë˜ì–´ì„œ ì»´í“¨í„°ì— í™”ë©´ì„ ì—°ê²°í•´ì„œ ì§ì ‘ ë³´ë‹ˆ IP ì£¼ì†Œê°€ ë°”ë€Œì–´ìˆì—ˆë‹¤. ì´ëŸ° ë¶ˆìƒì‚¬ë¥¼ í”¼í•˜ê³  ì‹¶ë‹¤ë©´ ê³ ì • ipë¥¼ í• ë‹¹í•´ì£¼ë©´ ëœë‹¤.\në§¤ë²ˆ ì´ë”ë„·ìœ¼ë¡œë§Œ ê³ ì • ipë¥¼ ì„¤ì •í–ˆëŠ”ë° ì™€ì´íŒŒì´ë„ í° ì°¨ì´ ì—†ì´ ì•„ë˜ì™€ ê°™ì´ í•˜ë©´ ëœë‹¤. ì•„ë˜ì— ì‘ì„±ëœ íŒŒì¼ì€ netplanì—ì„œ ì‚¬ìš©í•˜ëŠ” yaml íŒŒì¼ì¸ë° ìˆ˜ì •í•˜ê³  ì ìš©í•˜ë ¤ë©´ ê¼­ netplan apply ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•´ì£¼ì. ê·¸ë¦¬ê³  netplanì„ ì‚¬ìš©í•˜ëŠ” ìš°ë¶„íˆ¬ ë²„ì „ì€ 18 ë¶€í„°ë‹¤.\nê³ ì • ipë¥¼ ìœ„í•œ netplan íŒŒì¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # This is the network config written by \u0026#39;subiquity\u0026#39; network: ethernets: enp7s0: dhcp4: true version: 2 wifis: wlp8s0: dhcp4: no dhcp6: no addresses: [ 172.30.1.100/24 ] gateway4: 172.30.1.254 nameservers: addresses: [ 8.8.8.8, 1.1.1.1 ] access-points: \u0026#34;KT_GiGA_2G_FO1F\u0026#34;: password: \u0026#34;wifi_password\u0026#34; SSH ì„¤ì • ì‚¬ì‹¤ ì„œë²„ ì»´í“¨í„°ëŠ” ì§ì ‘ ì‘ë™ì„ ì‹œí‚¬ ì¼ì´ ê±°ì˜ ì—†ë‹¤. ëŒ€ë¶€ë¶„ sshë¥¼ ì´ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„œë²„ ì»´í“¨í„° ì†ì˜ ì„œë²„ì— ì ‘ì†ì„ í•œë‹¤. ì´ì œ ssh ì ‘ì†ì„ ìœ„í•œ ì„¸íŒ…ê³¼ ssh ë¡œ ì ‘ì†í•  ìœ ì €ë¥¼ ìœ„í•œ ì„¸íŒ…ì„ í•´ë³´ì.\nSSH server ì„¤ì¹˜\n1 2 3 4 5 6 # ì„¤ì¹˜ sudo apt-get install openssh-server # ssh port open sudo ufw enable sudo ufw allow 22 ì„¤ì •íŒŒì¼ì— ssh_configì™€ sshd_config ë‘ê°œê°€ ìˆëŠ”ë° ëŒ€ë¶€ë¶„ì˜ ì¡°ì‘ì€ sshd_configì—ì„œ ë°”ê¿”ì¤˜ì•¼í•œë‹¤. ë¦¬ëˆ…ìŠ¤ ë„¤ì„ì»¨ë°´ì…˜ì„ ìƒê°í•´ë³´ë©´ sshd_configëŠ” sshê°€ ë°ëª¬í”„ë¡œì„¸ìŠ¤ë¡œ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ì´ ë ë•Œë¥¼ ì»¨íŠ¸ë¡¤ í•˜ëŠ” íŒŒì¼ì´ ì•„ë‹ê¹Œ?\në¹„ë°€ë²ˆí˜¸ë¡œ SSH ì ‘ì† ì´ë²ˆì—ëŠ” ì„œë²„ ì§ì ‘ ì„¤ì¹˜ë¼ì„œ ìƒê´€ì´ ì—†ëŠ”ë° ë§Œì•½ awsì™€ ê°™ì€ í´ë¼ìš°ë“œì—ì„œ ì„œë²„ë¥¼ ë§Œë“¤ì–´ì„œ êµ¬ë™í•œë‹¤ë©´ pem í‚¤ë¥¼ ë°œê¸‰í•´ì¤€ë‹¤. ë¬¸ì œëŠ” ì´ pemí‚¤ë¥¼ í•œ ë²ˆ ë°œê¸‰í•´ì£¼ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ëª…ì´ í•´ë‹¹ ì„œë²„ì— ì ‘ì†í•˜ë ¤ë©´ ë¶ˆí¸í•˜ë‹¤. í•œëª…ì´ pemí‚¤ë¡œ ì„œë²„ì— ì ‘ì†ì„ í•˜ê³  sshë¥¼ ì„¤ì¹˜í•´ì„œ key ë¿ë§Œ ì•„ë‹ˆë¼ ë¹„ë°€ë²ˆí˜¸ë¡œë„ ì ‘ì†ì„ í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤.\nsshd_config íŒŒì¼\n1 2 # ë¹„ë°€ë²ˆí˜¸ ì ‘ì†í—ˆìš© PasswordAuthentication yes ì‚¬ìš©ì ì„¤ì • sshë¥¼ ì„¤ì • ì™„ë£Œ í–ˆë‹¤ë©´ sshë¥¼ ì´ìš©í•´ì„œ ë¡œê·¸ì¸í•  ì‚¬ìš©ìì™€ ê·¸ë£¹ì„ ë§Œë“¤ì–´ì£¼ì. ì•ìœ¼ë¡œ sshë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸ì„ í•˜ë©´ ì´ ì‚¬ìš©ìê°€ ë˜ì–´ ì„œë²„ë¥¼ ëŒì•„ë‹¤ë‹ˆê¸° ë•Œë¬¸ì— ê¼­ sudoerê¹Œì§€ ì„¤ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤. ì ‘ì†í• ë•Œ ì•„ì˜ˆ í•´ë‹¹ ìœ ì €ë¥¼ ë„£ì–´ì„œ ì ‘ì†ì„ í•œë‹¤. ssh user@address\nê·¸ë£¹ê³¼ ì‚¬ìš©ì ìƒì„± ê·¸ë£¹, ì‚¬ìš©ì ìƒì„±\n1 2 3 4 5 6 7 8 9 10 11 # make group sudo addgroup \u0026#34;group_name\u0026#34; # make user sudo adduser \u0026#34;user_name\u0026#34; # put the user in the group gpasswd -a \u0026#34;user_name\u0026#34; \u0026#34;group_name\u0026#34; # check the user is now in the group getent group \u0026#34;group_name\u0026#34; ì°¸ê³ ë¡œ ì„œë²„ ì•ˆì— ìˆëŠ” ê·¸ë£¹ë“¤ê³¼ ìœ ì €ë“¤ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” /etcì— ìˆëŠ” groupê³¼ passwd íŒŒì¼ì„ ì§ì ‘ ì¡°íšŒí•˜ëŠ”ë° ì•„ë˜ì™€ ê°™ì€ ì»¤ë§¨ë“œë¥¼ ì“°ë©´ ì¢€ ë” ê¹”ë”í•˜ê²Œ ë³¼ ìˆ˜ ìˆë‹¤.\nê·¸ë£¹, ì‚¬ìš©ì ì¡°íšŒ\n1 2 3 4 5 # group list cut -d : -f1 /etc/group # user list cut -d : -f1 /etc/passwd ì‚¬ìš©ìì—ê²Œ ê¶Œí•œ ë¶€ì—¬í•´ì£¼ê¸° ë”± ë‘ê°€ì§€ ê¶Œí•œì´ í•„ìš”í•˜ë‹¤.\nì„œë²„ì—ì„œ sudo ì»¤ë§¨ë“œë¥¼ ì“°ê¸° ìœ„í•´ sudoer ê¶Œí•œì´ í•„ìš”í•˜ê³ , ì†ŒìŠ¤ì½”ë“œë‚˜ ì‹¤í–‰íŒŒì¼ë“± ê°œë°œí•œ ê²ƒë“¤ì„ /opt íŒŒì¼ì— ë‘ê³  ì¡°ì‘ì„ í•˜ê¸° ë•Œë¬¸ì— ì†Œìœ ê°€ rootë¡œ ë˜ì–´ìˆëŠ” optë””ë ‰í„°ë¦¬ë¥¼ ì‚¬ìš©ìë¡œ ë°”ê¿”ì¤˜ì•¼ í•œë‹¤. ì•ˆ ë°”ê¾¸ë©´ ë§¤ë²ˆ ë””ë ‰í„°ë¦¬ ì•ˆì—ì„œ ë­˜ ì¡°ì‘í•˜ë ¤ë©´ root ê¶Œí•œì´ í•„ìš”í•´ì„œ sudoë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.\netc ë””ë ‰í„°ë¦¬ì˜ sudoers íŒŒì¼ ìˆ˜ì •ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì„ ë¶€ì—¬í•´ì¤„ ìˆ˜ ìˆë‹¤.\nsudoers íŒŒì¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 sudo vi /etc/sudoers # User privilege specification root ALL=(ALL:ALL) ALL dev ALL=(ALL:ALL) ALL # ì•„ë˜ì²˜ëŸ¼ í•˜ë©´ sudo ì‹¤í–‰ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•ˆ ë„£ì–´ë„ ëœë‹¤. dev ALL=(ALL:ALL) NOPASSWD: ALL # ë””ë ‰í„°ë¦¬ ì†Œìœ ê¶Œ ë°”ê¾¸ê¸° (ì‚¬ìš©ì) sudo chown \u0026#34;user_name\u0026#34; opt # ë””ë ‰í„°ë¦¬ ì†Œìœ ê¶Œ ë°”ê¾¸ê¸° (ê·¸ë£¹) sudo chown :\u0026#34;group_name\u0026#34; opt ê¸°íƒ€ ì„¤ì • í”„ë¡¬í”„íŠ¸ ê°œì¸í™” ì²˜ìŒ ì„œë²„ë¥¼ íŒŒë©´ í”„ë¡¬í”„íŠ¸ê°€ ë³´ê¸°ê°€ ë‹¤ì†Œ ë¶ˆí¸í•˜ë‹¤. ì´ê²ƒë„ ì…ë§›ì— ë§ê²Œ ë°”ê¿€ ìˆ˜ ìˆëŠ”ë° ì‚¬ìš©ì ì„¤ì •íŒŒì¼ì¸ .bashrcì•ˆì— ìˆëŠ” PS1 ë¶€ë¶„ì„ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤. ì‚¬ìš©ìë³„ë¡œ ì„¤ì •ì´ ë˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‚¬ìš©ìì˜ í™ˆ ë””ë ‰í„°ë¦¬ì— ë“¤ì–´ê°€ì„œ ìˆ˜ì •ì„ í•´ì£¼ë„ë¡ í•˜ì.\n.bashrc íŒŒì¼\n1 2 3 4 5 6 7 8 9 10 11 vi ~/.bashrc IP=$( ifconfig | grep \u0026#39;inet addr:\u0026#39; | grep -v \u0026#39;127.0.0.1\u0026#39; | tail -1 | cut -d: -f2 | awk \u0026#39;{ print $1}\u0026#39;) if [ \u0026#34;$color_prompt\u0026#34; = yes ]; then PS1=\u0026#39;ğŸ„HOME `date +%T` ${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@$IP\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ \u0026#39; else PS1=\u0026#39;ğŸ„HOME `date +%T` ${debian_chroot:+($debian_chroot)}\\u@$IP\\h:\\w\\$ \u0026#39; fi # apply bashrc source ~/.bashrc ê°„ë‹¨í•˜ê²Œ ì„œë²„ ì´ë¦„ + ì‹œê°„ + ìœ ì €ì´ë¦„ì´ ë³´ì´ë„ë¡ ìˆ˜ì •ì„ í–ˆëŠ”ë° í”„ë¡¬í”„íŠ¸ëŠ” ë¬´ê¶ë¬´ì§„í•˜ê²Œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤. [í”„ë¡¬í”„íŠ¸ í…Œë§ˆ] ë¥¼ ë³´ë©´ ë” ë‹¤ì–‘í•œ í˜•íƒœë¡œ ìˆ˜ì •ì„ í•  ìˆ˜ ìˆë‹¤.\nì‹œê°„ëŒ€ ë³€ê²½ ì„œë²„ ì‹œê°„ì€ UTCë¡œ í•˜ëŠ” ê²ƒì´ ì—…ê³„ í‘œì¤€ì´ë‹¤. ì•ìœ¼ë¡œëŠ” ê¼­ ì¤€ìˆ˜í•˜ë„ë¡ í•˜ì.\nì„œë²„ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ë©´ ì‹œê°„ëŒ€ê°€ ê¸°ë³¸ UTCë¡œ ì„¤ì •ì´ ë˜ì–´ìˆë‹¤. ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¥¼ í•˜ë©´ ì„¸ê³„ ê¸°ì¤€ì‹œê°€ UTCë¼ì„œ ê·¸ëŒ€ë¡œ ë‚´ë²„ë ¤ë‘¬ë„ ë˜ëŠ”ë° ê°œì¸ì´ í•œêµ­ì—ì„œ ì“°ëŠ” ì„œë²„ë¼ì„œ KSTë¡œ ë³€ê²½í–ˆë‹¤. ì„œë²„ì˜ ì‹œê°„ëŒ€ëŠ” date ë¥¼ ì°ì–´ë³´ë©´ ë§¨ ë’¤ì— ì–´ë–¤ ì‹œê°„ëŒ€ì¸ì§€ ë‚˜ì˜¨ë‹¤.\nì‹œê°„ëŒ€ ë³€ê²½\n1 2 3 4 5 # ì–´ë–¤ ì‹œê°„ëŒ€ë¥¼ ì§€ì›í•˜ë‚˜ ë¨¼ì € í™•ì¸ timedatectl list-timezones # ì‹œê°„ëŒ€ë¥¼ ì„œìš¸ë¡œ ë³€ê²½ timedatectl set-timezone Asia/Seoul ì„œë²„ ì„¤ì¹˜ í›„ ì„¤ì¹˜í•  ê²ƒë“¤ build-essential build-essential íŒ¨í‚¤ì§€ëŠ” ê°œë°œì— í•„ìš”í•œ ê¸°ë³¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í—¤ë”íŒŒì¼ë“¤ì„ ê°€ì§€ê³  ìˆëŠ”ë° C ì»´íŒŒì¼ëŸ¬ ë“±ë“±ì´ í¬í•¨ë˜ì–´ìˆë‹¤. ìš°ë¶„íˆ¬ì— ì„¤ì¹˜ë˜ëŠ” ê¸°ë³¸ íŒ¨í‚¤ì§€ ìƒì„¸ ì •ë³´ëŠ” [ìš°ë¶„íˆ¬ íŒ¨í‚¤ì§€]ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.\nbuild-essential íŒ¨í‚¤ì§€ ì„¤ì¹˜\n1 2 # install build-essential sudo apt-get install build-essential Java ê°œë°œì„ ìë°”ë¡œ í•˜ë‹¤ë³´ë‹ˆê¹Œ ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ë©´ í•„ìˆ˜ì ìœ¼ë¡œ ìë°”ë¥¼ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. ì„œë²„ì—ì„œ ì–´ë–¤ ìë°” ë²„ì „ë“¤ì„ ì§€ì›í•˜ëŠ”ì§€ ë³´ê³  ì›í•˜ëŠ” ë²„ì „ì„ ì„¤ì¹˜í•´ì£¼ë©´ ëœë‹¤.\nìë°” ì„¤ì¹˜\n1 2 3 4 5 # ì„¤ì¹˜ ê°€ëŠ¥í•œ jdk í™•ì¸ sudo apt search jdk # ì„¤ì¹˜ sudo apt-get install \u0026#34;java_version\u0026#34; ì´ì •ë„ë¡œ í•˜ë©´ ì´ˆê¸°ì— ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í•´ì¤˜ì•¼í•˜ëŠ” ì„¸íŒ…ë“¤ì´ ì–´ëŠì •ë„ ì •ë¦¬ê°€ ëœë‹¤. ë°‘ì—ëŠ” ì„œë²„ ì‚¬ìš©í•˜ë©´ì„œ ê·¸ë•Œê·¸ë•Œ ìƒê°ë‚˜ëŠ” í¸ì˜ë¥¼ ìœ„í•œ ì„¸íŒ…ë“¤ì„ ê¸°ë¡í•  ì˜ˆì •ì´ë‹¤.\nvië“¤ì–´ê°€ë©´ ì¤„ë²ˆí˜¸ ë‚˜ì˜¤ê²Œ ë³€ê²½ ê¸°ë³¸ ë””ë ‰í† ë¦¬ì˜ .vimrc ë¥¼ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤.\n.vimrc íŒŒì¼\n1 2 3 4 5 # open vim setting for user vi ~/.vimrc # add this in vimrc file set number í”„ë¡¬í”„íŠ¸ ip ì£¼ì†Œ ë‚˜ì˜¤ê²Œ ë³€ê²½ vi ~/.bashrc ë¡œ userë³„ ì„¤ì • íŒŒì¼ì„ ì—´ì–´ì£¼ê³  PS1 ìˆëŠ” ë¶€ë¶„ì„ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì£¼ë©´ ëœë‹¤. ê·¸ëŸ¼ user_name@|ip_address| ì´ëŸ° í˜•íƒœë¡œ í”„ë¡¬í”„íŠ¸ê°€ ë³€í•œë‹¤.\n.bashrc íŒŒì¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # Set the prompt to include the IP address instead of hostname function get_ip () { IFACE=$(ip -4 route | grep default | head -n1 | awk \u0026#39;{print $5}\u0026#39;) if [ ! -z $IFACE ]; then echo -n \u0026#34;|\u0026#34;; ip -4 -o addr show scope global $IFACE | awk \u0026#39;{gsub(/\\/.*/, \u0026#34;|\u0026#34;,$4); print $4}\u0026#39; | paste -s -d \u0026#34;\u0026#34; else echo -n \u0026#34;||\u0026#34; fi } if [ \u0026#34;$color_prompt\u0026#34; = yes ]; then PS1=\u0026#39;${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u\\[\\033[01;34m\\]@\\[\\033[32m\\]$(get_ip)\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ \u0026#39; else PS1=\u0026#39;${debian_chroot:+($debian_chroot)}\\u@$(get_ip):\\w\\$ \u0026#39; fi unset color_prompt force_color_prompt ìš°ë¶„íˆ¬ ê¸°ë³¸ shell ì„¤ì • ë³€ê²½ ê°€ë” ë„ì»¤ë¥¼ ì“°ê±°ë‚˜ ìƒˆë¡œ ì„œë²„ë¥¼ ë§Œë“¤ë©´ ì‰˜ì— ì•„ë¬´ê²ƒë„ ë‚˜ì˜¤ì§€ ì•Šê³  $ í‘œì‹œë§Œ ë‚˜ì˜¤ëŠ” ë–„ê°€ ìˆë‹¤. ìš°ë¶„íˆ¬ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì‰˜ì´ c shellë¡œ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ê³ , ê¸°ë³¸ ì‰˜ì„ bash shellë¡œ ë°”ê¿”ì£¼ë©´ ìµìˆ™í•œ í˜•íƒœì˜ í„°ë¯¸ë„ ì‰˜ì´ ëœë‹¤.\nì‚¬ìš©ìì— ë”°ë¼ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ëœ ì‰˜ì´ ë‹¤ë¥¸ë°, ì´ëŠ” /etc/passwd íŒŒì¼ì—ì„œ í™•ì¸ì„ í•  ìˆ˜ ìˆë‹¤. ìœ„ì˜ ì´ë¯¸ì§€ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê³„ì •ì„ ì°¾ì•„ /bin ë’¤ì˜ ë¶€ë¶„ì„ ë°”ê¿”ì£¼ë©´ ëœë‹¤. ë‚˜ëŠ” devë¼ëŠ” ê³„ì •ì„ ì“°ê³  ìˆê³ , bash shellë¡œ ë°”ê¾¸ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì— /bin/bash ë¡œ ìˆ˜ì •í•´ì£¼ì—ˆë‹¤. ìˆ˜ì •ì„ í•´ì£¼ê³  ë¡œê·¸ì¸ì„ ë‹¤ì‹œ í•´ì£¼ë©´ í„°ë¯¸ë„ì´ ë³€ê²½ëœ ì‰˜ë¡œ ë‚˜ì˜¨ë‹¤!\n[Picture 1] Bash MariDB ì„¤ì¹˜/ì„¤ì • Maria DB ì„¤ì¹˜í•˜ê¸° ê°œì¸ í”„ë¡œì íŠ¸ì—ì„œ DBë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ì„œ ìš°ë¶„íˆ¬ì— ë§ˆë¦¬ì•„ DBë¥¼ ì„¤ì¹˜í–ˆëŠ”ë° MySQLê³¼ ì¤‘ì²©ì´ ë˜ëŠ” ë‘¥ ëª‡ ë²ˆ ì˜ëª» ì„¤ì¹˜ë¥¼ í•´ì„œ ì„œë²„ë¥¼ ë‹¤ì‹œ ë°€ê³  ì„¤ì¹˜í•˜ê¸°ë¥¼ ë°˜ë³µí–ˆë‹¤. ê²°êµ­ì€ [ìš°ë¶„íˆ¬ì— Maria DB ì„¤ì¹˜]ë³´ë©´ì„œ ë¬´ì‚¬íˆ DB ì„¤ì¹˜ë¥¼ ë§ˆì³¤ë‹¤.\nMaria DB ì„¤ì¹˜\n1 2 3 sudo apt update sudo apt install mariadb-server sudo mysql_secure_installation sudo mysql_secure_installation ì„ ì‹¤í–‰í•˜ë©´ Maria DBì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ë˜ëŠ” ë³´ì•ˆ ì˜µì…˜ì„ ì¡°ê¸ˆ ë” ë³´ì™„í•  ìˆ˜ ìˆê²Œ ì˜µì…˜ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\nmysql_secure_installation ì„¤ì • ë³€ê²½ í”„ë¡¬í”„íŠ¸\n1 2 3 4 5 6 7 8 # localhost ì—ì„œë§Œ access ê°€ëŠ¥í•œ ê³„ì • GRANT ALL ON *.* TO \u0026#39;admin\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;password\u0026#39; WITH GRANT OPTION; # ëª¨ë“  IPì—ì„œ accessê°€ ê°€ëŠ¥í•˜ê²Œ ì™€ì¼ë“œì¹´ë“œë¥¼ ë¶€ì—¬í•œ ê³„ì • GRANT ALL ON *.* TO \u0026#39;admin\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED BY \u0026#39;password\u0026#39; WITH GRANT OPTION; # mysql ê³„ì •ê³¼ ê´€ë ¨ëœ ì‘ì—… í›„ì—ëŠ” ê¼­ flushë¥¼ í•´ì„œ refresh ë¥¼ í•´ì£¼ì! FLUSH PRIVILEGES; DBë¥¼ ì¡°ì‘í•  ë•ŒëŠ” ë˜ë„ë¡ ROOTë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— DB ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ë©´ì„œ defaultë¡œ ì‚¬ìš©í•  ê³„ì •ë„ í•¨ê»˜ ë§Œë“¤ì–´ì¤¬ë‹¤. ì´ ê³„ì •ì„ localhost ì—ì„œë§Œ ì‚¬ìš©ì„ í•œë‹¤ë©´ ì—¬ê¸°ì„œ ëì´ì§€ë§Œ remote í™˜ê²½ì—ì„œ í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ì ‘ì†ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ ëª‡ê°€ì§€ ì„¤ì •ì„ ë” í•´ì¤˜ì•¼ í•œë‹¤.\nMaria DB ë¦¬ëª¨íŠ¸ ì ‘ì† í—ˆìš© ì›ê²© í™˜ê²½ì—ì„œ DBì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì˜ 3ê°€ì§€ ì‚¬í•­ì„ ì„¤ì •í•´ì•¼ í•œë‹¤.\në¦¬ëª¨íŠ¸ ì ‘ì† ì„¤ì •\nmysql ê³„ì •ì„ ë§Œë“¤ ë•Œ ì™€ì¼ë“œ ì¹´ë“œ %ë¥¼ ë„£ë˜ê°€ access IPë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. mysql conf íŒŒì¼ì—ì„œ bind-accessê°€ localhostë¡œ ë˜ì–´ìˆëŠ”ë° 0.0.0.0ìœ¼ë¡œ ë³€ê²½ í•´ ëª¨ë‘ í—ˆìš©í•´ì¤€ë‹¤. (ì•ˆëœë‹¤ë©´) ìš°ë¶„íˆ¬ì—ì„œë„ mysql portì¸ 3306 ë°©í™”ë²½ì„ ë‚´ë ¤ì¤€ë‹¤. ë§Œì•½ awsì™€ ê°™ì€ cloud ë„ ì´ìš©í•˜ê³  ìˆë‹¤ë©´ cloud ì˜ ì„¤ì •ë„ ë³€ê²½í•´ì•¼ í•œë‹¤. mysql confë¥¼ ë³€ê²½í•˜ê³  ë‚œ í›„ mysqlì„ ì¬ì‹œì‘í•´ì£¼ë©´ ì´ì œ ì™¸ë¶€ì—ì„œë„ ë°©ê¸ˆ ë§Œë“  ê³„ì •ìœ¼ë¡œ DBì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤.\nmysql ì¬ì‹œì‘\n1 sudo /etc/init.d/mysql restart DB ë¦¬ëª¨íŠ¸ ì ‘ì† í—ˆìš©ì— ëŒ€í•œ ë³´ì•ˆ ì´ìŠˆ mysql confì—ì„œ bind-access ë¥¼ 0.0.0.0ìœ¼ë¡œ í•´ë‘ë©´ ëª¨ë“  remote IPì—ì„œ ì ‘ì†ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë³´ì•ˆìƒìœ¼ë¡œ ë¬¸ì œê°€ ìˆì§€ëŠ” ì•Šì„ê¹Œ ì°¾ì•„ë´¤ë‹¤.\nbind-accessëŠ” mysqlì´ ë“¤ì„ ìˆ˜ ìˆëŠ”(listen) íŠ¹ì • ë„¤íŠ¸ì›Œí¬ë“¤ì„ ëœ»í•œë‹¤. ì´ë ‡ê²Œ 0.0.0.0 ìœ¼ë¡œ ì—´ì–´ë²„ë¦¬ë©´ ì—­ì‹œë‚˜ ë³´ì•ˆìƒìœ¼ë¡œ ì¢‹ì§€ ì•Šë‹¤ê³  í•œë‹¤. default ì„¤ì •ì²˜ëŸ¼ ê·¸ëƒ¥ ë¡œì»¬ ë¨¸ì‹ ì—ì„œë§Œ DBì™€ ì—°ê²°í•˜ëŠ” ê²Œ ì œì¼ ì•ˆì „í•˜ë‹¤.\nbind-access ì„¤ì •ì— ë”°ë¥¸ ë¦¬ëª¨íŠ¸ ì ‘ì† ì°¨ì´\nIf MySQL binds to 127.0.0.1, then only software on the same computer will be able to connect (because 127.0.0.1 is always the local computer). If MySQL binds to 192.168.0.2 (and the server computer\u0026rsquo;s IP address is 192.168.0.2 and it\u0026rsquo;s on a /24 subnet), then any computers on the same subnet (anything that starts with 192.168.0) will be able to connect. If MySQL binds to 0.0.0.0, then any computer which is able to reach the server computer over the network will be able to connect. ë³´ì•ˆ ì´ìŠˆë¥¼ í•´ê²°í•˜ë ¤ë©´? ì™¸ë¶€ì—ì„œ ì ‘ì†ì„ í•´ì•¼ í•´ì„œ bind-addressë¥¼ í™œì§ ì—´ì–´ë²„ë ¸ëŠ”ë° ë³´ì•ˆì„ ì¡°ê¸ˆì´ë¼ë„ ê°•í™”í•˜ë ¤ë©´ mysql user ì„¤ì •ì„ í•  ë•Œ ì™€ì¼ë“œ ì¹´ë“œë¡œ ëª¨ë“  IPì—ì„œ access í•  ìˆ˜ ìˆê²Œ í•  ê²Œ ì•„ë‹ˆë¼ íŠ¹ì • IPì—ì„œë§Œ access í•  ìˆ˜ ìˆê²Œ í•´ì•¼ ê² ë‹¤.\n","date":"2021-04-21","permalink":"https://leeleelee3264.github.io/post/2021-04-21-linux-server-init-setting/","tags":["Infra"],"title":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ ì„¤ì¹˜ì™€ ì´ˆê¸° ì„¤ì •í•˜ê¸°"},{"content":"\nTwitter API ì™€ Github Actionì„ ì‚¬ìš©í•˜ëŠ” íŠ¸ìœ„í„° ë´‡ì„ Pythonìœ¼ë¡œ êµ¬í˜„í•œë‹¤.\n[github]\n[íŠ¸ìœ„í„° ê³„ì •]\nIndex\ní”„ë¡œì íŠ¸ ëª©í‘œ í”„ë¡œì íŠ¸ êµ¬í˜„ ë‹¤ìŒ í”„ë¡œì íŠ¸ ëª©í‘œ í”„ë¡œì íŠ¸ ëª©í‘œ í”„ë¡œì íŠ¸ ì§„í–‰ ë™ê¸° ì˜ˆì „ë¶€í„° ìë™ìœ¼ë¡œ ì‘ë‹µì„ í•´ì£¼ëŠ” ì¹´í†¡ë´‡ì´ë‚˜ ìë™ìœ¼ë¡œ íŠ¸ìœ—ì„ í•´ì£¼ëŠ” íŠ¸ìœ—ë´‡ì„ ë§Œë“œëŠ” í”„ë¡œì íŠ¸ë¥¼ í•˜ê³  ì‹¶ì—ˆëŠ”ë° ì–´ë–¤ê±¸ ë§Œë“¤ë©´ ì¢‹ì„ì§€ ëª°ë¼ ë¯¸ë¤„ë‘ê³  ìˆì—ˆë‹¤. ê·¸ëŸ°ë° ì–¼ë§ˆì „ì— ë‹¤ìŒì—ì„œ ë„·í”Œë¦­ìŠ¤ ìƒì˜ ì˜ˆì •ì‘ì„ ì•Œë ¤ì£¼ëŠ” í˜ì´ì§€ë¥¼ ë§Œë“ ê±¸ ë³´ê³  ì¼ì£¼ì¼ì— í•œ ë²ˆì”© ë„·í”Œë¦­ìŠ¤ ìƒì˜ ì˜ˆì •ì‘ì„ íŠ¸ìœ„í„° ìë™ë´‡ìœ¼ë¡œ ë§Œë“¤ë©´ í¸í•  ê²ƒ ê°™ì•„ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆë‹¤.\nGithub Action?\nê¹ƒí—ˆë¸Œì—ì„œ CI/CDë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. Actionì„ ë“±ë¡í•  ë•Œ íŒŒì´ì¬ì„ ì§€ì›í•´ì£¼ê³  ìˆì—ˆë‹¤. ë•Œë¬¸ì— Actionì— íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë“±ë¡í•˜ë©´ ë³„ë„ì˜ ì„œë²„ë¥¼ ë§Œë“¤ì§€ ì•Šê³ ë„ í¬ë¡¤ë§ì„ í•´ì„œ íŠ¸ìœ„í„°ì— ê²Œì‹œí•  ìˆ˜ ìˆê¸°ì— í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.\nê°œë°œ ëª©í‘œ\në³„ë„ì˜ ì„œë²„ë¥¼ ë„ìš°ì§€ ì•Šê¸° ìœ„í•´ github actionì„ íŠ¸ë¦¬ê±°ë¡œ ì‚¬ìš©í•œë‹¤. pythonê³¼ tweepy ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. Twitter ì—ì„œ ê°œë°œì ê³„ì •ì„ ë°œê¸‰ë°›ì•„ APIë¥¼ ì‚¬ìš©í•œë‹¤. Dev Stack stack info Backend language python Backend api twitter api Server server less Scheduler github action í”„ë¡œì íŠ¸ êµ¬í˜„ Twitter Bot Flow íŠ¸ìœ„í„° ë´‡ í”Œë¡œìš°ëŠ” [Picture 1] ê³¼ ê°™ë‹¤.\n[Picture 1] Twitter Bot Flow ë¦¬ì†ŒìŠ¤ í”„ë¡œì íŠ¸ì—ì„œ í™œìš©í•  ë¦¬ì†ŒìŠ¤ë“¤ì„ ì •ë¦¬í–ˆë‹¤.\n[Twitter API] [Python tweepy ë¼ì´ë¸ŒëŸ¬ë¦¬] [ë‹¤ìŒ ë„·í”Œë¦­ìŠ¤ í˜ì´ì§€] íŠ¸ìœ„í„° apiì™€ tweepyë¡œ íŠ¸ìœ—í•˜ê¸° íŠ¸ìœ„í„° api ê³„ì •ì„ ë§Œë“¤ê³  ëŒ€ì‹œë³´ë“œì— ë“¤ì–´ê°€ë©´ ì´ ë„¤ê°œì˜ ì¸ì¦í‚¤ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. í˜„ì¬ íŠ¸ìœ„í„° apiì—ì„œëŠ” Oauth1, 2ì™€ ê¸°ë³¸ì¸ì¦ë²• ì—¬ëŸ¬ê°œì˜ ì¸ì¦ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ì¸ì¦ë²•ì„ ì„ íƒí•´ì£¼ë©´ ëœë‹¤. íŠ¸ìœ„í„° authì— ëŒ€í•œ [ë” ìì„¸í•œ ì‚¬í•­]ì„ í™•ì¸í•´ë³´ì.\në°œê¸‰ë˜ëŠ” í‚¤\nApi key Api key secret Bearer Token Access Token Secret tweepy ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¸ì¦ ì½”ë“œ íŠ¸ìœ„í„°ê°€ ì§€ì›í•˜ëŠ” ì¸ì¦ ë°©ë²•ì´ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì— tweepyë„ ì´ì— ë§ì¶° ë‹¤ì–‘í•œ ì§€ì›ì„ í•œë‹¤. tweepyì—ì„œ ì œê³µí•˜ëŠ” [ì¸ì¦ ê¸°ëŠ¥ ë¬¸ì„œ] ì—ì„œ ìì„¸íˆ ì‚´í•„ ìˆ˜ ìˆë‹¤.\nauth.py ë”ë³´ê¸° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 # Tweepy # Copyright 2009-2020 Joshua Roesslein # See LICENSE for details. import logging import requests import six from requests.auth import AuthBase from requests_oauthlib import OAuth1, OAuth1Session from six.moves.urllib.parse import parse_qs from tweepy.api import API from tweepy.error import TweepError WARNING_MESSAGE = \u0026#34;\u0026#34;\u0026#34;Warning! Due to a Twitter API bug, signin_with_twitter and access_type don\u0026#39;t always play nice together. Details https://dev.twitter.com/discussions/21281\u0026#34;\u0026#34;\u0026#34; log = logging.getLogger(__name__) class AuthHandler(object): def apply_auth(self, url, method, headers, parameters): \u0026#34;\u0026#34;\u0026#34;Apply authentication headers to request\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError def get_username(self): \u0026#34;\u0026#34;\u0026#34;Return the username of the authenticated user\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError class OAuthHandler(AuthHandler): \u0026#34;\u0026#34;\u0026#34;OAuth authentication handler\u0026#34;\u0026#34;\u0026#34; OAUTH_HOST = \u0026#39;api.twitter.com\u0026#39; OAUTH_ROOT = \u0026#39;/oauth/\u0026#39; def __init__(self, consumer_key, consumer_secret, callback=None): if type(consumer_key) == six.text_type: consumer_key = consumer_key.encode(\u0026#39;ascii\u0026#39;) if type(consumer_secret) == six.text_type: consumer_secret = consumer_secret.encode(\u0026#39;ascii\u0026#39;) self.consumer_key = consumer_key self.consumer_secret = consumer_secret self.access_token = None self.access_token_secret = None self.callback = callback self.username = None self.request_token = {} self.oauth = OAuth1Session(consumer_key, client_secret=consumer_secret, callback_uri=self.callback) def _get_oauth_url(self, endpoint): return \u0026#39;https://\u0026#39; + self.OAUTH_HOST + self.OAUTH_ROOT + endpoint def apply_auth(self): return OAuth1(self.consumer_key, client_secret=self.consumer_secret, resource_owner_key=self.access_token, resource_owner_secret=self.access_token_secret, decoding=None) def _get_request_token(self, access_type=None): try: url = self._get_oauth_url(\u0026#39;request_token\u0026#39;) if access_type: url += \u0026#39;?x_auth_access_type=%s\u0026#39; % access_type return self.oauth.fetch_request_token(url) except Exception as e: raise TweepError(e) def set_access_token(self, key, secret): self.access_token = key self.access_token_secret = secret def get_authorization_url(self, signin_with_twitter=False, access_type=None): \u0026#34;\u0026#34;\u0026#34;Get the authorization URL to redirect the user\u0026#34;\u0026#34;\u0026#34; try: if signin_with_twitter: url = self._get_oauth_url(\u0026#39;authenticate\u0026#39;) if access_type: log.warning(WARNING_MESSAGE) else: url = self._get_oauth_url(\u0026#39;authorize\u0026#39;) self.request_token = self._get_request_token(access_type=access_type) return self.oauth.authorization_url(url) except Exception as e: raise TweepError(e) def get_access_token(self, verifier=None): \u0026#34;\u0026#34;\u0026#34; After user has authorized the request token, get access token with user supplied verifier. \u0026#34;\u0026#34;\u0026#34; try: url = self._get_oauth_url(\u0026#39;access_token\u0026#39;) self.oauth = OAuth1Session(self.consumer_key, client_secret=self.consumer_secret, resource_owner_key=self.request_token[\u0026#39;oauth_token\u0026#39;], resource_owner_secret=self.request_token[\u0026#39;oauth_token_secret\u0026#39;], verifier=verifier, callback_uri=self.callback) resp = self.oauth.fetch_access_token(url) self.access_token = resp[\u0026#39;oauth_token\u0026#39;] self.access_token_secret = resp[\u0026#39;oauth_token_secret\u0026#39;] return self.access_token, self.access_token_secret except Exception as e: raise TweepError(e) def get_xauth_access_token(self, username, password): \u0026#34;\u0026#34;\u0026#34; Get an access token from an username and password combination. In order to get this working you need to create an app at http://twitter.com/apps, after that send a mail to api@twitter.com and request activation of xAuth for it. \u0026#34;\u0026#34;\u0026#34; try: url = self._get_oauth_url(\u0026#39;access_token\u0026#39;) oauth = OAuth1(self.consumer_key, client_secret=self.consumer_secret) r = requests.post(url=url, auth=oauth, headers={\u0026#39;x_auth_mode\u0026#39;: \u0026#39;client_auth\u0026#39;, \u0026#39;x_auth_username\u0026#39;: username, \u0026#39;x_auth_password\u0026#39;: password}) credentials = parse_qs(r.content) return credentials.get(\u0026#39;oauth_token\u0026#39;)[0], credentials.get(\u0026#39;oauth_token_secret\u0026#39;)[0] except Exception as e: raise TweepError(e) def get_username(self): if self.username is None: api = API(self) user = api.verify_credentials() if user: self.username = user.screen_name else: raise TweepError(\u0026#39;Unable to get username,\u0026#39; \u0026#39; invalid oauth token!\u0026#39;) return self.username class OAuth2Bearer(AuthBase): def __init__(self, bearer_token): self.bearer_token = bearer_token def __call__(self, request): request.headers[\u0026#39;Authorization\u0026#39;] = \u0026#39;Bearer \u0026#39; + self.bearer_token return request class AppAuthHandler(AuthHandler): \u0026#34;\u0026#34;\u0026#34;Application-only authentication handler\u0026#34;\u0026#34;\u0026#34; OAUTH_HOST = \u0026#39;api.twitter.com\u0026#39; OAUTH_ROOT = \u0026#39;/oauth2/\u0026#39; def __init__(self, consumer_key, consumer_secret): self.consumer_key = consumer_key self.consumer_secret = consumer_secret self._bearer_token = \u0026#39;\u0026#39; resp = requests.post(self._get_oauth_url(\u0026#39;token\u0026#39;), auth=(self.consumer_key, self.consumer_secret), data={\u0026#39;grant_type\u0026#39;: \u0026#39;client_credentials\u0026#39;}) data = resp.json() if data.get(\u0026#39;token_type\u0026#39;) != \u0026#39;bearer\u0026#39;: raise TweepError(\u0026#39;Expected token_type to equal \u0026#34;bearer\u0026#34;, \u0026#39; \u0026#39;but got %s instead\u0026#39; % data.get(\u0026#39;token_type\u0026#39;)) self._bearer_token = data[\u0026#39;access_token\u0026#39;] def _get_oauth_url(self, endpoint): return \u0026#39;https://\u0026#39; + self.OAUTH_HOST + self.OAUTH_ROOT + endpoint def apply_auth(self): return OAuth2Bearer(self._bearer_token) oauth1_session1.py ë”ë³´ê¸° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 from __future__ import unicode_literals try: from urlparse import urlparse except ImportError: from urllib.parse import urlparse import logging from oauthlib.common import add_params_to_uri from oauthlib.common import urldecode as _urldecode from oauthlib.oauth1 import SIGNATURE_HMAC, SIGNATURE_RSA, SIGNATURE_TYPE_AUTH_HEADER import requests from . import OAuth1 log = logging.getLogger(__name__) def urldecode(body): \u0026#34;\u0026#34;\u0026#34;Parse query or json to python dictionary\u0026#34;\u0026#34;\u0026#34; try: return _urldecode(body) except Exception: import json return json.loads(body) class TokenRequestDenied(ValueError): def __init__(self, message, response): super(TokenRequestDenied, self).__init__(message) self.response = response @property def status_code(self): \u0026#34;\u0026#34;\u0026#34;For backwards-compatibility purposes\u0026#34;\u0026#34;\u0026#34; return self.response.status_code class TokenMissing(ValueError): def __init__(self, message, response): super(TokenMissing, self).__init__(message) self.response = response class VerifierMissing(ValueError): pass class OAuth1Session(requests.Session): \u0026#34;\u0026#34;\u0026#34;Request signing and convenience methods for the oauth dance. What is the difference between OAuth1Session and OAuth1? OAuth1Session actually uses OAuth1 internally and its purpose is to assist in the OAuth workflow through convenience methods to prepare authorization URLs and parse the various token and redirection responses. It also provide rudimentary validation of responses. An example of the OAuth workflow using a basic CLI app and Twitter. \u0026gt;\u0026gt;\u0026gt; # Credentials obtained during the registration. \u0026gt;\u0026gt;\u0026gt; client_key = \u0026#39;client key\u0026#39; \u0026gt;\u0026gt;\u0026gt; client_secret = \u0026#39;secret\u0026#39; \u0026gt;\u0026gt;\u0026gt; callback_uri = \u0026#39;https://127.0.0.1/callback\u0026#39; \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; # Endpoints found in the OAuth provider API documentation \u0026gt;\u0026gt;\u0026gt; request_token_url = \u0026#39;https://api.twitter.com/oauth/request_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; authorization_url = \u0026#39;https://api.twitter.com/oauth/authorize\u0026#39; \u0026gt;\u0026gt;\u0026gt; access_token_url = \u0026#39;https://api.twitter.com/oauth/access_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(client_key,client_secret=client_secret, callback_uri=callback_uri) \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; # First step, fetch the request token. \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_request_token(request_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;kjerht2309u\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;lsdajfh923874\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; # Second step. Follow this link and authorize \u0026gt;\u0026gt;\u0026gt; oauth_session.authorization_url(authorization_url) \u0026#39;https://api.twitter.com/oauth/authorize?oauth_token=sdf0o9823sjdfsdf\u0026amp;oauth_callback=https%3A%2F%2F127.0.0.1%2Fcallback\u0026#39; \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; # Third step. Fetch the access token \u0026gt;\u0026gt;\u0026gt; redirect_response = raw_input(\u0026#39;Paste the full redirect URL here.\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.parse_authorization_response(redirect_response) { \u0026#39;oauth_token: \u0026#39;kjerht2309u\u0026#39;, \u0026#39;oauth_token_secret: \u0026#39;lsdajfh923874\u0026#39;, \u0026#39;oauth_verifier: \u0026#39;w34o8967345\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_access_token(access_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;sdf0o9823sjdfsdf\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;2kjshdfp92i34asdasd\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; # Done. You can now make OAuth requests. \u0026gt;\u0026gt;\u0026gt; status_url = \u0026#39;http://api.twitter.com/1/statuses/update.json\u0026#39; \u0026gt;\u0026gt;\u0026gt; new_status = {\u0026#39;status\u0026#39;: \u0026#39;hello world!\u0026#39;} \u0026gt;\u0026gt;\u0026gt; oauth_session.post(status_url, data=new_status) \u0026lt;Response [200]\u0026gt; \u0026#34;\u0026#34;\u0026#34; def __init__( self, client_key, client_secret=None, resource_owner_key=None, resource_owner_secret=None, callback_uri=None, signature_method=SIGNATURE_HMAC, signature_type=SIGNATURE_TYPE_AUTH_HEADER, rsa_key=None, verifier=None, client_class=None, force_include_body=False, **kwargs ): \u0026#34;\u0026#34;\u0026#34;Construct the OAuth 1 session. :param client_key: A client specific identifier. :param client_secret: A client specific secret used to create HMAC and plaintext signatures. :param resource_owner_key: A resource owner key, also referred to as request token or access token depending on when in the workflow it is used. :param resource_owner_secret: A resource owner secret obtained with either a request or access token. Often referred to as token secret. :param callback_uri: The URL the user is redirect back to after authorization. :param signature_method: Signature methods determine how the OAuth signature is created. The three options are oauthlib.oauth1.SIGNATURE_HMAC (default), oauthlib.oauth1.SIGNATURE_RSA and oauthlib.oauth1.SIGNATURE_PLAIN. :param signature_type: Signature type decides where the OAuth parameters are added. Either in the Authorization header (default) or to the URL query parameters or the request body. Defined as oauthlib.oauth1.SIGNATURE_TYPE_AUTH_HEADER, oauthlib.oauth1.SIGNATURE_TYPE_QUERY and oauthlib.oauth1.SIGNATURE_TYPE_BODY respectively. :param rsa_key: The private RSA key as a string. Can only be used with signature_method=oauthlib.oauth1.SIGNATURE_RSA. :param verifier: A verifier string to prove authorization was granted. :param client_class: A subclass of `oauthlib.oauth1.Client` to use with `requests_oauthlib.OAuth1` instead of the default :param force_include_body: Always include the request body in the signature creation. :param **kwargs: Additional keyword arguments passed to `OAuth1` \u0026#34;\u0026#34;\u0026#34; super(OAuth1Session, self).__init__() self._client = OAuth1( client_key, client_secret=client_secret, resource_owner_key=resource_owner_key, resource_owner_secret=resource_owner_secret, callback_uri=callback_uri, signature_method=signature_method, signature_type=signature_type, rsa_key=rsa_key, verifier=verifier, client_class=client_class, force_include_body=force_include_body, **kwargs ) self.auth = self._client @property def token(self): oauth_token = self._client.client.resource_owner_key oauth_token_secret = self._client.client.resource_owner_secret oauth_verifier = self._client.client.verifier token_dict = {} if oauth_token: token_dict[\u0026#34;oauth_token\u0026#34;] = oauth_token if oauth_token_secret: token_dict[\u0026#34;oauth_token_secret\u0026#34;] = oauth_token_secret if oauth_verifier: token_dict[\u0026#34;oauth_verifier\u0026#34;] = oauth_verifier return token_dict @token.setter def token(self, value): self._populate_attributes(value) @property def authorized(self): \u0026#34;\u0026#34;\u0026#34;Boolean that indicates whether this session has an OAuth token or not. If `self.authorized` is True, you can reasonably expect OAuth-protected requests to the resource to succeed. If `self.authorized` is False, you need the user to go through the OAuth authentication dance before OAuth-protected requests to the resource will succeed. \u0026#34;\u0026#34;\u0026#34; if self._client.client.signature_method == SIGNATURE_RSA: # RSA only uses resource_owner_key return bool(self._client.client.resource_owner_key) else: # other methods of authentication use all three pieces return ( bool(self._client.client.client_secret) and bool(self._client.client.resource_owner_key) and bool(self._client.client.resource_owner_secret) ) def authorization_url(self, url, request_token=None, **kwargs): \u0026#34;\u0026#34;\u0026#34;Create an authorization URL by appending request_token and optional kwargs to url. This is the second step in the OAuth 1 workflow. The user should be redirected to this authorization URL, grant access to you, and then be redirected back to you. The redirection back can either be specified during client registration or by supplying a callback URI per request. :param url: The authorization endpoint URL. :param request_token: The previously obtained request token. :param kwargs: Optional parameters to append to the URL. :returns: The authorization URL with new parameters embedded. An example using a registered default callback URI. \u0026gt;\u0026gt;\u0026gt; request_token_url = \u0026#39;https://api.twitter.com/oauth/request_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; authorization_url = \u0026#39;https://api.twitter.com/oauth/authorize\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(\u0026#39;client-key\u0026#39;, client_secret=\u0026#39;secret\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_request_token(request_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;sdf0o9823sjdfsdf\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;2kjshdfp92i34asdasd\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; oauth_session.authorization_url(authorization_url) \u0026#39;https://api.twitter.com/oauth/authorize?oauth_token=sdf0o9823sjdfsdf\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session.authorization_url(authorization_url, foo=\u0026#39;bar\u0026#39;) \u0026#39;https://api.twitter.com/oauth/authorize?oauth_token=sdf0o9823sjdfsdf\u0026amp;foo=bar\u0026#39; An example using an explicit callback URI. \u0026gt;\u0026gt;\u0026gt; request_token_url = \u0026#39;https://api.twitter.com/oauth/request_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; authorization_url = \u0026#39;https://api.twitter.com/oauth/authorize\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(\u0026#39;client-key\u0026#39;, client_secret=\u0026#39;secret\u0026#39;, callback_uri=\u0026#39;https://127.0.0.1/callback\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_request_token(request_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;sdf0o9823sjdfsdf\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;2kjshdfp92i34asdasd\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; oauth_session.authorization_url(authorization_url) \u0026#39;https://api.twitter.com/oauth/authorize?oauth_token=sdf0o9823sjdfsdf\u0026amp;oauth_callback=https%3A%2F%2F127.0.0.1%2Fcallback\u0026#39; \u0026#34;\u0026#34;\u0026#34; kwargs[\u0026#34;oauth_token\u0026#34;] = request_token or self._client.client.resource_owner_key log.debug(\u0026#34;Adding parameters %s to url %s\u0026#34;, kwargs, url) return add_params_to_uri(url, kwargs.items()) def fetch_request_token(self, url, realm=None, **request_kwargs): r\u0026#34;\u0026#34;\u0026#34;Fetch a request token. This is the first step in the OAuth 1 workflow. A request token is obtained by making a signed post request to url. The token is then parsed from the application/x-www-form-urlencoded response and ready to be used to construct an authorization url. :param url: The request token endpoint URL. :param realm: A list of realms to request access to. :param \\*\\*request_kwargs: Optional arguments passed to \u0026#39;\u0026#39;post\u0026#39;\u0026#39; function in \u0026#39;\u0026#39;requests.Session\u0026#39;\u0026#39; :returns: The response in dict format. Note that a previously set callback_uri will be reset for your convenience, or else signature creation will be incorrect on consecutive requests. \u0026gt;\u0026gt;\u0026gt; request_token_url = \u0026#39;https://api.twitter.com/oauth/request_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(\u0026#39;client-key\u0026#39;, client_secret=\u0026#39;secret\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_request_token(request_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;sdf0o9823sjdfsdf\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;2kjshdfp92i34asdasd\u0026#39;, } \u0026#34;\u0026#34;\u0026#34; self._client.client.realm = \u0026#34; \u0026#34;.join(realm) if realm else None token = self._fetch_token(url, **request_kwargs) log.debug(\u0026#34;Resetting callback_uri and realm (not needed in next phase).\u0026#34;) self._client.client.callback_uri = None self._client.client.realm = None return token def fetch_access_token(self, url, verifier=None, **request_kwargs): \u0026#34;\u0026#34;\u0026#34;Fetch an access token. This is the final step in the OAuth 1 workflow. An access token is obtained using all previously obtained credentials, including the verifier from the authorization step. Note that a previously set verifier will be reset for your convenience, or else signature creation will be incorrect on consecutive requests. \u0026gt;\u0026gt;\u0026gt; access_token_url = \u0026#39;https://api.twitter.com/oauth/access_token\u0026#39; \u0026gt;\u0026gt;\u0026gt; redirect_response = \u0026#39;https://127.0.0.1/callback?oauth_token=kjerht2309uf\u0026amp;oauth_token_secret=lsdajfh923874\u0026amp;oauth_verifier=w34o8967345\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(\u0026#39;client-key\u0026#39;, client_secret=\u0026#39;secret\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.parse_authorization_response(redirect_response) { \u0026#39;oauth_token: \u0026#39;kjerht2309u\u0026#39;, \u0026#39;oauth_token_secret: \u0026#39;lsdajfh923874\u0026#39;, \u0026#39;oauth_verifier: \u0026#39;w34o8967345\u0026#39;, } \u0026gt;\u0026gt;\u0026gt; oauth_session.fetch_access_token(access_token_url) { \u0026#39;oauth_token\u0026#39;: \u0026#39;sdf0o9823sjdfsdf\u0026#39;, \u0026#39;oauth_token_secret\u0026#39;: \u0026#39;2kjshdfp92i34asdasd\u0026#39;, } \u0026#34;\u0026#34;\u0026#34; if verifier: self._client.client.verifier = verifier if not getattr(self._client.client, \u0026#34;verifier\u0026#34;, None): raise VerifierMissing(\u0026#34;No client verifier has been set.\u0026#34;) token = self._fetch_token(url, **request_kwargs) log.debug(\u0026#34;Resetting verifier attribute, should not be used anymore.\u0026#34;) self._client.client.verifier = None return token def parse_authorization_response(self, url): \u0026#34;\u0026#34;\u0026#34;Extract parameters from the post authorization redirect response URL. :param url: The full URL that resulted from the user being redirected back from the OAuth provider to you, the client. :returns: A dict of parameters extracted from the URL. \u0026gt;\u0026gt;\u0026gt; redirect_response = \u0026#39;https://127.0.0.1/callback?oauth_token=kjerht2309uf\u0026amp;oauth_token_secret=lsdajfh923874\u0026amp;oauth_verifier=w34o8967345\u0026#39; \u0026gt;\u0026gt;\u0026gt; oauth_session = OAuth1Session(\u0026#39;client-key\u0026#39;, client_secret=\u0026#39;secret\u0026#39;) \u0026gt;\u0026gt;\u0026gt; oauth_session.parse_authorization_response(redirect_response) { \u0026#39;oauth_token: \u0026#39;kjerht2309u\u0026#39;, \u0026#39;oauth_token_secret: \u0026#39;lsdajfh923874\u0026#39;, \u0026#39;oauth_verifier: \u0026#39;w34o8967345\u0026#39;, } \u0026#34;\u0026#34;\u0026#34; log.debug(\u0026#34;Parsing token from query part of url %s\u0026#34;, url) token = dict(urldecode(urlparse(url).query)) log.debug(\u0026#34;Updating internal client token attribute.\u0026#34;) self._populate_attributes(token) self.token = token return token def _populate_attributes(self, token): if \u0026#34;oauth_token\u0026#34; in token: self._client.client.resource_owner_key = token[\u0026#34;oauth_token\u0026#34;] else: raise TokenMissing( \u0026#34;Response does not contain a token: {resp}\u0026#34;.format(resp=token), token ) if \u0026#34;oauth_token_secret\u0026#34; in token: self._client.client.resource_owner_secret = token[\u0026#34;oauth_token_secret\u0026#34;] if \u0026#34;oauth_verifier\u0026#34; in token: self._client.client.verifier = token[\u0026#34;oauth_verifier\u0026#34;] def _fetch_token(self, url, **request_kwargs): log.debug(\u0026#34;Fetching token from %s using client %s\u0026#34;, url, self._client.client) r = self.post(url, **request_kwargs) if r.status_code \u0026gt;= 400: error = \u0026#34;Token request failed with code %s, response was \u0026#39;%s\u0026#39;.\u0026#34; raise TokenRequestDenied(error % (r.status_code, r.text), r) log.debug(\u0026#39;Decoding token from response \u0026#34;%s\u0026#34;\u0026#39;, r.text) try: token = dict(urldecode(r.text.strip())) except ValueError as e: error = ( \u0026#34;Unable to decode token from token response. \u0026#34; \u0026#34;This is commonly caused by an unsuccessful request where\u0026#34; \u0026#34; a non urlencoded error message is returned. \u0026#34; \u0026#34;The decoding error was %s\u0026#34; \u0026#34;\u0026#34; % e ) raise ValueError(error) log.debug(\u0026#34;Obtained token %s\u0026#34;, token) log.debug(\u0026#34;Updating internal client attributes from token data.\u0026#34;) self._populate_attributes(token) self.token = token return token def rebuild_auth(self, prepared_request, response): \u0026#34;\u0026#34;\u0026#34; When being redirected we should always strip Authorization header, since nonce may not be reused as per OAuth spec. \u0026#34;\u0026#34;\u0026#34; if \u0026#34;Authorization\u0026#34; in prepared_request.headers: # If we get redirected to a new host, we should strip out # any authentication headers. prepared_request.headers.pop(\u0026#34;Authorization\u0026#34;, True) prepared_request.prepare_auth(self.auth) return tweepyë¥¼ ì‚¬ìš©í•œ êµ¬í˜„ì²´ tweepy ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ì œë¡œ êµ¬í˜„ì„ ì§„í–‰í–ˆë‹¤.\níŠ¸ìœ—í•˜ê¸° êµ¬í˜„ì²´\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 def OAuth(): try: api_key = os.environ.get(\u0026#39;TWITTER_API_KEY\u0026#39;) api_key_secret = os.environ.get(\u0026#39;TWITTER_API_SECRET\u0026#39;) access_token = os.environ.get(\u0026#39;TWITTER_ACCESS_TOKEN\u0026#39;) access_token_secret = os.environ.get(\u0026#39;TWITTER_ACCESS_TOKEN_SECRET\u0026#39;) auth = tweepy.OAuthHandler(api_key, api_key_secret) auth.set_access_token(access_token, access_token_secret) return auth except Exception as e: return None def post_tweet(container: dict, date): print(\u0026#39;work calling\u0026#39;) oauth = OAuth() api = tweepy.API(oauth) _current_dir = os.path.dirname(os.path.abspath(__file__)) _path = Path(_current_dir) BASE_DIR = _path.parent.absolute() IMG_DIR = f\u0026#39;{BASE_DIR}/img/netflix/{date}\u0026#39; print(f\u0026#39;{IMG_DIR}\u0026#39;) for key in container: tTitle = key tFile = f\u0026#39;{IMG_DIR}/{tTitle}.png\u0026#39; print(f\u0026#39;{tFile}\u0026#39;) reTitle = regex.change_hyphen(tTitle) tweet_format = f\u0026#39;[{reTitle}]\\n ê³µê°œ ì—¬ì •ì¼:{container[key]}\u0026#39; api.update_with_media(tFile, status=tweet_format) Github Action Repository Secret ì‹¤ì œ ì‚¬ìš© ì½”ë“œë¥¼ ë³´ë©´ TWITTER_API_KEY, TWITTER_API_SECRET ë“± environ ì„ ì´ìš©í•´ í™˜ê²½ì—ì„œ ë°›ì•„ì˜¨ ë³€ìˆ˜ë“¤ì´ ìˆë‹¤. íŠ¸ìœ„í„° apië¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì—¬ëŸ¬ê°œì˜ ì¸ì¦í‚¤ê°€ í•„ìš”í•œë° ì½”ë“œë¥¼ í”„ë¼ì´ë¹— repoë¡œ ì˜¬ë ¤ë„ ë˜ì§€ë§Œ Repository Secret ìœ¼ë¡œ ì¸ì¦í‚¤ë“¤ì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí–ˆë‹¤.\n[ê¹ƒí—ˆë¸Œ ê³µì‹ ê°€ì´ë“œ]ì— secretì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì´ ë‚˜ì™€ìˆë‹¤. ë”°ë¼í•´ë³´ë‹¤ ë³´ë©´ ì‚¬ì§„ì²˜ëŸ¼ repoì— ë…¸ì¶œí•˜ì§€ ì•Šì•„ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” secret keyë“¤ì´ ë§Œë“¤ì–´ì§„ë‹¤.\n[Picture 2] Repository Secret Repository Secret ì‚¬ìš©í•˜ê¸° ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤\nì•¡ì…˜ì„ ë“±ë¡í•  ë•Œ secretì„ ë„˜ê²¨ì¤€ë‹¤. ì‹¤í–‰ì‹œì— ì½”ë“œë¡œ í™˜ê²½ë³€ìˆ˜ì— ì ‘ê·¼í•´ì„œ ì½”ë“œ ë‹¨ì—ì„œ í™˜ê²½ì„ í†µí•´ ë°›ì•„ì˜¨ë‹¤. ìë°”ì—ì„œ main ì‹¤í–‰í•  ë•Œ argsë“¤ì„ í†µí•´ í™˜ê²½ê°’ì„ ë„˜ê¸°ëŠ” ê²ƒ íŒŒì´ì¬ì—ì„œ environë¥¼ í†µí•´ í™˜ê²½ê°’ì„ ë„˜ê¸°ëŠ” ê²ƒ ìŠ¤íƒ ì˜¤ë²„ í”Œë¡œìš°ì— ìˆëŠ” [github actionì—ì„œ secretì„ ë„˜ê²¨ pythonìœ¼ë¡œ ë°›ì•„ì˜¤ê¸°]ë¥¼ ë ˆí¼ëŸ°ìŠ¤ë¡œ ì½”ë“œë¥¼ ë§Œë“¤ì—ˆë‹¤. ì¤‘ìš”í•œ ì ì€ secretìœ¼ë¡œ ë“±ë¡í•œ í‚¤ë“¤ì„ íŒŒì´ì¬ì„ ì‹¤í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•œ í›„ì— ë˜ì ¸ì£¼ëŠ” ê²ƒì´ì—ˆë‹¤.\nGithub Action Workflow ê¹ƒí—ˆë¸Œì—ì„œëŠ” ì•¡ì…˜ì„ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” ymlë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. ê·¸ ìŠ¤í¬ë¦½íŠ¸ ì•ˆì—ëŠ” í•œ ì‘ì—…ì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ ì‘ì—…ì´ í•˜ë‚˜ì”© ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬ê°€ ë˜ëŠ”ë° ê·¸ë˜ì„œ ì•¡ì…˜ì„ ë“±ë¡í•˜ëŠ” íŒŒì¼ ì´ë¦„ì„ workflowë¼ê³  í•˜ëŠ” ê²Œ ì•„ë‹ê¹Œ?\nì•¡ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ì´ workflow ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì˜ ì§œëŠ” ê²ƒì´ ì œì¼ ì¤‘ìš”í•˜ë‹¤. ë˜ ì•¡ì…˜ì´ update (commit) ë§ˆë‹¤, ìŠ¤ì¼€ì¥´ë§ì— ë”°ë¼ ì‹¤í–‰ì´ ë˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì§§ì•„ë„ 1~2ë¶„ ì •ë„ëŠ” ê¸°ë‹¤ë ¤ì•¼ í•´ì„œ ì—¬ëŸ¬ë²ˆ ìˆ˜ì •í•˜ë‹¤ë³´ë©´ ë§ì€ ì‹œê°„ì„ ì†Œë¹„í•˜ê²Œ ëœë‹¤.\nworkflow ì‹œë‚˜ë¦¬ì˜¤\níŒŒì´ì¬ ì‹¤í–‰ì„ ìœ„í•´ í”Œë¼ìŠ¤í¬ì™€ requirements.txt ì†ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜ ìƒì˜ ì˜ˆì •ì‘ ì •ë³´ê°€ ìˆëŠ” ì‚¬ì´íŠ¸ í¬ë¡¤ë§ í¬ë¡¤ë§í•œ ì´ë¯¸ì§€ë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•œ commit/push ì‹¤ì œë¡œ íŠ¸ìœ—ì„ í•˜ëŠ” íŒŒì´ì¬ ì½”ë“œ ì‹¤í–‰ íŠ¸ìœ„í„° ë´‡ì„ ìœ„í•œ workflow.yaml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 # This workflow will install Python dependencies, run tests and lint with a single version of Python # For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions name: Netflix_Crawl on: schedule: - cron: \u0026#39;0 0 * * Sat\u0026#39; push: branches: [ master ] pull_request: branches: [ master ] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 - name: Set up Python 3.9 uses: actions/setup-python@v2 with: python-version: 3.9 - name: Install dependencies run: | python -m pip install --upgrade pip pip install flake8 pytest if [ -f requirements.txt ]; then pip install -r requirements.txt; fi - name: Lint with flake8 run: | # stop the build if there are Python syntax errors or undefined names flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics # exit-zero treats all errors as warnings. The GitHub editor is 127 chars wide flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics - name: Run netflix crawler with python run: | python3 \u0026#34;./crawl/netflix.py\u0026#34; - name: Commits run: | git config --local user.email \u0026#34;absinthe4902@naver.com\u0026#34; git config --local user.name \u0026#34;AUTO_ADD_GIT_ACTION\u0026#34; git add . git commit -m \u0026#34;AUTO ADD: commit downloaded image\u0026#34; - name: Push uses: ad-m/github-push-action@master with: branch: \u0026#39;master\u0026#39; github_token: $ - name: Tweet for final run: | python3 \u0026#34;./crawl/tweeting.py\u0026#34; env: TWITTER_API_KEY: ${{ secrets.TWITTER_API_KEY }} TWITTER_API_SECRET: ${{ secrets.TWITTER_API_SECRET }} TWITTER_ACCESS_TOKEN: ${{ secrets.TWITTER_ACCESS_TOKEN }} TWITTER_ACCESS_TOKEN_SECRET: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET }} ë§¤ì£¼ í† ìš”ì¼ 00:00ì‹œì— ìŠ¤ì¼€ì¥´ëŸ¬ê°€ ëŒì•„ê°€ë„ë¡ ì‘ì„±í–ˆëŠ”ë° ì‹œê°„ëŒ€ì˜ ê¸°ì¤€ì€ UTCì´ë‹¤.\nì‚½ì§ˆ êµ¬ê°„\nì•„ê¹Œ ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì—ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ í™˜ê²½ë³€ìˆ˜ëŠ” íŒŒì´ì¬ ì‹¤í–‰ í›„ ë„˜ê²¨ì£¼ê³  ìˆë‹¤. ì œì¼ í—¤ë§¤ë˜ ë¶€ë¶„ì€ í”„ë¡œì íŠ¸ì—ì„œ íŒŒì´ì¬ ì½”ë“œê°€ ìˆëŠ” ë””ë ‰í„°ë¦¬ë¥¼ ì°¾ëŠ” ë¶€ë¶„ì´ì—ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ crawl ë””ë ‰í„°ë¦¬ ì•ˆì— ìˆëŠ” netflix.pyë¥¼ ì‹¤í–‰í•  ë•Œ ë™ì¼í•œ ë””ë ‰í„°ë¦¬ ì•ˆì— ìˆëŠ” ìœ í‹¸ì„± íŒŒì¼ regex.pyë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤.\nì•¡ì…˜ì€ repoë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— current dirê°€ repoì˜€ë˜ twitter_projectì˜€ì„í…ë° ë¬´ìŠ¨ ì´ìœ ë¡œ ë‹¤ë¥¸ íŒŒì¼ë“¤ì„ ì°¾ì§€ ëª»í–ˆëŠ”ì§€ ëª¨ë¥´ê² ë‹¤. ì—¬ëŸ¬ë²ˆì˜ ìˆ˜ì •ì„ ê±°ì¹œ ë‹¤ìŒì— ./crawl/netflix.py ë¡œ ì‹¤í–‰ì„ í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‘ë™ì„ í–ˆë‹¤.\nì‹¤ì œ ë™ì‘ í™”ë©´ [Picture 3] íŠ¸ìœ„í„° ê³„ì • [Picture 4] íŠ¸ìœ— í™”ë©´ 1 [Picture 5] íŠ¸ìœ— í™”ë©´ 2 ë‹¤ìŒ í”„ë¡œì íŠ¸ ëª©í‘œ ë˜‘ê°™ì´ twitter apië¥¼ ì‚¬ìš© í˜„ì¬ í•œêµ­ì—ì„œ ê³µì—° í•˜ê³  ìˆëŠ” ì—°ê·¹ê³¼ ë®¤ì§€ì»¬ì„ ì•Œë ¤ì£¼ëŠ” ìë™ë´‡ tweepyë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì§ì ‘ êµ¬í˜„í•˜ê¸° ìµœì†Œí•œ ì¸ì¦ì„ ë°›ëŠ” ë¶€ë¶„ì´ë¼ë„ êµ¬í˜„í•˜ê¸° (oauth ê³µë¶€) ë™ì¼í•˜ê²Œ server-lessë¡œ git action ì‚¬ìš© Update in 2022 ìœ„ì—ì„œ ê¸°íší–ˆë˜ íŠ¸ìœ„í„° ë´‡ì„ ë§Œë“¤ì—ˆë‹¤.\n[ì§€ê¸ˆ ê³µì—°ì¤‘ì¸ ë®¤ì§€ì»¬ ì•Œë¦¼ë´‡] [ì˜¤ëŠ˜ì˜ ë®¤ì§€ì»¬ ìŠ¤ì¼€ì¤„] í”„ë¡œì íŠ¸ êµ¬ì¡° [Picture 6] í”„ë¡œì íŠ¸ êµ¬ì¡° Dev Stack stack info Backend language python Backend api twitter api Server Ubuntu 20 Scheduler Linux cron job ","date":"2021-04-16","permalink":"https://leeleelee3264.github.io/post/2021-04-16-twitterbot-with-git-action/","tags":["Project"],"title":"Github actionìœ¼ë¡œ ë„·í”Œë¦­ìŠ¤ ìƒì˜ ì•Œë¦¼ íŠ¸ìœ„í„° ë´‡ ë§Œë“¤ê¸°"},{"content":"\nShell Scriptë¡œ ë¬´ì¤‘ë‹¨ ì„œë²„ ë°°í¬í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¬ë‹¤.\nIndex\në¬´ì¤‘ë‹¨ ë°°í¬ë€? ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬í˜„í•˜ê¸° ê²°ë¡  ë¬´ì¤‘ë‹¨ ë°°í¬ë€? ë¬´ì¤‘ë‹¨ ë°°í¬ë€ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ë°°í¬ë¥¼ í•  ë•Œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë©ˆì¶”ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤. ì¦‰ ë°°í¬ë¥¼ í•  ë•Œ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë˜ëŠ” ë‹¤ìš´íƒ€ì„ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\në¬´ì¤‘ë‹¨ ë°°í¬ ë°©ì‹\nBlue Green Deployment Rolling Deployment Canary Deployment Blue Green Deployment Blueì™€ Green ì´ë¼ëŠ” ë™ì¼í•œ ë°°í¬ í™˜ê²½ì„ ì¤€ë¹„í•œë‹¤. Green ì€ live ë˜ê³  ìˆëŠ” í™˜ê²½ì„ ì˜ë¯¸í•œë‹¤. BlueëŠ” ìƒˆë¡œìš´ ë²„ì „ì„ ê°€ì§€ê³  ìˆëŠ” í™˜ê²½ì„ ì˜ë¯¸í•œë‹¤. Blueì—ì„œ ìƒˆë¡œìš´ ë²„ì „ì„ í…ŒìŠ¤íŠ¸í•˜ê³ , í…ŒìŠ¤íŠ¸ ì¤‘ì—ëŠ” ë¡œë“œë°¸ëŸ°ì„œê¸° Greenì— ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤. í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ë©´ Blueë¡œ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚¸ë‹¤. ë§Œì•½ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ Greenìœ¼ë¡œ ë¡¤ë°±í•œë‹¤. ì¥ì  ë¡¤ë°± í•˜ê¸°ê°€ ì‰½ë‹¤. ë‹¤ìš´íƒ€ì„ì´ ì—†ë‹¤. ë‹¨ì  ë¦¬ì†ŒìŠ¤ê°€ ë‘ ë°°ë¡œ ë“ ë‹¤. ì´ëŠ” ë‘ ë°°ì˜ ë¹„ìš©ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ë‘ ê°œì˜ í™˜ê²½ì„ up-to-date ìƒíƒœë¡œ ì‹±í¬í•˜ê¸° ë²ˆê±°ë¡­ë‹¤. [Picture 1] Blue Green Deployment Rolling Deployment ì ì§„ì ìœ¼ë¡œ running ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ êµì²´í•œë‹¤. ê¸°ì¡´ ë²„ì „ê³¼ ìƒˆë¡œìš´ ë²„ì „ì´ í•¨ê»˜ live ëœë‹¤. ìµœì†Œ N+1 ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ê³ , ì´ í•œ ê°œì˜ ì¶”ê°€ ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒˆë¡œìš´ ë²„ì „ì„ ì‹¤í–‰í•  ë…¸ë“œì´ë‹¤. ìƒˆë¡œìš´ ë²„ì „ì„ ë‹´ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ë¬´ì‚¬íˆ ë°°í¬ë˜ë©´ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ëŒì•„ê°€ë©´ì„œ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë°°í¬í•œë‹¤. ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œìš´ ë²„ì „ì´ ë  ë•Œ ê¹Œì§€ ë°˜ë³µí•œë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” default ë°°í¬ë°©ì‹ì´ë‹¤. ì¥ì  ê¸°ì¡´ ë²„ì „ì´ live ë˜ì–´ ìˆì–´, ìµœì†Œí•œì˜ ë‹¤ìš´ íƒ€ì„ë§Œ ì¡´ì¬í•œë‹¤. ìµœì†Œ í•˜ë‚˜ì˜ ì¶”ê°€ ì¸ìŠ¤í„´ìŠ¤ë§Œ ìˆìœ¼ë©´ ê°€ëŠ¥í•œ ë°°í¬ ë°©ì‹ì´ë‹¤. ë°˜ë©´ Blue Greenì€ í•˜ë‚˜ì˜ infrastructure ê°€ ìˆì–´ì•¼ í•œë‹¤. ë¡¤ë°±ì„ í•´ì•¼ í•œë‹¤ë©´ ê¸°ì¡´ ë²„ì „ìœ¼ë¡œ íŠ¸ë ˆí”½ì„ ëŒë¦¬ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ë‹¨ì  ì¸ìŠ¤í„´ìŠ¤ì˜ ê°œìˆ˜ì— ë”°ë¼ ë°°í¬ ì‹œì‘ê³¼ live ì‚¬ì´ì— ìƒë‹¹í•œ ì§€ì—°ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ë°°í¬ê°€ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ë©´ ë¡¤ë°±í•˜ëŠ” ê²ƒì— ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. [Picture 2] Rolling Deployment Canary Deployment ì„œë²„ ê·¹íˆ ì¼ë¶€ë¥¼ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë°°í¬í•˜ì—¬ ì§€ì •ëœ ìœ ì €ë“¤ì—ê²Œ ì„œë¹„ìŠ¤í•œë‹¤. í¼í¬ë¨¼ìŠ¤, ì´ìŠˆ ë“±ì„ í…ŒìŠ¤íŠ¸ì™€ ëª¨ë‹ˆí„°ë§í•˜ê¸°ì— ì¢‹ì€ ë°°í¬ ë°©ì‹ì´ë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ í•  ìœ ì €ë“¤ì„ ë¨¼ì € ì§€ì •í•´ì•¼ í•œë‹¤. (ë² íƒ€ ìœ ì € ë“±) ì„œë¹„ìŠ¤ì˜ ì•ë‹¨ì— ìˆëŠ” ë¡œë“œë°¸ëŸ°ì„œ, API ê²Œì´íŠ¸ì›¨ì´, ì„œë¹„ìŠ¤ í”„ë¡ì‹œë“±ì„ ì¬ì„¤ì •í•˜ê±°ë‚˜ feature í”Œë˜ê·¸ë¥¼ ë‘ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ë¬¸ì œê°€ ì—†ë‹¤ë©´ ê¸°ì¡´ ë²„ì „ì„ ëª¨ë‘ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë¦´ë¦¬ì¦ˆí•œë‹¤. ì¥ì  ì¼ë¶€ì˜ ì‹¤ ì‚¬ìš©ìë“¤ì—ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆë‹¤. ì‹¤íŒ¨í•˜ë”ë¼ë„ ì¼ë¶€ì˜ ì‚¬ìš©ìë“¤ì—ê²Œë§Œ ì˜í–¥ì´ ë¯¸ì¹œë‹¤. feature flagë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ìµœì†Œí•œì˜ infrastructure ê°€ í•„ìš”í•˜ë‹¤. ë¡¤ë°±ì´ ê°„ë‹¨í•˜ê³  ë¹ ë¥´ë‹¤. ë‹¨ì  ì¼ë¶€ì˜ ìœ ì €ë“¤ì—ê²Œë§Œ ìƒˆ ë²„ì „ì„ ë¼ìš°íŠ¸ í•˜ëŠ” ê²ƒì´ ê¸°ìˆ ì ìœ¼ë¡œ ì–´ë µë‹¤. feature flagëŠ” cost-effective í•œ ë°©ì‹ì´ë‹¤. ì˜µì €ë¹Œë¦¬í‹°ì™€ ë©”íŠ¸ë¦­ìŠ¤, ë¶„ì„ í™˜ê²½ì´ íŠ¹íˆë‚˜ ë¯¸ë¦¬ ì˜ ê°–ì¶°ìˆì–´ì•¼ í•œë‹¤. [Picture 3] Canary Deployment ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬í˜„í•˜ê¸° êµ¬í˜„ í™˜ê²½ ë°±ì—… ì„œë²„ë¥¼ ë”°ë¡œ ë‘ì§€ ì•Šì•„ì„œ ë§¨ë‚  ì„œë²„ë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ ì„œë¹„ìŠ¤ê°€ ì£½ëŠ”ë‹¤. ì‚¬ë‚´ì—ì„œ ì†Œê·œëª¨ë¡œ ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤ì´ì§€ë§Œ ì—…ë°ì´íŠ¸ê°€ ì¢€ ì¦ì€ í¸ì¸ë° ê³„ì† ë°°í¬ë¥¼ í•  ë•Œ ë§ˆë‹¤ ì„œë¹„ìŠ¤ê°€ ì£½ì–´ë²„ë¦¬ë©´ ì‚¬ìš©í•˜ê¸°ê°€ í˜ë“¤ ê²ƒ ê°™ì•„ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ êµ¬í˜„í•´ë³´ë¦¬ê³  í–ˆë‹¤.\nê·¸ëŸ°ë° EC2 ë¦¬ì†ŒìŠ¤ê°€ ì¢€ íƒ€ì´íŠ¸ í•´ì„œ í‰ìƒì‹œì— ì„œë²„ ë‘ëŒ€ë¥¼ ë„ìš°ê¸°ëŠ” í˜ë“¤ì–´ ë³´ì˜€ë‹¤. EC2 ì•ˆì— ì•±ì„œë²„ê°€ ë‘ ëŒ€ ëœ¨ë©´ ë¡œë“œë°¸ëŸ°ìŠ¤ì—ì„œ í•˜ë‚˜ê°€ ì—…ë°ì´íŠ¸ í•˜ëŠë¼ ì£½ì–´ë„ ë‹¤ë¥¸ ìª½ìœ¼ë¡œ ë³´ë‚´ì¤„í…ë° ì´ëŸ° í˜•íƒœëŠ” ì§€ê¸ˆ ìƒí™©ì—ì„œëŠ” ë¶ˆê°€ëŠ¥í–ˆë‹¤. ê·¸ë˜ì„œ í‰ì†Œì—ëŠ” ì•±ì„œë²„ë¥¼ í•œ ëŒ€ ë§Œ ë„ì›Œë‘ê³  ì—…ë°ì´íŠ¸ë¥¼ í•  ë•Œ ë§Œ í•œ ëŒ€ ë¥¼ ë” ë„ì›Œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ í•˜ê¸°ë¡œ í–ˆë‹¤.\nêµ¬í˜„í•  ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤ ì—…ë°ì´íŠ¸ ì´ì „ ìƒíƒœ ë¡œë“œ ë°¸ëŸ°ì„œì¸ nginxëŠ” ê³„ì† ë‘ í¬íŠ¸(A: 4000, B: 4001) ëª¨ë‘ë¥¼ ë°”ë¼ë³¸ë‹¤. nginxê°€ ë‚ ë ¤ì¤€ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ì‹¤ì œë¡œ ì²˜ë¦¬í•˜ëŠ” ë¨¸ì‹ ì—ì„œëŠ” í•˜ë‚˜ì˜ ì„œë²„ Aë§Œ ìš´ì˜ì´ ë˜ê³  ìˆê³ , ì„œë²„ BëŠ” ë‹¤ìš´ ìƒíƒœì´ë‹¤. ì—…ë°ì´íŠ¸ ì§„í–‰ ì—…ë°ì´íŠ¸ì‹œì—ëŠ” Aë³´ë‹¤ ì´ì „ ë²„ì „ì¸ Bë¥¼ ì—…ë°ì´íŠ¸ ëœë‹¤. ì„œë²„ Bë¥¼ ê°€ë™í•œë‹¤. Bê°€ ì™„ì „íˆ ëœ¨ê¸° ì „ê¹Œì§€ nginxëŠ” A,B ë‘˜ ë‹¤ ë°”ë¼ë³´ë‹ˆ ë¦¬í€˜ìŠ¤íŠ¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ Aê°€ ë°›ì•„ì„œ ì²˜ë¦¬í•œë‹¤ Bì„œë²„ê°€ ì˜¬ë¼ê°„ ê±¸ í™•ì¸í•˜ë©´ A ì„œë²„ë¥¼ ì£½ì¸ë‹¤. ì—…ë°ì´íŠ¸ í›„ ê·¸ëŸ¼ ì´ì œ ìš”ì²­ì´ ë„ì›Œì ¸ìˆëŠ” ì„œë²„ ì¸ Bë¡œ ì˜¬ë¼ê°„ë‹¤. ë‹¤ìŒë²ˆì— ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼ í•œë‹¤ë©´ Bë³´ë‹¤ ì˜›ë‚  ë²„ì „ì¸ Aê°€ ì—…ë°ì´íŠ¸ ëœë‹¤. ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤ í”Œë¡œìš° ì°¨íŠ¸ í”Œë¡œìš° ì°¨íŠ¸ ë”ë³´ê¸° [Picture 4] ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤ flow chart Nginx ì‘ì—…ì„ í•˜ë©´ì„œ nginx ëŠ” ì–´ë–»ê²Œ ë¡œë“œë°¸ëŸ°ì‹±ì„ í• ê¹Œ ê¶ê¸ˆí•´ì„œ ì°¾ì•„ë´¤ë‹¤. ë‚´ê°€ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì•±ì„œë²„ë¥¼ ë‘ ê°œ ë‘ë©´ nginxëŠ” í•„ìˆ˜ì ìœ¼ë¡œ ìš”ì²­ì„ ë¶„ì‚°í•˜ê²Œ ë˜ì–´ìˆë‹¤. [nginxë¡œ-ë¡œë“œë°¸ëŸ°ì‹±-í•˜ê¸°]\nê·¸ë¦¬ê³  ì´ ì‘ì—…ì„ í•˜ë‹¤ê°€ ì•Œê²Œ ë˜ì—ˆëŠ”ë° í•­ìƒ nginxì—ì„œ ì„¤ì •ì´ ë°”ë€Œë©´ nginx ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘(restart) í–ˆëŠ”ë° ì´ê²ƒë³´ë‹¤ëŠ” ìƒˆë¡œê³ ì¹¨(reload) í•˜ëŠ”ê²Œ ì¢‹ë‹¤ê³  í•œë‹¤. restartëŠ” ë§ ê·¸ëŒ€ë¡œ ì¬ì‹œì‘ì´ë¼ì„œ nginxë¥¼ í•œë²ˆ shutdown í•˜ê³  ë‹¤ì‹œ ì‹œì‘í•œë‹¤. ë°˜ë©´ reloadëŠ” ì„œë²„ê°€ ëŒì•„ê°€ëŠ” ìƒíƒœì—ì„œ ì„¤ì • íŒŒì¼ë§Œ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ ì ìš©ì„ í•´ì¤€ë‹¤. ì„œë²„ ì¤‘ë‹¨ì´ ì—†ë‹¤ëŠ” ê²ƒ ë•Œë¬¸ì— reloadê°€ ë” ì í•©í•˜ë‹¤!\nNginx reload, restart ì»¤ë§¨ë“œ\n1 2 3 4 5 6 7 8 // reload, restart ë“±ì„ í•  ë•Œ config íŒŒì¼ì´ ë¬¸ë²•ì— ë§ëŠ”ì§€ ê¼­ ë¨¼ì € ì ê²€ì„ í•œë‹¤. nginx -t // reload sudo systemctl reload nginx // restart sudo systemctl restart nginx ëª©í‘œë¡œ í•˜ê³  ìˆëŠ” client - ë¡œë“œ ë°¸ëŸ°ì„œ - ì•±ì„œë²„ ê¹Œì§€ì˜ ëª¨ì‹ë„ë¥¼ ê·¸ë ¤ë´¤ë‹¤.\n[Picture 5] Nginx flow ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬í˜„í•˜ê¸° ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ ìœ„í•œ ë””ë ‰í„°ë¦¬ êµ¬ì¡°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 tc-admin â”œâ”€â”€ blue_green_deploy.sh â”œâ”€â”€ blue_green_deploy.txt â”œâ”€â”€ dnx-touchcare-admin-0.1-SNAPSHOT.jar â”œâ”€â”€ gc.log â”œâ”€â”€ log_rotate.sh â”œâ”€â”€ server.log â””â”€â”€ start.sh tc-admin-prod â”œâ”€â”€ blue_green_deploy.sh â”œâ”€â”€ dnx-touchcare-admin-0.1-SNAPSHOT.jar â”œâ”€â”€ gc.log â”œâ”€â”€ hs_err_pid29917.log â”œâ”€â”€ hs_err_pid29917.txt â”œâ”€â”€ log_rotate.sh â”œâ”€â”€ server.log â””â”€â”€ start.sh backup-tc-admin â”œâ”€â”€ api â”‚Â â””â”€â”€ dnx-touchcare-admin-0.1-SNAPSHOT.jar â””â”€â”€ tpi â””â”€â”€ dnx-touchcare-admin-0.1-SNAPSHOT.jar ë°°í¬ ìŠ¤í¬ë¦½íŠ¸\nì´ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì€ tpië¡œ, tc-adminì„ ì´ìš©í•œë‹¤. ë°±ì—… jarê°€ ì˜¬ë¼ê°€ëŠ” ê³³ì€ backup-tc-admin ìœ¼ë¡œ tpi/api ë¡œ ë””ë ‰í„°ë¦¬ë¥¼ ë¶„ë¦¬í–ˆë‹¤.\nprofile ì€ jar ë¥¼ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ì˜ ì •ë³´ì¸ë° prodì™€ ë°±ì—…ìš© back-prodë¥¼ ë‘ì—ˆê³  í¬íŠ¸ëŠ” ê°ê° 4000 ê³¼ 4001ë¡œ í• ë‹¹í–ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 #! /bin/sh echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;Blue Green Deployment\u0026#34; echo \u0026#34;Author: Seungmin Lee\u0026#34; echo \u0026#34;Date: 2021-02-26\u0026#34; echo \u0026#34;This script is only for blue green deploy, not for back up server.\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; # have to change for api and tpi SETTING=tpi PROFILE=prod PROFILE_BACKUP=back-prod PORT=4000 PORT_BACKUP=4001 CURRENT_PATH=/opt/tc-admin BACKUP_PATH=/opt/backup-tc-admin/${SETTING} SUB_URL=/tcadmin/api/test/profile CHECK_URL=https://${SETTING}.example.kr${SUB_URL} echo \u0026#34;\u0026gt;Check which profile is active...\u0026#34; PROFILE_CURRENT=$(curl -s $CHECK_URL) echo \u0026#34;\u0026gt;$PROFILE_CURRENT\u0026#34; if [ $PROFILE_CURRENT = $PROFILE ] then IDLE_PROFILE=$PROFILE_BACKUP IDLE_PORT=$PORT_BACKUP IDLE_DIR=$BACKUP_PATH elif [ $PROFILE_CURRENT = $PROFILE_BACKUP ] then IDLE_PROFILE=$PROFILE IDLE_PORT=$PORT IDLE_DIR=$CURRENT_PATH else echo \u0026#34;\u0026gt;Current profile is not matching with any of them...\u0026#34; echo \u0026#34;\u0026gt;Will use default $PROFILE for profile\u0026#34; IDLE_PROFILE=$PROFILE IDLE_PORT=$PORT IDLE_DIR=$CURRENT_PATH fi # update idle one and run # planed to seperate starting shell, but I have to copy/run first and kill the current one echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;Update JAR file to new one and Run\u0026#34; echo \u0026#34;target dir is ${IDLE_DIR}\u0026#34; echo \u0026#34;target property is ${IDLE_PROFILE}\u0026#34; echo \u0026#34;target port is ${IDLE_PORT}\u0026#34; echo \u0026#34;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; cp -f ~/admin-0.1-SNAPSHOT.jar ${IDLE_DIR}/. echo \u0026#34;\u0026#34; echo \u0026#34;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;Now Deploy New Server....\u0026#34; echo \u0026#34;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; DATE=`date +\u0026#39;%Y%m%d\u0026#39;` ETC_JAVA_OPTS=-XX:+UseStringDeduplication nohup java -Xms128m -Xmx128m -XX:NewRatio=1 -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:./gc.log -Dspring.profiles.active=${IDLE_PROFILE} $* -jar ${IDLE_DIR}/dnx-touchcare-admin-0.1-SNAPSHOT.jar \u0026gt;\u0026gt; ./server.log \u0026amp; UP_CHECK=\u0026#34;\u0026#34; while [ -z \u0026#34;$UP_CHECK\u0026#34; ] do UP_CHECK=$(curl -s http://localhost:${IDLE_PORT}/tcadmin/api/test/profile) done echo \u0026#34;\u0026#34; echo \u0026#34;Now killed old server...\u0026#34; echo \u0026#34;\u0026#34; KILL_PROCESS_PID=$(pgrep -f \u0026#34;profiles.active=${PROFILE_CURRENT} -jar\u0026#34;) echo \u0026#34;\u0026gt; kill process ${KILL_PROCESS_PID}\u0026#34; if [ -z $KILL_PROCESS_PID ] then echo \u0026#34;\u0026gt;There are no pid...\u0026#34; else echo \u0026#34;\u0026gt;kill -9 $KILL_PROCESS_PID\u0026#34; kill -9 ${KILL_PROCESS_PID} fi tail -f server.log ìŠ¤í¬ë¦½íŠ¸ ìƒì„¸ ì´ˆë°˜ì— í™˜ê²½ê³¼ í”„ë¡œíŒŒì¼ë“¤, í¬íŠ¸ì™€ jarê°€ ìˆëŠ” pathë“¤ì„ ì •í•´ì¤€ë‹¤. curl ì„ ì´ìš©í•´ì„œ í˜„ì¬ ë„ì›Œì ¸ìˆëŠ” ì„œë²„ì˜ í”„ë¡œíŒŒì¼ì„ ì•Œì•„ë‚¸ë‹¤. ì´ë•ŒëŠ” ë„ë©”ì¸ì„ ì´ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì²˜ëŸ¼ ë™ì‘í•œë‹¤. ì„œë²„ì˜ profileì— ë”°ë¼ì„œ ì—…ë°ì´íŠ¸ë¥¼ í•  Idle í”„ë¡œíŒŒì¼ê³¼ í¬íŠ¸, íŒ¨ìŠ¤ë¥¼ ì§€ì •í•œë‹¤. í˜„ì¬ í”„ë¡œíŒŒì¼ì´ prodë©´ back-prodë¡œ, back-prodë©´ prod ë¡œ Idleì´ ì„¤ì •ëœë‹¤. Idle profile ë¡œ ì„¤ì •ëœ í”„ë¡œíŒŒì¼ì´ ì—…ë°ì´íŠ¸ê°€ ë˜ë©´ í•´ë‹¹ jar íŒŒì¼ì„ ë„ìš´ë‹¤. prodì™€ back-prod 2ê°œì˜ ì„œë²„ê°€ ë– ìˆëŠ” ìƒíƒœì´ë‹¤. curl ì„ ì´ìš©í•´ì„œ Idle jar ê°€ ì™„ì „íˆ êµ¬ë™í•˜ê³  ìˆë‹¤ëŠ” ì‘ë‹µì„ ë°›ì„ ë•Œê¹Œì§€ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì´ë•ŒëŠ” localhost ì™€ Idle port ë¥¼ ì´ìš©í•´ì„œ ë‚´ë¶€ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. í™•ì¸ì´ ë˜ë©´ ì´ì „ë²„ì „ìœ¼ë¡œ ëŒì•„ê°€ê³  ìˆëŠ” jarì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤. ì•±ì„œë²„ê°€ ì™„ì „íˆ ëœ¬ ê²ƒì„ í™•ì¸í•˜ëŠ” ë°©ë²• 5ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë§ì€ ê³ ë¯¼ì„ í–ˆë‹¤. ì–´ë–»ê²Œ í•´ì•¼ ë‹¨ìˆœíˆ ì„œë²„ê°€ ëœ¨ëŠ” ê²ƒì´ ì•„ë‹Œ ì„œë¹„ìŠ¤ ìš”ì²­ì„ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ìˆ˜ì¤€ì˜ ì™„ì „íˆ êµ¬ë™ëœ ì„œë²„ì˜ ìƒíƒœë¥¼ ì•Œ ìˆ˜ ìˆì„ê¹Œ?\nì•±ì„œë²„ êµ¬ë™ í™•ì¸ ì‹œë„ë“¤\n1 2 3 4 5 6 7 8 9 10 11 // 1 try : ì„ì˜ì˜ sleep ì„ ì£¼ê¸° sleep(10000) // 2 try : í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¡œ í™•ì¸í•˜ê¸° pgrep -f \u0026#34;pfofiles.active=${IDLE_PROFLE} -jar\u0026#34; // 3 try : í•´ë‹¹ í¬íŠ¸ë¡œ í™•ì¸í•˜ê¸° ss -tlp | grep ${IDLE_PORT} // 4 try : ë‚´ë¶€ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° curl http://localhost/{IDLE_PORT} 1 try : ì„ì˜ì˜ sleep ì„ ì£¼ê¸° ì²˜ìŒì—ëŠ” ì„œë²„ê°€ ì™„ì „íˆ ëœ° ìˆ˜ ìˆê²Œ ì„ì˜ì˜ sleep ê°’ì„ ì£¼ì—ˆëŠ”ë° ì œì¼ ë‚˜ìœ ë°©ë²•ì´ì—ˆë‹¤. ì„œë²„ê°€ ëœ¨ëŠ” ì†ë„ê°€ ì¼ì •í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— sleepì„ ì´ˆê³¼í•˜ê³ ë„ ëœ¨ì§€ ì•Šì•„ì„œ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶œ ìˆ˜ ìˆì—ˆë‹¤.\n2 try : í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¡œ í™•ì¸í•˜ê¸° ë‘ë²ˆì§¸ë¡œëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë– ìˆëŠ” ê²ƒìœ¼ë¡œ í™•ì¸ì„ í–ˆëŠ”ë° í”„ë¡œì„¸ìŠ¤ëŠ” jarë¥¼ ì‹¤í–‰í•˜ìë§ˆì ëœ¨ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì„œë²„ê°€ ì™„ì „íˆ ëœ¨ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë” ë¹ ë¥¸ ì‹œì ì´ë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ ë– ìˆë‹¤ê³  ê³¼ê±°ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì¸ë‹¤ë©´ ì‹¤ìƒ ì„œë²„ëŠ” ì™„ì „íˆ ëœ¬ê²Œ ì•„ë‹ˆë¼ì„œ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶˜ë‹¤.\n3 try : í•´ë‹¹ í¬íŠ¸ë¡œ í™•ì¸í•˜ê¸° ì„¸ë²ˆì§¸ë¡œëŠ” í¬íŠ¸ê°€ ì—´ë ¤ìˆëŠ” ê²ƒìœ¼ë¡œ í™•ì¸ì„ í–ˆë‹¤. jarë¥¼ ì‹¤í–‰ì‹œí‚¤ìë§ˆì ìƒê¸°ëŠ” í”„ë¡œì„¸ìŠ¤ë³´ë‹¤ëŠ” í¬íŠ¸ê°€ ë’¤ëŠ¦ê²Œ ì—´ë¦¬ì§€ë§Œ í¬íŠ¸ ë˜í•œ ì„œë²„ê°€ ì™„ì „íˆ ëœ¨ëŠ” ì—¬ë¶€ì™€ëŠ” ìƒê´€ì´ ì—†ì´ ì¼ì° ì—´ë¦¬ê¸° ë•Œë¬¸ì—, í¬íŠ¸ë§Œ ë¯¿ê³  ê³¼ê±°ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì´ë©´ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶˜ë‹¤.\n4 try : ë‚´ë¶€ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì–´ì©Œì§€ ê³ ë¯¼ì„ í•˜ë‹¤ê°€ ì™¸ë¶€ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ì´ì „ì— ë– ìˆëŠ” Aì„œë²„ê°€ ì²˜ë¦¬ë¥¼ í–ˆëŠ”ì§€ Bì„œë²„ê°€ ì²˜ë¦¬ë¥¼ í–ˆëŠ”ì§€ ëª°ë¼ì„œ ë¬´ìš©ì§€ë¬¼ì´ì—ˆë‹¤.\nê·¸ëŸ°ë° ì•Œê³ ë³´ë‹ˆ curlì€ ì™¸ë¶€ì— ìˆëŠ” nginxë¥¼ ê±°ì³ì„œ ë‚´ë¶€ì˜ ì„œë²„ì— ìš”ì²­ì„ í•˜ëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼ localhostì™€ port ë¡œ ë‚´ë¶€ì—ì„œ ë‚´ë¶€ì˜ ì„œë²„ì— ìš”ì²­ì´ ê°€ëŠ¥í–ˆë‹¤!! ì´ ë°©ë²•ìœ¼ë¡œ\n(1) ë‚´ê°€ ì›í•˜ëŠ” í¬íŠ¸ë¡œ\n(2) ì‘ë‹µì´ ì˜¬ë•Œê¹Œì§€ ìš”ì²­ì„ ë³´ë‚´ê³ \n(3) ì‘ë‹µì´ ì˜¤ë©´ ì´ì „ì˜ ì„œë²„ë¥¼ ì£½ì¼ ìˆ˜ ìˆì—ˆë‹¤.\nê²°ë¡  ì´ëŸ°ì‹ìœ¼ë¡œ ì‰˜ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ì„œ ì—…ë°ì´íŠ¸ ë°°í¬ë¥¼ í•˜ë©´ì„œ ì„œë¹„ìŠ¤ëŠ” ì£½ì§€ ì•Šê²Œ ë¬´ì¤‘ë‹¨ìœ¼ë¡œ ìš´ì˜ë  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ì—ˆë‹¤. í•œêµ­ì—ì„œëŠ” ë¬´ì¤‘ë‹¨ ë°°í¬ë¼ê³  í•˜ì§€ë§Œ ì˜ì–´ë¡œëŠ” blue green deploy ë¼ê³  í•œë‹¤.\nê·¸ë¦¬ê³  íŒ€ì¥ë‹˜ì´ springì˜ context eventë¥¼ ì¨ë³´ë©´ ì–´ë–»ê² ëƒê³  í•˜ì…¨ëŠ”ë° ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ ìœ„í•œ ê¸°ëŠ¥ì€ ì•„ë‹Œ ê²ƒ ì²˜ëŸ¼ ë³´ì˜€ë‹¤. ê·¸ë˜ë„ spring eventê°€ êµ‰ì¥íˆ ìœ ìš©í•œ ê¸°ëŠ¥ì´ê¸°ì— ë§í¬ë¥¼ ë‚¨ê²¨ ë‚˜ì¤‘ì— ë³´ê¸°ë¡œ í–ˆë‹¤.\n[Spring Event] Update in 2022 í•´ë‹¹ í¬ìŠ¤íŒ…ì€ AWS ec2ë¥¼ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ê³  ê·¸ ì•ˆì—ì„œ ì•± ì„œë²„ë¥¼ ì—¬ëŸ¬ ê°œ ë„ì›Œì„œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ í•˜ëŠ” í˜•ì‹ì´ì—ˆë‹¤.\ní•˜ì§€ë§Œ ec2ë¥¼ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ê³ , AWS EKSë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ í•˜ëŠ” í˜•ì‹ì´ ëŒ€ë‹¤ìˆ˜ì´ë‹¤. EKSëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ, í‰ì†Œì— ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì œì¼ ì‘ì€ ë‹¨ìœ„ì¸ íŒŒë“œë¥¼ ì—¬ëŸ¬ ê°œ ë„ì›Œë‘ê³  ìˆœì°¨ì ìœ¼ë¡œ ë°°í¬í•˜ëŠ” í˜•íƒœì´ë‹¤.\n","date":"2021-03-15","permalink":"https://leeleelee3264.github.io/post/2021-03-15-blue-green-deploy/","tags":["Infra"],"title":"Shell Scriptë¡œ Blue Green Deploymentë¥¼ í‰ë‚´ë‚¸ ë¬´ì¤‘ë‹¨ ì„œë²„ ë°°í¬í•˜ê¸°"},{"content":"\nì±… [Modern Java in Action] ì¤‘ Chapter 1,2,3 ì„ ìš”ì•½í•œë‹¤.\nIndex\nChapter 1 Java 8, 9, 10, 11 ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ê°€? Chapter 2 ë™ì‘ íŒŒë¼ë¯¸í„°í™” ì½”ë“œ ì „ë‹¬í•˜ê¸° Chapter 3 ëŒë‹¤ í‘œí˜„ì‹ Chapter 1 Java 8, 9, 10, 11 ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ê°€? ì§€ê¸ˆê¹Œì§€ì˜ ëŒ€ë¶€ë¶„ì˜ ìë°” í”„ë¡œê·¸ë¨ì€ ì½”ì–´ ì¤‘ í•˜ë‚˜ë§Œì„ ì‚¬ìš©í–ˆë‹¤. ìë°” 8ì´ ë“±ì¥í•˜ê¸° ì´ì „ì—ëŠ” ë‚˜ë¨¸ì§€ ì½”ì–´ë¥¼ í™œìš©í•˜ë ¤ë©´ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ì¡°ì–¸í–ˆìœ¼ë‚˜ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë©´ ê´€ë¦¬í•˜ê¸° ì–´ë µê³  ë§ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ìë°”ëŠ” ì´ëŸ¬í•œ ë³‘ë ¬ ì‹¤í–‰ í™˜ê²½ì„ ì‰½ê²Œ ê´€ë¦¬í•˜ê³  ì—ëŸ¬ê°€ ëœ ë°œìƒí•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í™”í•˜ë ¤ê³  ë…¸ë ¥í–ˆë‹¤. ìë°” 9ì—ì„œëŠ” ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°ì´ë¼ëŠ” ë³‘ë ¬ ì‹¤í–‰ ê¸°ë²•ì„ ì§€ì›í•œë‹¤.\nìë°” 8ì€ ê°„ê²°í•œ ì½”ë“œ, ë©€í‹°ê³ ì–´ í”„ë¡œì„¸ì„œì˜ ì‰¬ìš´ í™œìš©ì´ë¼ëŠ” ë‘ ê°€ì§€ ìš”êµ¬ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤. ìë°” 8ì€ ë°ì´í„°ë² ì´ìŠ¤ ì§ˆì˜ ì–¸ì–´ì—ì„œ í‘œí˜„ì‹ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³‘ë ¬ ì—°ì‚°ì„ ì§€ì›í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ì´ë¼ëŠ” ìƒˆë¡œìš´ APIë¥¼ ì œê³µí•œë‹¤. ì¦‰, ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´ ì—ëŸ¬ë¥¼ ìì£¼ ì¼ìœ¼í‚¤ë©° ë©€í‹°ì½”ì–´ CPUë¥¼ ì´ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹„ìš©ì´ í›¨ì”¬ ë¹„ì‹¼ í‚¤ì›Œë“œ synchronized ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\nìë°” 8ì˜ í•µì‹¬ ê¸°ëŠ¥\nìŠ¤íŠ¸ë¦¼ API ì½”ë“œë¥¼ ì „ë‹¬í•˜ëŠ” ê°„ê²° ê¸°ë²• AKA ë™ì‘ íŒŒë¼ë¯¸í„°í™” ì¸í„°í˜ì´ìŠ¤ì˜ ë””í´íŠ¸ ë©”ì„œë“œ ì˜ˆì „ì´ë¼ë©´ ë³µì¡í•´ë³´ì´ëŠ” ìµëª…í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ ë™ì‘ì´ ë‹´ê¸´ ì½”ë“œë¥¼ ë„˜ê²¼ì§€ë§Œ, ë©”ì„œë“œì— ì½”ë“œë¥¼ ì „ë‹¬í•˜ëŠ” ê¸°ë²•ì„ ì´ìš©í•˜ë©´ ìƒˆë¡­ê³  ê°„ê²°í•œ ë°©ë²•ìœ¼ë¡œ ë™ì‘ íŒŒë¼ë¯¸í„°í™”ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ìë°” 8ì€ ê°ì²´ì§€í–¥ê³¼ ì •ë°˜ëŒ€ì˜ ê°œë…ì— ìˆëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ ìœ„ë ¥ì„ ë°œíœ˜í•œë‹¤. ì½”ë“œë¥¼ ì „ë‹¬í•˜ê³ , ì¡°í•©ì„ í•˜ëŠ” ë“±ì˜ íŠ¹ì„±ì€ í•¨ìˆ˜í˜•í”„ë¡œê·¸ë˜ë°ì´ë‹¤.\nì™œ ì•„ì§ë„ ìë°”ëŠ” ë³€í•˜ëŠ”ê°€? ì–¸ì–´ëŠ” í•„ìš”ì„±ì— ë”°ë¼ì„œ ë§Œë“¤ì–´ì§€ê³  ë„íƒœëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Cì™€ C++ì€ í”„ë¡œê·¸ë˜ë° ì•ˆì „ì„±ì´ ë¶€ì¡±í•´ ë°”ì´ëŸ¬ìŠ¤ê°€ ì¹¨íˆ¬í•˜ê¸° ì‰¬ìš°ë‚˜ ëŸ°íƒ€ì„ í’‹í”„ë¦°íŠ¸ê°€ ì ì–´ì„œ ë‹¤ì˜í•œ ì„ë² ë””ë“œ ì‹œìŠ¤í…œì—ì„œ ì¸ê¸°ë¥¼ ëŒê³  ìˆë‹¤.\nìë°”ì˜ ê³¼ê±° ìë°”ëŠ” ì‹œì‘ë¶€í„° ìŠ¤ë ˆë“œì™€ ë½ì„ ì´ìš©í•œ ë™ì‹œì„±ì„ ì§€ì›í•˜ê³ , ìœ ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ë§ì´ ê°€ì§€ê³  ìˆì—ˆë‹¤. ì½”ë“œë¥¼ JVM ë°”ì´íŠ¸ ì½”ë“œë¡œ ì»´íŒŒì¼ í•˜ëŠ” íŠ¹ì§• ë•Œë¬¸ì— (ëª¨ë“  ë¸Œë¼ìš°ì €ëŠ” ê°€ìƒë¨¸ì‹  ì½”ë“œë¥¼ ì§€ì›) ì¸í„°ë„· ì• í”Œë¦¿ í”„ë¡œê·¸ë¨ì˜ ì£¼ìš” ì–¸ì–´ê°€ ë˜ì—ˆë‹¤.\nìë°”ì˜ ë¯¸ë˜ í”„ë¡œê·¸ë¨ ìƒíƒœê³„ëŠ” ë¹…í…Œì´í„°ë¼ëŠ” ë„ì „ì— ì§ë©´í•˜ë©´ì„œ ë©€í‹°ì½”ì–´ ì»´í“¨í„°ë‚˜ ì»´í“¨íŒ… í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ìš©í•´ ë¹…ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•  í•„ìš”ì„±ì´ ì»¤ì¡Œë‹¤. ì¦‰, ë³‘ë ¬ í”„ë¡œì„¸ì‹±ì„ ì´ìš©í•´ì•¼ í–ˆê³ , ì´ëŠ” ìë°”ì— ë¶€ì¡±í•œ ê¸°ìˆ ì´ì—ˆë‹¤.\nìƒˆë¡œìš´ í•˜ë“œì›¨ì–´, ìƒˆë¡œìš´ í”„ë¡œê·¸ë˜ë°ì´ ë“±ì¥í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê¸°í›„ê°€ ë³€í•˜ê³  ì‹ë¬¼ì— ì˜í–¥ì„ ë¯¸ì¹˜ë©´ì„œ ê¸°ì¡´ ì‹ë¬¼ì„ ëŒ€ì‹ í•´ì„œ ìƒˆë¡œìš´ ì‹ë¬¼ì„ ê¸¸ëŸ¬í– í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì—ëŠ” ë‹¤ë¥¸ ì–¸ì–´ë¥¼ ì„ íƒí•´ì•¼ í•˜ê³ , ìë°”ëŠ” ë˜ ì„ íƒì„ ë°›ê¸° ìœ„í•´ ë…¸ë ¥í•´ì•¼ í•œë‹¤.\nìë°” 8ì˜ ë°‘ë°”íƒ•ì´ ëœ ì„¤ê³„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ìŠ¤íŠ¸ë¦¼ì´ë€ í•œ ë²ˆì— í•œ ê°œì”© ë§Œë“¤ì–´ì§€ëŠ” ì—°ì†ì ì¸ ë°ì´í„° í•­ëª©ë“¤ì˜ ëª¨ì„ì´ë‹¤. ì´ë¡ ì ì¸ í”„ë¡œê·¸ë¨ì€ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì—ì„œ ë°ì´í„°ë¥¼ í•œ ê°œ ì½ì–´ë“¤ì´ë©° ë§ˆì°¬ê°€ì§€ë¡œ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•œ ê°œì”© ê¸°ë¡í•œë‹¤. ìš°ì„ ì€ ìŠ¤íŠ¸ë¦¼ APIê°€ ê³µì¥ì˜ ì¡°ë¦½ ë¼ì¸ì²˜ëŸ¼ ì–´ë–¤ í•­ëª©ì„ ì—°ì†ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì–´ë–¤ ê¸°ëŠ¥ì´ë¼ê³  ë‹¨ìˆœí•˜ê²Œ ìƒê°í•˜ì.\nìœ ë‹‰ìŠ¤ê°€ ëª…ë ¹ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ëŒ€í‘œì ì¸ ì˜ˆì‹œì´ë‹¤. ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— catê³¼ tr ë“±ì˜ ì•ì˜ ëª…ë ¹ì–´ê°€ íŒŒì¼ì„ ëê¹Œì§€ ì²˜ë¦¬í•˜ê³  ìˆì§€ ì•Šì•„ë„ sortë‚˜ tail ì´ ì‘ë™í•  ìˆ˜ ìˆë‹¤.\nìœ ë‹‰ìŠ¤ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ì˜ˆì‹œ\n1 cat file1 file2 | tr \u0026#34;[A-Z]\u0026#34; \u0026#34;[a-z]\u0026#34; | sort | tail -3 ìë°” ë˜í•œ ìœ ë‹‰ìŠ¤ê°€ ë³µì¡í•œ íŒŒì´í”„ë¼ì¸ì„ ë§Œë“œëŠ” ê²ƒì²˜ëŸ¼ ë§ì€ ë©”ì„œë“œë¥¼ ì§€ì›í•˜ëŠ”ë° ì¤‘ìš”í•œ ê±´ ë”± í•˜ë‚˜ë‹¤! ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ SQLë¬¸ì„ ëŒë¦¬ê³  ë°‘ì—ì„œëŠ” Cë¡œ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì „í˜€ ëª¨ë¥´ëŠ” ê²ƒì²˜ëŸ¼, ìš°ë¦¬ê°€ ìŠ¤íŠ¸ë¦¼ APIë¥¼ ì“´ë‹¤ë©´ ë°‘ì—ì„œëŠ” ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì „í˜€ ëª¨ë¥´ë©´ì„œ ìŠ¤íŠ¸ë¦¼ í˜•íƒœì˜ ê¸°ëŠ¥ì„ ì“¸ ìˆ˜ ìˆë‹¤.\në˜í•œ ìŠ¤íŠ¸ë¦¼ì˜ ê°€ì¥ í° ì¥ì ì€ ìš°ë¦¬ê°€ ì¡°ê¸ˆì˜ ë³€ê²½ì‚¬í•­ì„ ì¤€ë‹¤ë©´ ì‘ì—…ì„ ì—¬ëŸ¬ CPU ì½”ì–´ì— ì‰½ê²Œ í• ë‹¹í•´ì„œ ë³‘ë ¬ì„±ì„ ì–»ìœ¼ë©´ì„œë„ ìŠ¤ë ˆë“œë¼ëŠ” ë³µì¡í•œ ì‘ì—…ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\në™ì‘ íŒŒë¼ë¯¸í„°í™”ë¡œ ë©”ì„œë“œì— ì½”ë“œ ì „ë‹¬í•˜ê¸° ì´ì „ì—ë„ ìµëª… í´ë˜ìŠ¤ë¡œ ì½”ë“œë¥¼ ì „ë‹¬í•  ìˆ˜ëŠ” ìˆì—ˆìœ¼ë‚˜ ë„ˆë¬´ ë³µì¡í–ˆë‹¤. ì½”ë“œë¥¼ ë„˜ê¸´ë‹¤ëŠ” ê°œë…ì´ ì˜ ì•ˆ ì™€ë‹¿ëŠ”ë‹¤ë©´ ì´ë ‡ê²Œ sortingí•´ì£¼ì„¸ìš”~ í•˜ê³  ì»¨ë””ì…˜ ê°’ í•˜ë‚˜ë§Œ ë„˜ê¸°ëŠ”ê²Œ ì•„ë‹ˆë¼ ì•„ì˜ˆ sortingì„ í•´ì£¼ëŠ” ì½”ë“œ ìì²´ë¥¼ ë„˜ê²¨ì¤€ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤!\nìµëª… í´ë˜ìŠ¤ ì˜ˆì‹œ\n1 2 3 4 5 6 // ëŒ€í‘œì ì¸ ìµëª… í´ë˜ìŠ¤ í˜•ì‹ Collections.sort(inventory, new Comparator\u0026lt;Apple\u0026gt;() { public int compare(Apple al, Appple a2) { return al.getWeight().compareTo(a2.getWeight()); } }); ë³‘ë ¬ì„±ê³¼ ê³µìœ  ê°€ë³€ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ëŠ” ì½”ë“œëŠ” ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰í•˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë‹¤ë¥¸ ì½”ë“œì™€ ë™ì‹œì— ì‹¤í–‰ í•˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¥¼ ë§Œë“¤ë ¤ë©´ ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ì— ì ‘ê·¼í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤. ë‘ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ ëœ ë³€ìˆ˜ë¥¼ ë™ì‹œì— ë°”ê¾¸ë ¤í•˜ë©´ ì–´ë–»ê²Œ ë ì§€ ìƒê°í•´ë³´ë¼.\nê¸°ì¡´ì²˜ëŸ¼ ì–´ë µê²Œ synchronizedë¥¼ ì´ìš©í•´ì„œ ê³µìœ ëœ ê°€ë³€ ë°ì´í„°ë¥¼ ë³´í˜¸í•˜ëŠ” ê·œì¹™ì„ ë§Œë“¤ ìˆ˜ ëŠ” ìˆì§€ë§Œ ìë°” ìŠ¤íŠ¸ë¦¼ APIëŠ” ìë°” ìŠ¤ë ˆë“œ APIë³´ë‹¤ ì„¤ì • ëª‡ê°œë¡œ ë” ì‰½ê²Œ ë³‘ë ¬ì„±ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.\nChapter 2 ë™ì‘ íŒŒë¼ë¯¸í„°í™” ì½”ë“œ ì „ë‹¬í•˜ê¸° ë™ì‘ íŒŒë¼ë¯¸í„°í™”ë€ ì•„ì§ì€ ì–´ë–»ê²Œ ì‹¤í–‰í•  ê²ƒì¸ì§€ ê²°ì •í•˜ì§€ ì•Šì€ ì½”ë“œ ë¸”ë¡ì„ ì˜ë¯¸í•œë‹¤. ì´ ì½”ë“œ ë¸”ë¡ì€ ë‚˜ì¤‘ì— í”„ë¡œê·¸ë¨ì—ì„œ í˜¸ì¶œí•œë‹¤. (ëŒë‹¤ë¡œ ë„˜ê²¨ì£¼ê²Œ ëœë‹¤)\nChapter2ì—ì„œëŠ” ë™ì‘ íŒŒë¼ë¯¸í„°í™” aka í•¨ìˆ˜ ì „ë‹¬í•˜ê¸°ê°€ ì–´ë–¤ ê³¼ì •ìœ¼ë¡œ ì§„í™”ê°€ ë˜ì–´ì™”ë‚˜ë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤. í•¨ìˆ˜ ìì²´ë¥¼ ë„˜ê¸°ëŠ” ì´ìœ ëŠ” ì´ê²Œ ë” ìì˜í•˜ê²Œ í”Œë˜ê·¸ ë„˜ê¸°ëŠ” ê²ƒ ë³´ë‹¤ í™•ì¥ì„±ì´ ìˆê¸° ë•Œë¬¸. ì–´ì¨Œë“  ì¤‘ìš”í•œ ì ì€ ì‹œì‹œê°ê° ë³€í•˜ëŠ” ì‚¬ìš©ì ìš”êµ¬ ì‚¬í•­ì— ë¹„ìš©ì´ ê°€ì¥ ìµœì†Œí™” ë  ìˆ˜ ìˆëŠ” ê²ƒ!\në™ì‘ ì „ë‹¬ ë°œì „ ë‹¨ê³„\ní”Œë˜ê·¸ë¡œ ë™ì‘ ë¶„ê¸° (ìµœì•…) í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ìµëª… í´ë˜ìŠ¤ ëŒë‹¤ í”Œë˜ê·¸ë¡œ ë™ì‘ ë¶„ê¸° í”Œë˜ê·¸ ë™ì‘ ë¶„ê¸° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 List\u0026lt;Apple\u0026gt; filterApples(List\u0026lt;Apple\u0026gt; apples, Color color, int weight, boolean flag) { List\u0026lt;Apple\u0026gt; result = new ArrayList\u0026lt;\u0026gt;(); for(Apple apple : apples) { if((flag \u0026amp;\u0026amp; apple.getColor().equals(color)) || (!flag \u0026amp;\u0026amp; apple.getWeight() \u0026gt; weight)) { result.add(apple); } } return result; } ì‹¤ì „ì—ì„œëŠ” ì´ëŸ° ë°©ë²•ì„ ì“°ë©´ ì•ˆëœë‹¤. trueì™€ flaseê°€ ë­˜ ì˜ë¯¸í•˜ëŠ”ì§€ë„ ëª¨ë¥´ê² ê³  ì•ìœ¼ë¡œ í•„í„°ë§ ìš”êµ¬ ì‚¬í•­ì´ ì¶”ê°€ë˜ë©´ í™•ì¥ì„ í•˜ê¸°ë„ ì •ë§ í˜ë“¤ë‹¤. ì´ë ‡ê²Œ ë³€ìˆ˜ í•˜ë‚˜ë¡œ ë¶„ê¸°ë¥¼ í•˜ê³  ë™ì‘ì„ ë‹¬ë¦¬ í•˜ëŠ” ê²ƒë³´ë‹¤ ê¸°ë³¸ ë™ì‘ì€ ë˜‘ê°™ê³  ë©”ì¸ì´ ë˜ëŠ” (ì—¬ê¸°ì„œëŠ” í•„í„°ë§ ì¡°ê±´ ë“±ë“±) ë™ì‘ ìì²´ë¥¼ ë‹¤ë¥´ê²Œ í•˜ëŠ” ê²Œ íš¨ìœ¨ì ì´ë‹¤. ì´ê²Œ ë°”ë¡œ ë™ì‘ íŒŒë¼ë©”í„°í™” ì´ë‹¤.\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ìš”êµ¬ ìƒí™©ì— ë”°ë¼ ì¶œë ¥ì„ í•´ì•¼ í•˜ëŠ” ì •ë³´ê°€ ë‹¤ë¥¸ ë©”ì„œë“œê°€ ìˆë‹¤. ì•„ê¹Œì™€ëŠ” ë‹¬ë¦¬ ê°’ì„ ì´í•´í•˜ê¸° ì–´ë ¤ìš´ í”Œë˜ê·¸ë¡œ ë™ì‘ì„ ë¶„ê¸°í•˜ì§€ ì•Šê³  í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„˜ê²¨ì¤˜ì„œ ë™ì‘ì„ ë‹¬ë¦¬í•´ë³´ì•˜ë‹¤.\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì˜ˆì‹œ\nì´ëŸ° í˜•íƒœë¥¼ ì „ëµ ë””ìì¸ íŒ¨í„´ Strategy design pattern ì´ë¼ê³  í•œë‹¤. ì „ëµ ë””ìì¸ íŒ¨í„´ì€ ê° ì•Œê³ ë¦¬ì¦˜ì„ ìº¡ìŠí™”í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ íŒ¨ë°€ë¦¬(êµ¬í˜„)ë“¤ì„ ì •ì˜í•´ë‘” ë‹¤ìŒì— ëŸ°íƒ€ì„ì— ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ëŠ” ê¸°ë²•ì´ë‹¤.\nì˜ˆì œì—ì„œëŠ” ì»¬ë ‰ì…˜ íƒìƒ‰ ë¡œì§ê³¼ ì ìš©í•  ë™ì‘ì„ ë¶„ë¦¬í–ˆë‹¤! ì´ë ‡ê²Œ í•˜ë©´ í•œ ë©”ì„œë“œê°€ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ ì¬í™œìš©ì„ í•  ìˆ˜ ìˆë‹¤. â†’ ìº¡ìŠí™”\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 interface PrintPredicate { String print(Apple apple); } class PrintWeightPredicate implements PrintPredicate { @Override public String print(Apple apple) { return Integer.toString(apple.getWeight()); } } class PrintHeavyLightPredicate implements PrintPredicate { int middleWeight = 20; static final String APPLE_HEAVY = \u0026#34;heavy\u0026#34;; static final String APPLE_LIGHT = \u0026#34;light\u0026#34;; @Override public String print(Apple apple) { if(apple.getWeight() \u0026gt; middleWeight) { return APPLE_HEAVY; } return APPLE_LIGHT; } } public class Quiz2Dash1 { public static void prettyPrintApple(List\u0026lt;Apple\u0026gt; inventory, PrintPredicate p) { for(Apple apple : inventory) { String output = p.print(apple); System.out.println(output); } } public static void main(String[] args) { Apple one = new Apple(Color.GREEN, 100); Apple two = new Apple(Color.RED, 20); Apple three = new Apple(Color.RED, 10); List\u0026lt;Apple\u0026gt; apples = Arrays.asList(one, two, three); prettyPrintApple(apples, new PrintHeavyLightPredicate()); prettyPrintApple(apples, new PrintWeightPredicate()); String test = \u0026#34;test\u0026#34;; } } ì½”ë“œ ìƒì„¸ ì„¤ëª…\nì¼ë‹¨ ì˜¤ì§ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë§Œ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤(í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤)ë¥¼ ì„ ì–¸í•œë‹¤. (line 1) ê°ì ìš”êµ¬ ì‚¬í•­ì— ë§ì¶° ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë“¤ì„ ë§Œë“ ë‹¤. (line 5, 13) ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ íŒŒë¼ë©”í„°ë¡œ (ë™ì‘ íŒŒë¼ë©”í„°) ë°›ëŠ” ë©”ì„œë“œë¥¼ ë§Œë“ ë‹¤. (line 31) ì‹¤ì œë¡œ ì‹¤í–‰ ë‹¨ì—ì„œ ì´ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©° ë™ì‹œì— ë™ì‘ì„ ë‹´ê³  ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ë˜ì ¸ì¤€ë‹¤. (line 46, 47) ëŒ€í‘œì ì¸ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œëŠ” ì •ë ¬ì„ í•˜ëŠ” Comparatorì˜ sort, ì“°ë ˆë“œë¥¼ ì´ìš©í•´ì„œ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•˜ëŠ” Runnableì˜ run, ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” Callableì˜ callì´ ìˆë‹¤.\nìµëª… í´ë˜ìŠ¤ë¥¼ ì´ìš© ì•„ë¬´ë˜ë„ ìœ„ì˜ ë°©ë²•ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„í•˜ëŠ” ë“± ìì§ˆêµ¬ë ˆí•œ ì¼ë“¤ì´ êµ‰ì¥íˆ ë§ì•„ì„œ ê·€ì°®ë‹¤! ì´ë¥¼ ì¡°ê¸ˆì´ë¼ë„ ì¤„ì´ê³ ì ìë°”ëŠ” í´ë˜ìŠ¤ ì„ ì–¸ê³¼ ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” ìµëª… í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.\nìµëª…í´ë˜ìŠ¤ëŠ” ìë°”ì˜ local classì™€ ë¹„ìŠ·í•œ ê°œë…ì´ë‹¤. ì´ë¦„ì´ ì—†ëŠ” í´ë˜ìŠ¤ë¡œ, ì´ë¥¼ ì´ìš©í•˜ë©´ í´ë˜ìŠ¤ ì„ ì–¸ê³¼ ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë™ì‹œì— í•  ìˆ˜ ìˆê³  ì¦‰ì„ì—ì„œ í•„ìš”í•œ êµ¬í˜„ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nìµëª… í´ë˜ìŠ¤ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 prettyPrintApple(apples, new PrintPredicate() { @Override public String print(Apple apple) { return Integer.toString(apple.getWeight()); } }); prettyPrintApple(apples, new PrintPredicate() { int middleWeight = 20; static final String APPLE_HEAVY = \u0026#34;heavy\u0026#34;; static final String APPLE_LIGHT = \u0026#34;light\u0026#34;; @Override public String print(Apple apple) { if(apple.getWeight() \u0026gt; middleWeight) { return APPLE_HEAVY; } return APPLE_LIGHT; } }); ì´ë ‡ê²Œ í•˜ë©´ í´ë˜ìŠ¤ë“¤ì„ ë§Œë“¤ê³  ì¸ìŠ¤í„´ìŠ¤ë¡œ ë§Œë“  ë‹¤ìŒì— ì“°ëŠ” ê³¼ì •ì„ í™• ì¤„ì¼ ìˆ˜ëŠ” ìˆëŠ”ë° ë”± í•œ ë²ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ë˜ ì“°ë ¤ë©´ ìµëª… í´ë˜ìŠ¤ë¡œ ë˜ ë§Œë“¤ì–´ì¤˜ì•¼ í•´ì„œ ë§Œì•½ ë°˜ë³µ ì‚¬ìš©ì„ í•œë‹¤ê³  í•˜ë©´ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤. ê·¸ë¦¬ê³  ìµëª… í´ë˜ìŠ¤ì˜ í˜•íƒœê°€ ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ë„ ë§ë‹¤.\nëŒë‹¤ í‘œí˜„ì‹ ì´ìš© ëŒë‹¤ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // ëŒë‹¤ë¡œ ë˜ì ¸ë³´ê¸° prettyPrintApple(apples, (Apple apple) -\u0026gt; Integer.toString(apple.getWeight()) ); prettyPrintApple(apples, (Apple apple) -\u0026gt; { int middleWeight = 20; String APPLE_HEAVY = \u0026#34;heavy\u0026#34;; String APPLE_LIGHT = \u0026#34;light\u0026#34;; if(apple.getWeight() \u0026gt; middleWeight) { return APPLE_HEAVY; } return APPLE_LIGHT; }); ë‚´ê°€ ë§Œë“  ì˜ˆì œëŠ” ëŒë‹¤ë¥¼ ë˜ì ¸ë„ ê·¹ë‹¨ì ìœ¼ë¡œ ê°„ë‹¨í•´ ë³´ì´ì§€ëŠ” ì•ŠëŠ”ë° ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëª…ì‹œì ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ì•ˆ ë§Œë“¤ì–´ë„ ë˜ê¸° ë•Œë¬¸ì— í›¨ì”¬ ë” ê°„ë‹¨í•œ í˜•íƒœë¡œ ë³´ì¸ë‹¤.\nê²°ë¡  ì½”ë“œ ì „ë‹¬ ê¸°ë²•ì„ ì´ìš©í•˜ë©´ ë™ì‘ì„ ë©”ì„œë“œì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤. ìë°” 8ì´ì „ì—ëŠ” ì´ëŸ° ì‘ì—…ì„ í•˜ê³  ì‹¶ë‹¤ë©´ ìƒë‹¹ìˆ˜ì˜ ì½”ë“œê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ìµëª… í´ë˜ìŠ¤ê°€ ìˆë‹¤ê³  í•´ë„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ìˆ˜ê³ ëŠ” ì—¬ì „í–ˆëŠ”ë° ëŒë‹¤ë¡œ ì´ê±¸ í•´ê²°í–ˆë‹¤.\nChapter 3 ëŒë‹¤ í‘œí˜„ì‹ ëŒë‹¤ë¥¼ ì“°ëŠ” ì´ìœ ëŠ” ìµëª… í´ë˜ìŠ¤ë¡œ ë‹¤ì–‘í•œ ë™ì‘ì„ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ ë§Œì¡±í•  ë§Œí¼ ì½”ë“œê°€ ê¹”ë”í•˜ì§€ ì•Šì•„ì„œë‹¤.\nì•„ë¬´íŠ¼ ì¤‘ìš”í•œ ì‚¬ì‹¤ì€ ìµëª…í´ë˜ìŠ¤ë„ ëŒë‹¤ë„ ì½”ë“œë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ í•  ìˆ˜ ìˆëŠ” ê·€ì¤‘í•œ ê¸°ëŠ¥ì´ë‹¤. ë” ì •í™•í•˜ê²ŒëŠ” ëŒë‹¤ í‘œí˜„ì‹ì€ ë©”ì„œë“œë¡œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ìµëª… í•¨ìˆ˜ë¥¼ ë‹¨ìˆœí™”í•œ ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ëŒë‹¤ í‘œí˜„ì‹ì€ ì´ë¦„ì´ ì—†ì§€ë§Œ, íŒŒë¼ë¯¸í„° ë¦¬ìŠ¤íŠ¸, ë°”ë””, ë°˜í™˜ í˜•ì‹, ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ ë¦¬ìŠ¤íŠ¸ëŠ” ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\nëŒë‹¤ì˜ íŠ¹ì§• ìµëª…: ì´ë¦„ì´ ì—†ì–´ì„œ ìµëª…ì´ë‹¤. ë©”ì„œë“œë¥¼ ì•ˆ ë§Œë“œë‹ˆ ì‘ëª… ê±±ì •ë„ ì•ˆí•˜ê³  êµ¬í˜„í•  ì½”ë“œì— ëŒ€í•´ ê±±ì •ì´ ì¤„ì–´ë“ ë‹¤. í•¨ìˆ˜: ëŒë‹¤ëŠ” ë©”ì„œë“œì²˜ëŸ¼ íŠ¹ì • í´ë˜ìŠ¤ì— ì¢…ì†ì´ ì•ˆë˜ì–´ì„œ ê·¸ëƒ¥ í•¨ìˆ˜ë¼ê³  ë¶€ë¥¸ë‹¤. ì „ë‹¬: ëŒë‹¤ëŠ” ì½”ë“œë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê·€ì¤‘í•œ ê¸°ëŠ¥ì´ë‹¤. ê°„ê²°ì„±: ìµëª… í´ë˜ìŠ¤ë³´ë‹¤ í›¨ì”¬ ë³´ê¸° ì‰½ê³  ê¹”ë”, ìì§ˆêµ¬ë ˆí•œ ê²ƒì´ ë§ì´ ì¤„ì—ˆë‹¤. ëŒë‹¤ì˜ êµ¬ì¡° [Picture 1] ëŒë‹¤ì˜ êµ¬ì¡° Argument: íŒŒë¼ë©”í„°ì˜ ë¦¬ìŠ¤íŠ¸, Array Token: â†’ ëª¨ì–‘ì€ ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„° ë¦¬ìŠ¤íŠ¸ì™€ ë°”ë””ë¥¼ êµ¬ë¶„í•˜ëŠ” ìš©ë„ì´ê³ , Statements: -\u0026gt; ë’¤ê°€ ëŒë‹¤ì˜ ë°”ë””ì´ë‹¤. ëŒë‹¤ì˜ ë°”ë””ë¥¼ {}ë¡œ ê°ìŒ“ê¸°ë„ í•˜ëŠ”ë° ë‚˜ì¤‘ê°€ë©´ ì €ë ‡ê²Œ ì‹¼ í˜•íƒœê°€ ë” ì•Œì•„ë³´ê¸° í˜ë“¤ë‹¤ê³  í•œë‹¤. ëŒë‹¤ í‘œí˜„ì‹ì—ëŠ” returnì´ í•¨ì¶•ë˜ì–´ìˆì–´ì„œ ì›¬ë§Œí•˜ë©´ returnì„ ì§ì ‘ ëª…ì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤. expressionê³¼ statementsì˜ ì°¨ì´ ë¬´ìŠ¨ ì°¨ì´ê°€ ìˆë‚˜ í–ˆë”ë‹ˆ statementê°€ ìµœì¢… ê°’ì„ ë„£ê¸° ë•Œë¬¸ì— ì™„ì„±ëœ í˜•íƒœë¼ì„œ expressionì„ í¬í•¨í•˜ê³  ìˆë‹¤.\nì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 (param) -\u0026gt; expression (param) -\u0026gt; { statements; } // expression í‘œí˜„ì‹ b + 1 // statements êµ¬ë¬¸ a = b + 1; // expression statement a++; ì–´ë””ì—, ì–´ë–»ê²Œ ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ë‚˜? ëŒë‹¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ íŒŒë¼ë©”í„°ë¡œ ë°›ëŠ” ìë¦¬ì´ë‹¤. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë€ ì˜¤ì§ í•˜ë‚˜ì˜ ì¶”ìƒë©”ì„œë“œë§Œ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ì˜ˆì‹œì˜ ì½”ë“œì²˜ëŸ¼ @FunctionalInterface ì–´ë…¸í…Œì´ì…˜ì´ í•¨ê»˜ ìˆë‹¤.\nëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œ êµ¬í˜„ì„ ì§ì ‘ ì „ë‹¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì „ì²´ í‘œí˜„ì‹ì„ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì·¨ê¸‰í•œë‹¤. ë”°ì§€ê³ ë³´ë©´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì·¨ê¸‰í•˜ëŠ” ê²ƒì´ë‹¤.\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 @FunctionalInterface public interface Predicate\u0026lt;T\u0026gt; { /** * Evaluates this predicate on the given argument. * * @param t the input argument * @return {@code true} if the input argument matches the predicate, * otherwise {@code false} */ boolean test(T t); ëŒë‹¤ê°€ ì´ë¦„ë„ ì—†ì´ ê·¸ëƒ¥ ë¡ ë˜ì ¸ë†“ê¸°ë§Œ í•´ë„ ê´€ë ¨ ë©”ì†Œë“œë¥¼ ì°©ì°© ë§Œë“¤ ìˆ˜ ìˆì—ˆë˜ ì´ìœ ëŠ”.. í•¨ìˆ˜í˜• ë©”ì„œë“œê°€ ê°€ì§€ê³  ìˆëŠ” ë©”ì„œë“œëŠ” í•˜ë‚˜ë‹ˆê¹Œ ê·¸ ë©”ì†Œë“œë¥¼ ë§Œë“¤ì–´ì„œ ë˜ì§€ê² ì§€ í•˜ëŠ” ê²ƒë„ ìˆê³  ëŒë‹¤ê°€ ë˜ì§€ëŠ” íŒŒë¼ë©”í„° ë¦¬ìŠ¤íŠ¸, ë°˜í™˜ ê°’ì„ ë§ì¶°ë³¸ë‹¤.\nëŒë‹¤ í™œìš©: ì‹¤í–‰ ì–´ë¼ìš´ë“œ íŒ¨í„´ ìì› ì²˜ë¦¬(ë°ì´í„° ë² ì´ìŠ¤, íŒŒì¼ ë“±ë“±)ì— ì‚¬ìš©í•˜ëŠ” ìˆœí™˜ íŒ¨í„´ì€ ìì›ì„ ì—´ê³ , ì²˜ë¦¬í•œ ë‹¤ìŒì— ìì›ì„ ë‹«ëŠ” ìˆœì„œë¡œ ì´ë£¨ì–´ì§„ë‹¤. ì´ê±¸ ì‹¤í–‰ ì–´ë¼ìš´ë“œ íŒ¨í„´ì´ë¼ê³  í•œë‹¤.\nì—¬ê¸°ì„œ ì–´ë–»ê²Œ ëŒë‹¤ë¥¼ í™œìš©í•˜ë‚˜? ì–´ì°¨í”¼ ì‹¤í–‰ë¶€ë¥¼ ê°ìŒ“ëŠ” ìì›ì—´ê³ ë‹«ê¸° ë¶€ë¶„ì€ ë™ì¼í•˜ë‹¤. ì‹¤í–‰ë¶€ì—ì„œ ë­˜ í•˜ëŠ”ì§€ê°€ ì¤‘ìš”í•œë° ê·¸ ì‹¤í–‰ë¶€ë¥¼ ë™ì‘ íŒŒë¼ë©”í„°í™”ë¥¼ ì‹œí‚¤ê³ , ì‹¤ì œë¡œ í˜¸ì¶œì„ í•  ë•Œ ë‚´ ì…ë§›ì— ë§ê²Œ ëŒë‹¤ë¡œ ë§Œë“  í‘œí˜„ì‹ì„ ë˜ì§€ë©´ ì¼ì´ ê°„ë‹¨í•´ì§„ë‹¤.\nì‹¤í–‰ ì–´ë¼ìš´ë“œ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 @FunctionalInterface interface FileProcess { void work (BufferedReader b); } public class ExFile { static void processFile(FileProcess p) { // try-with-resource í˜•íƒœë¼ì„œ ë”°ë¡œ ìì›ì„ ë‹«ì„ í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤! try (BufferedReader reader = new BufferedReader(new FileReader(\u0026#34;C:\\\\Temp\\\\file1.txt\u0026#34;))) { p.work(reader); } catch (Exception e){ System.out.println(e.getMessage()); } } public static void main(String[] args) { // 1ê·¸ëƒ¥ íŒŒì¼ ì½ê¸° processFile((BufferedReader r) -\u0026gt; { try { System.out.println(r.readLine()); } catch (IOException e) { e.printStackTrace(); } }); // 2 íŒŒì¼ ë‚´ìš© ë³µì‚¬í•˜ê¸° processFile((BufferedReader r ) -\u0026gt; { try (BufferedWriter r2 = new BufferedWriter(new FileWriter(\u0026#34;C:\\\\Temp\\\\file2.txt\u0026#34;))) { r2.write(r.readLine()); } catch (IOException e) { e.printStackTrace(); } }); } } ì½”ë“œ ìƒì„¸ ì„¤ëª…\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤. (line 1) í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ íŒŒë¼ë©”í„°ë¡œ ë°›ëŠ” ì¬í™œìš© ë©”ì„œë“œ ë§Œë“ ë‹¤. (line 8) ì¬í™œìš© ë©”ì„œë“œ ì•ˆì—ì„œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ë‹¨ í•˜ë‚˜ ë¿ì¸ ì¶”ìƒë©”ì„œë“œ í˜¸í•œë‹¤. (line 12) ì‹¤ì œ ì‹¤í–‰ ë‹¨ì—ì„œ ì¬í™œìš© ë©”ì„œë“œ í˜¸ì¶œ í•  ë•Œ ì›í•˜ëŠ” í–‰ë™ ëŒë‹¤ë¡œ ë§Œë“¤ì–´ì„œ ë˜ì§„ë‹¤. (line 21, 30) ì±…ì—ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ ì‹¤í–‰ì–´ë¼ìš´ë“œëŠ” ë™ì¼í•˜ê²Œ ì‚¬ìš©í•˜ê³  ìì›ì„ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‚¬ìš©í•  ê²ƒì¸ì§€ëŠ” ëŒë‹¤ë¡œ ì „ë‹¬í•´ ë‚´ ë§ˆìŒëŒ€ë¡œ ì‹¤í–‰ì„ í–ˆë‹¤. try-with-resource í˜•ì‹ì„ ì˜ ê¸°ì–µí•˜ì. ì´ê±¸ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ë§¤ë²ˆ ë”°ë¡œ ìì›ì„ ë‹«ì•„ì£¼ëŠ” ë²ˆê±°ë¡œìš´ ì¼ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ê·¸ëƒ¥ ìì›ì„ ì—´ ë•Œ try () ì•ˆì—ì„œ ì—°ë‹¤ëŠ” ê±¸ ì•Œë©´ ëœë‹¤.\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ ì‹œê·¸ë‹ˆì²˜ (ë°˜í™˜ê°’, íŒŒë¼ë©”í„°ê°’)ì„ ë¬˜ì‚¬í•œë‹¤. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ë¥¼ í•¨ìˆ˜ ë””ìŠ¤í¬ë¦½í„°ë¼ê³  í•œë‹¤.\nì•ì—ì„œë„ ë§í•œ ê²ƒì²˜ëŸ¼ ëŒë‹¤ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•œë° ìë°”ëŠ” ì´ë¯¸ ë‹¤ì–‘í•œ í˜•íƒœì˜ built-in í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒí™©ë³„ë¡œ ë§Œë“¤ì–´ë†¨ê³  ìš°ë¦¬ëŠ” í•„ìš”ì— ë”°ë¼ì„œ ë°˜í™˜ê°’ê³¼ íŒŒë¼ë©”í„°ê°’ì„ ê³ ë ¤í•´ì„œ ì“°ê¸°ë§Œ í•˜ë©´ ëœë‹¤. (Comparable, Runnable, Callable ë“±ë“±)\n[Picture 2] built-in í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ Predicate ì‚¬ìš© ì˜ˆì‹œ\nê°ì²´ë¥¼ ì‚¬ìš©í•´ì„œ boolean ê°’ return, í•œë§ˆë””ë¡œ true/false ê°’ ë‚˜ëˆ„ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public class ExPredicate { // ë§¨ ì• \u0026lt;T\u0026gt; ì™œ ìˆë‚˜ í–ˆëŠ”ë° filter ì—ì„œ ì“°ì´ëŠ” Të¥¼ ì •ì˜í•´ì£¼ëŠ” ëŠë‚Œì´ë‹¤ public static \u0026lt;T\u0026gt; List\u0026lt;T\u0026gt; filter(List\u0026lt;T\u0026gt; list, Predicate\u0026lt;T\u0026gt; p) { List\u0026lt;T\u0026gt; results = new ArrayList\u0026lt;\u0026gt;(); for(T t: list) { if(p.test(t)) { results.add(t); } } return results; } // ëŒë‹¤ì˜ ì¤€ë¹„ë¬¼ // 1.functional method // 2.recycle method // 3.call recycle method with lambda public static void main(String[] args) { List\u0026lt;String\u0026gt; sample = Arrays.asList(\u0026#34;longlong\u0026#34;, \u0026#34;short\u0026#34;, \u0026#34;\u0026#34;); List\u0026lt;String\u0026gt; notShort = filter(sample, (String s) -\u0026gt; s.length() \u0026gt; 3); System.out.println(notShort); IntPredicate same = (int i) -\u0026gt; i == 1000; Predicate\u0026lt;Integer\u0026gt; sameBoxing = (Integer i)-\u0026gt; i == (new Integer(1000)); System.out.println(same.test(1000)); System.out.println(sameBoxing.test(1000)); } } Consumer ì‚¬ìš© ì˜ˆì‹œ\nê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ ì–´ë–¤ í–‰ë™ì„ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 public class ExConsumer { // Consumer ì€ ë°˜í™˜ê°’ì´ ì—†ì–´ì„œ ë­”ê°€ë¥¼ ì‹¤í–‰í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•œë‹¤ public static \u0026lt;T\u0026gt; void doSomething(List\u0026lt;T\u0026gt; list, Consumer\u0026lt;T\u0026gt; c) { for(T t: list) { c.accept(t); } } public static void main(String[] args) { List\u0026lt;Integer\u0026gt; test = Arrays.asList(1,2,3); doSomething(test, (Integer i) -\u0026gt; System.out.println(i/2)); } } Function ì‚¬ìš© ì˜ˆì‹œ\nê°ì²´ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ ë˜ ë‹¤ë¥¸ íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class ExFunction { // Function ì€ ì…ë ¥ ê°’ë„ ìˆê³  ë°˜í™˜ ê°’ë„ ìˆëŠ” í˜•ì‹ì´ë‹¤. static \u0026lt;T, R\u0026gt; Map\u0026lt;T, R\u0026gt; map(List\u0026lt;T\u0026gt; list, Function\u0026lt;T, R\u0026gt; f) { Map\u0026lt;T, R\u0026gt; valueMap = new HashMap\u0026lt;\u0026gt;(); for(T t:list) { valueMap.put(t, f.apply(t)); } return valueMap; } public static void main(String[] args) { List\u0026lt;String\u0026gt; test = Arrays.asList(\u0026#34;one\u0026#34;, \u0026#34;two\u0026#34;, \u0026#34;Three\u0026#34;); Map\u0026lt;String, Integer\u0026gt; testLen = map(test, String::length); System.out.println(testLen); } } ê¸°ë³¸í˜• íŠ¹í™” (IntPredicate, IntSupplier etc)\nê¸°ë³¸í˜• ê°’ë“¤ì„ ìœ„ì˜ ë©”ì†Œë“œì— ì‚¬ìš©í•˜ë ¤ë©´ ì°¸ì¡°í˜•ë§Œ ê°’ìœ¼ë¡œ ë°›ëŠ” ì œë„¤ë¦­ì˜ íŠ¹ì„± ë•Œë¬¸ì— Integer, Doubleë“±ìœ¼ë¡œ ë°•ì‹±ì„ í•´ì•¼ í•œë‹¤. ìµœì‹  ìë°”ëŠ” ì˜¤í† ë°•ì‹±ì„ í•´ì£¼ê¸°ëŠ” í•˜ëŠ”ë° ë°•ì‹±ì€ ê°ì²´ë¼ì„œ í™ì— ì°¨ê³¡ì°¨ê³¡ ìŒ“ì´ê²Œ ëœë‹¤. ê²°êµ­ ë©”ëª¨ë¦¬ë¥¼ ë” ì“°ê²Œ ë˜ê³ , ê¸°ë³¸í˜•ì„ ê°€ì ¸ì˜¬ë•Œë„ ë©”ëª¨ë¦¬ íƒìƒ‰ì„ í•´ì•¼ í•œë‹¤.\nì´ê²ƒì´ ëª¨ì´ë©´ ê²°êµ­ ìì›ë‚­ë¹„ë¼ì„œ ê·¸ëƒ¥ ê¸°ë³¸í˜•ìœ¼ë¡œ í•¨ìˆ˜í˜•ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ê¸°ë³¸í˜• íŠ¹í™”ë¥¼ ì“°ëŠ”ê²Œ ì¢‹ë‹¤.\ní˜•ì‹ ê²€ì‚¬, í˜•ì‹ ì¶”ë¡ , ì œì•½ ë‹¤ì´ì•„ëª¬ë“œ ì—°ì‚°ì ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì¼ì¢…ì˜ ì¶”ë¡ ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ìœ ì¼í•œ ì¶”ìƒ ë©”ì„œë“œì˜ íŒŒë¼ë©”í„° ê°’ê³¼ ë°˜í™˜ê°’ í˜•íƒœì™€ ë™ì¼í•œ ëŒë‹¤ í˜•ì‹ì„ ì“°ë©´ ì•„~ ê·¸ê±´ê°€ë³´ë‹¤~ í•˜ê³  ë‚©ë“ì„ í•˜ê¸° ë•Œë¬¸ì—.\nê·¸ëŸ°ë° ì´ëŸ° ê²½ìš°ê°€ í•˜ë‚˜ ë” ìˆë‹¤. ë°”ë¡œ ë‹¤ì´ì•„ëª¬ë“œ ì—°ì‚°ì ì´ë‹¤.\në‹¤ì´ì•„ëª¬ë“œ ì—°ì‚°ì ì˜ˆì‹œ\n1 2 List\u0026lt;String\u0026gt; listOfStrings = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;Integer\u0026gt; listOfIntegers = new ArrayList\u0026lt;\u0026gt;(); ì´ë ‡ê²Œ ë‹¤ì´ì•„ëª¬ë“œ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ì„œ ì½˜í…ìŠ¤íŠ¸ì— ë”°ë¼ ì œë„¤ë¦­ í˜•ì‹ì„ ì¶”ë¡ í•˜ê³  ìˆë‹¤.\ní˜•ì‹ì¶”ë¡  ì´ë¯¸ ê°„ë‹¨í•œ í˜•íƒœì˜ ëŒë‹¤ë¥¼ ë” ê°„ë‹¨í•œ í˜•íƒœë¡œ ë§Œë“¤ìˆ˜ ìˆë‹¤ë©´? ëŒë‹¤ ìƒì„±ì€ ì™„ì „íˆ ìë°” ì»´íŒŒì¼ëŸ¬ê°€ ì¶”ë¡ ì„ í•˜ëŠ” í˜•íƒœë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ì»´íŒŒì¼ëŸ¬ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ íŒŒë¼ë¯¸í„° í˜•ì‹ì— ì ‘ê·¼ì„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ëŒë‹¤ ë¬¸ë²•ì—ì„œëŠ” íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ìƒëµí•´ë„ ëœë‹¤.\níŒŒë¼ë©”í„° íƒ€ì… ìƒëµ ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 public static void main(String[] args) { List\u0026lt;Integer\u0026gt; test = Arrays.asList(1,2,3); doSomething(test, (Integer i) -\u0026gt; System.out.println(i/2)); } // íŒŒë¼ë¯¸í„° ì œê±° public static void main(String[] args) { List\u0026lt;Integer\u0026gt; test = Arrays.asList(1,2,3); doSomething(test, (i) -\u0026gt; System.out.println(i/2)); } ë‘ ê°œì˜ ì½”ë“œëŠ” ì™„ì „íˆ ë™ì¼í•œ ì½”ë“œì´ë‹¤. ìƒí™©ì— ë”°ë¼ ëª…ì‹œì ìœ¼ë¡œ í˜•ì‹ì„ í¬í•¨í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ë•Œë„ ìˆê³  í˜•ì‹ì„ ë°°ì œí•˜ëŠ” ê²ƒì´ ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚¬ ë•Œê³  ìˆë‹¤. ì–´ë–¤ ë°©ë²•ì„ í•´ì•¼ í• ì§€ëŠ” ì—­ì‹œë‚˜ ê°œë°œì ìŠ¤ìŠ¤ë¡œê°€ ì§ì ‘ íŒë‹¨ì„ í•´ì•¼ í•œë‹¤.\nì œì•½: ì§€ì—­ ë³€ìˆ˜ ì‚¬ìš© ëŒë‹¤ í‘œí˜„ì‹ì—ì„œëŠ” ë‹¤ë¥¸ ë©”ì„œë“œë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ììœ  ë³€ìˆ˜(íŒŒë¼ë©”í„°ë¡œ ë„˜ê²¨ì§„ ë³€ìˆ˜ ë§ê³  ì™¸ë¶€ì—ì„œ ì„ ì–¸ì´ ëœ ë³€ìˆ˜)ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. â†’ ëŒë‹¤ ìº¡ì³ë§\nê·¸ëŸ°ë° ì´ë ‡ê²Œ ëŒë‹¤ì—ì„œ ì™¸ë¶€ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ì— ì ‘ê·¼ì„ í•˜ë ¤ë©´ ê·¸ ë³€ìˆ˜ëŠ” ë”± í•œ ë²ˆ ë§Œ ê°’ì„ ë„£ì„ ìˆ˜ ìˆëŠ” final ë³€ìˆ˜ì—¬ì•¼ í•œë‹¤. ì´ë¦„ì—ì„œë¶€í„° ì•Œ ìˆ˜ ìˆëŠ” ê²ƒì²˜ëŸ¼ \u0026lsquo;ìº¡ì²˜ë§\u0026rsquo;ì´ë‹ˆê¹Œ ê°’ì´ ë°”ë€Œë©´ ìº¡ì³ì˜ ê°œë…ì´ ì•„ë‹ˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\nì•„ë‹ˆë©´ Effective final ì´ë¼ê³  ê·¸ëƒ¥ ê·¸ ë³€ìˆ˜ê°€ ì„ ì–¸ì´ ë˜ê³  ë”± í•œ ë²ˆë§Œ í• ë‹¹ì´ ë˜ì—ˆìœ¼ë©´ finalì´ë¼ê³  ëª…ì‹œë¥¼ ì•ˆ í•´ë„ ì»´íŒŒì¼ëŸ¬ê°€ ì•Œì•„ì„œ final ì²˜ëŸ¼ ì·¨ê¸‰ì„ í•´ì¤€ë‹¤. ì´ëŸ° ì œì•½ì´ ìˆëŠ” ì´ìœ ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì™€ ì§€ì—­ ë³€ìˆ˜ê°€ íƒœìƒë¶€í„° ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.\nì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ VS ì§€ì—­ ë³€ìˆ˜\nì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜: í™ì— ì €ì¥ì´ ëœë‹¤. (ì¡°ê¸ˆ ë” ì˜¤ë˜ ì‚´ì•„ë‚¨ëŠ” ê°’ë“¤ì´ í™ì— ì €ì¥ì´ ë˜ëŠ” í¸) ì§€ì—­ë³€ìˆ˜: ìŠ¤íƒì— ì €ì¥ì´ ëœë‹¤. (ê¸°ë³¸íƒ€ì…ê³¼, ì°¸ì¡°íƒ€ì…ë“¤ì˜ ì´ë¦„ë“¤ì´ ì—¬ê¸°ì— ì €ì¥ì´ ë˜ëŠ” í¸) íŠ¹ì • ë©”ì†Œë“œì—ì„œ ì‚¬ìš©ì´ ë˜ëŠ” ë³€ìˆ˜ê°€ ì§€ì—­ë³€ìˆ˜ì´ë‹¤. ì–˜ë“¤ì€ ë©”ì†Œë“œê°€ í˜¸ì¶œì´ ë˜ì—ˆì„ ë•Œ ìŠ¤íƒì— ê°’ì´ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì˜€ë‹¤ê°€ ë©”ì†Œë“œ ì—°ì‚°ì´ ëë‚˜ë©´ ìˆœì„œëŒ€ë¡œ ë‹¤ íŒíŒíŒ í•´ì„œ í„°ì§„ë‹¤.\nëŒë‹¤ì™€ call-by-value ëŒë‹¤ì—ì„œ ì ‘ê·¼ì„ í•˜ëŠ” ì™¸ë¶€ ì„ ì–¸ ë³€ìˆ˜ëŠ” ëŒë‹¤ê°€ ê·¸ ì™¸ë¶€ ì„ ì–¸ ë³€ìˆ˜ ê°’ ìì²´ì— ì ‘ê·¼ì„ í•˜ëŠ” ê²Œ ì•„ë‹ˆê³ , ì™¸ë¶€ ì„ ì–¸ ë³€ìˆ˜ ê°’ì˜ ë³µì‚¬ë³¸ì— ì ‘ê·¼ì„ í•˜ëŠ” ê²ƒì´ë‹¤. (call-by-value í˜•ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŒ). ê·¸ë˜ì„œ ê·¸ ë³µì‚¬ë³¸ì˜ ê°’ì´ ë°”ë€Œì§€ ì•Šì•„ì•¼ í•´ì„œ ê°’ì„ í•œ ë²ˆ ë§Œ í• ë‹¹í•˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.\nì• ì´ˆì— ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ëœ ì´ìœ ëŠ” ìŠ¤ë ˆë“œ ì„¸ì´í”„í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œì´ë‹¤. ì§€ì—­ë³€ìˆ˜ ê°’ì€ ìŠ¤íƒì— ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ìì‹ ì„ ì •ì˜í•œ ìŠ¤ë ˆë“œì™€ ìƒì¡´ì„ ê°™ì´ í•´ì•¼ í•œë‹¤. ëŒë‹¤ê°€ ìŠ¤ë ˆë“œ A ì—ì„œ ì‹¤í–‰ëœë‹¤ë©´ ë³€ìˆ˜ë¥¼ í• ë‹¹í•œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œ Bê°€ ì‚¬ë¼ì ¸ë²„ë ¤ ë³€ìˆ˜ í• ë‹¹ì´ í•´ì œ ë˜ì—ˆëŠ”ë°ë„ ëŒë‹¤ì—ì„œëŠ” ê³„ì† ê·¸ ë³€ìˆ˜ì— ì ‘ê·¼ì„ í•˜ë ¤ê³  í•  ìˆ˜ ìˆë‹¤.\në”°ë¼ì„œ, ëŒë‹¤ëŠ” ìì‹ ì´ ì •ì˜ëœ ë©”ì„œë“œì˜ ì§€ì—­ ë³€ìˆ˜ì˜ ê°’ì€ ë°”ê¿€ ìˆ˜ ì—†ë‹¤. ëŒë‹¤ê°€ ì •ì˜ëœ ë©”ì„œë“œì˜ ì§€ì—­ ë³€ìˆ˜ê°’ì€ final ë³€ìˆ˜ê¸° ë•Œë¬¸ì— ëŒë‹¤ëŠ” ë³€ìˆ˜ê°€ ì•„ë‹Œ ê°’ì— êµ­í•œë˜ì–´ ì–´ë–¤ ë™ì‘ë“¤ì„ ìˆ˜í–‰í•œë‹¤.\nì°¸ê³ í•˜ë©´ ì¢‹ì„ ìë£Œë“¤ [ìë°” ë©”ëª¨ë¦¬ ê´€ë¦¬ - ìŠ¤íƒ \u0026amp; í™] [JVMì˜ ë©”ëª¨ë¦¬ êµ¬ì¡° ë° í• ë‹¹ê³¼ì •] [Stack Memory and Heap Space in Java | Baeldung] ë©”ì„œë“œ ì°¸ì¡° ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ì´ìš©í•˜ë©´ ê¸°ì¡´ì˜ ë©”ì„œë“œ ì •ì˜ë¥¼ ì¬í™œìš©í•´ì„œ ëŒë‹¤ì²˜ëŸ¼ ì „ë‹¬ì„ í•  ìˆ˜ ìˆë‹¤. (ë™ì‘ íŒŒë¼ë©”í„°). ë•Œë•Œë¡œ ëŒë‹¤ í‘œí˜„ì‹ì„ ì“°ëŠ” ê²ƒë³´ë‹¤ ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” ê°€ë…ì„±ì´ ì¢‹ê³  ìì—°ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´ ë©”ì„œë“œ ì°¸ì¡°ëŠ” ì–´ë–¤í´ë˜ìŠ¤.ì–´ë–¤ë©”ì†Œë“œ í˜•íƒœë¡œ ë„˜ê¸°ê¸° ë•Œë¬¸ì— í™•ì‹¤íˆ ëª…ì‹œëœë‹¤ëŠ” ëŠë‚Œì´ ìˆë‹¤.\në©”ì„œë“œ ì°¸ì¡° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 static List\u0026lt;Apple\u0026gt; filterApples(List\u0026lt;Apple\u0026gt; inventory, Predicate\u0026lt;Apple\u0026gt; p) { List\u0026lt;Apple\u0026gt; result = new ArrayList\u0026lt;\u0026gt;(); for(Apple apple: inventory) { if(p.test(apple)) { result.add(apple); } } return result; } List\u0026lt;Apple\u0026gt; result1 = filterApples(apples, Apple::isHeavyApple); List\u0026lt;Apple\u0026gt; result2 = filterApples(apples, Apple::isGreenApple); ì–´ë–¤ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ì§€ ëŒ€ë†“ê³  ì´ë¦„ì„ ê°€ì ¸ì™€ì„œ ë³´ì—¬ì£¼ê³  ìˆë‹¤. í›¨ì”¬ ë” ëª…ì‹œëœ ëª¨ìŠµ. ê·¸ëŸ°ë° ì—¬ê¸°ì„œ ì‹¤ì œë¡œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê±´ ì•„ë‹ˆê³  ëŒë‹¤ì—ì„œ ì´ë ‡ê²Œì´ë ‡ê²Œ ë™ì‘ì„ í•˜ì„¸ìš”! í•˜ê³  ì½”ë“œë¥¼ ì§œì„œ ë„˜ê²¨ì£¼ëŠ” ê²ƒì²˜ëŸ¼ ì‹¤ì œ ì‹¤í–‰ì€ ë‹¤ë¥¸ ê³³ì—ì„œ í•˜ê¸° ë•Œë¬¸ì— ë©”ì„œë“œ ì°¸ì¡°ë¥¼ í•  ë•Œ ë©”ì„œë“œ ë’¤ì— ()ì„ ì“°ì§€ ì•Šì•„ë„ ëœë‹¤.\në©”ì„œë“œ ì°¸ì¡° ìœ í˜•\nì •ì  ë©”ì„œë“œ ì°¸ì¡° Integer::parseInt (parseIntëŠ” static ë©”ì„œë“œ) ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡° String::length (lengthëŠ” ì¼ë°˜ ë©”ì„œë“œ) ê¸°ì¡´ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡° ê¸°ì¡´ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì°¸ì¡° ì˜ˆì‹œ\n1 2 String test = new String(\u0026#34;hello\u0026#34;); someMethod(test::length); 3ë²ˆì˜ í˜•íƒœë¥¼ ì“°ëŠ” ê²½ìš°ëŠ” ëŒë‹¤ ì™¸ë¶€ì—ì„œ (finalë¡œ) ìƒì„±ì´ ëœ ë³€ìˆ˜ë“¤ì˜ ë©”ì„œë“œë¥¼ ëŒë‹¤ ì•ˆì—ì„œ ì‚¬ìš©ì„ í•  ë•Œ ì“°ëŠ” í˜•íƒœë¼ê³  í•œë‹¤. ì´ëŸ°ì‹ì€ í´ë˜ìŠ¤ ì•ˆì— private í•˜ê²Œ ì „ìš© í•¼í¼ ë©”ì„œë“œë¥¼ ì •ì˜í•œ ìƒí™©ì—ì„œ ìœ ìš©í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.\nì»´íŒŒì¼ëŸ¬ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì˜ í˜•ì‹ì„ ê²€ì‚¬í•˜ë˜ ë°©ì‹ê³¼ ë¹„ìŠ·í•œ ê³¼ì •ìœ¼ë¡œ ë©”ì„œë“œ ì°¸ì¡°ê°€ ì£¼ì–´ì§„ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì™€ í˜¸í™˜í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ë©”ì„œë“œ ì°¸ì¡°ëŠ” ì½˜í…ìŠ¤íŠ¸ì˜ í˜•ì‹ê³¼ ì¼ì¹˜í•´ì•¼ í•œë‹¤.\nìƒì„±ì ì°¸ì¡° ì˜ˆì‹œ\n1 2 Supplier\u0026lt;Apple\u0026gt; c1 = Apple:new; Apple a1 = c1.get(); Mapìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ìƒì„±ì ì°¸ì¡°ë¥¼ í•´ë†”ì„œ ê°’ ë§µí•‘í•´ì„œ í•„ìš”í•œ ì¸ìˆ˜ë“¤ì´ ë‹¤ ë‹¤ë¥¸ ìƒíƒœì—ì„œ ê°ì²´ ë§Œë“œëŠ” ê±´ ì¢‹ì•„ë³´ì¸ë‹¤. ê°ì²´ë¥¼ ìƒì„±í•  ë•Œì—ëŠ” ìë°” built-in í•¨ìˆ˜ì¸í„°í˜ì´ìŠ¤ì¸ Functionì´ë‚˜ BiFunctionë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.\nëŒë‹¤ í‘œí˜„ì‹ì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ìœ ìš©í•œ ë©”ì„œë“œ ì—¬ëŸ¬ê°€ì§€ ìœ í‹¸ì„± í•¨ìˆ˜í˜• ë©”ì„œë“œë“¤ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©ì„ í•  ìˆ˜ ìˆë‹¤. í•œ ë§ˆë‹¤ë¡œ ê°„ë‹¨í•œ ì—¬ëŸ¬ê°œì˜ ëŒë‹¤ í‘œí˜„ì‹ì„ ì¡°í•©í•´ì„œ ë³µì¡í•œ ëŒë‹¤ í‘œí˜„ì‹ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\ní•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ ì´ë ‡ê²Œ ë§ŒëŠ¥ìœ¼ë¡œ êµ¬í˜„ì´ ë  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” defaultë©”ì„œë“œë¡œ ë§Œë“¤ì–´ì ¸ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë¯¸ë˜ë¥¼ ìƒê°í•´ì„œ ì´ê²ƒì €ê²ƒ ë‹¤ ë„£ì–´ë†“ê³  êµ¬í˜„ ì•ˆ í•´ë„ ë˜ëŠ” defaultë¥¼ ì¶”ê°€í•œ ê²ƒ ê°™ë‹¤. ì´ëŠ” ê²°êµ­ ë‚´ê°€ í•¨ìˆ˜í˜• ë©”ì„œë“œë¥¼ ë§Œë“¤ì—ˆì„ ë•Œë„ ë¯¸ë˜ì§€í–¥ì ìœ¼ë¡œ í•¼í¼ ë©”ì„œë“œë¥¼ ì´ê±°ì €ê±° ë§Œë“¤ì–´ ë†“ìœ¼ë©´ ì—°ê²°ì—°ê²°ì—°ê²° í•´ì„œ ì“¸ ìˆ˜ ìˆë‹¤ëŠ” ì–˜ê¸°ë‹¤.\nì‹¬ì§€ì–´ ì´ë ‡ê²Œ ëŒë‹¤ í‘œí˜„ì‹ì„ ë³µì¡í•˜ê²Œ ì¡°í•©ì„ í•´ë„ ì½”ë“œ ìì²´ê°€ ë¬¸ì œë¥¼ ì˜ ì„¤ëª…í•œë‹¤ê³  í•œë‹¤.\nComperator ì—°ê²° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 // ì—­ì •ë ¬ inventory.sort(comparing(Apple:getWeight).reversed()); /** * Returns a comparator that imposes the reverse ordering of this * comparator. * * @return a comparator that imposes the reverse ordering of this * comparator. * @since 1.8 */ default Comparator\u0026lt;T\u0026gt; reversed() { return Collections.reverseOrder(this); } // ê°’ì´ ê°™ë‹¤ë©´ ë‹¤ë¥¸ ì¡°ê±´ í•˜ë‚˜ ë” ë„£ì–´ì„œ ë¹„êµ inventory.sort(comparing(Apple:getWeight).reversed() .thenComparing(Apple:getCountry)); default Comparator\u0026lt;T\u0026gt; thenComparing(Comparator\u0026lt;? super T\u0026gt; other) { Objects.requireNonNull(other); return (Comparator\u0026lt;T\u0026gt; \u0026amp; Serializable) (c1, c2) -\u0026gt; { int res = compare(c1, c2); return (res != 0) ? res : other.compare(c1, c2); }; } Predicate ì—°ê²° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // and ì¡°ê±´ Predicate\u0026lt;Apple\u0026gt; redAntHeavyApple = redApple.and(apple -\u0026gt; apple.getWeight() \u0026gt;150); // or ì¡°ê±´ Predicate\u0026lt;Apple\u0026gt; redAndHeavyAppleOrGreen = readApple.and(apple -\u0026gt; apple.getWeight() \u0026gt; 150) .or(apple -\u0026gt; GREEN.equals(a.getColor())); default Predicate\u0026lt;T\u0026gt; or(Predicate\u0026lt;? super T\u0026gt; other) { Objects.requireNonNull(other); return (t) -\u0026gt; test(t) || other.test(t); } default Predicate\u0026lt;T\u0026gt; and(Predicate\u0026lt;? super T\u0026gt; other) { Objects.requireNonNull(other); return (t) -\u0026gt; test(t) \u0026amp;\u0026amp; other.test(t); } Function ì—°ê²° ì˜ˆì‹œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 // andThen ì£¼ì–´ì§„ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì ìš©í•œ ê²°ê³¼ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì…ë ¥ìœ¼ë¡œ ì „ë‹¬ Function\u0026lt;Integer, Integer\u0026gt; f = x -\u0026gt; x + 1; Function\u0026lt;Integer, Integer\u0026gt; g = x -\u0026gt; x * 2; Function\u0026lt;Integer, Integer\u0026gt; h = f.andThen(g); int result = h.apply(1); //4ê°€ ë‚˜ì˜¨ë‹¤. // compose ì¸ìˆ˜ë¡œ ì£¼ì–´ì§„ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì‹¤í–‰í•œ ë‹¤ë¦„ì— ê²°ê³¼ë¥¼ ì™¸ë¶€ í•¨ìˆ˜ë¡œ ì „ë‹¬ Function\u0026lt;Integer, Integer\u0026gt; f = x -\u0026gt; x + 1; Function\u0026lt;Integer, Integer\u0026gt; g = x -\u0026gt; x * 2; Function\u0026lt;Integer, Integer\u0026gt; h = f.compose(g); int result = h.apply(1); //3ê°€ ë‚˜ì˜¨ë‹¤. // ê²°êµ­ andThenê³¼ compose ì˜ ì°¨ì´ëŠ” ì•ì„ ë¨¼ì € ê³„ì‚°í•˜ëƒ ë’¤ë¥¼ ë¨¼ì € ê³„ì‚°í•˜ëƒì˜ ì°¨ì´ default \u0026lt;V\u0026gt; Function\u0026lt;V, R\u0026gt; compose(Function\u0026lt;? super V, ? extends T\u0026gt; before) { Objects.requireNonNull(before); return (V v) -\u0026gt; apply(before.apply(v)); } default \u0026lt;V\u0026gt; Function\u0026lt;T, V\u0026gt; andThen(Function\u0026lt;? super R, ? extends V\u0026gt; after) { Objects.requireNonNull(after); return (T t) -\u0026gt; after.apply(apply(t)); } ì´ë ‡ê²Œ ëŒë‹¤ë¡œ í˜¸ì¶œì„ ë°”ë¡œ ëª»í•˜ê³  í•¨ìˆ˜í˜• ë©”ì„œë“œë¡œ ì—¬ëŸ¬ê°œë¥¼ ë§Œë“¤ì–´ì„œ ì²´ì¸ì„ ê±¸ì–´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì € ë©”ì„œë“œë“¤ì´ í•¨ìˆ˜í˜• ë©”ì„œë“œì— ë“¤ì–´ìˆëŠ” ì• ë“¤ì´ë‹¤ ë³´ë‹ˆê¹Œ í™•ì‹¤í•˜ê²Œ í•¨ìˆ˜í˜• ë©”ì„œë“œë¡œ ê°ì²´ ì„ ì–¸ì´ ë˜ì–´ì•¼ í•œë‹¤. ì €ë ‡ê²Œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ëŒë‹¤ë¡œ ë˜ì§€ì§€ ì•Šê³  ê·¸ëƒ¥ redAndHeavyApple ì´ë ‡ê²Œ ìì²´ë¥¼ ë˜ì ¸ì„œ ì‚¬ìš©ì„ í•˜ë©´ ë˜ê² ë‹¤.\nì‹¤ì œ í˜¸ì¶œ ì˜ˆì‹œ\n1 2 3 4 5 Predicate\u0026lt;Apple\u0026gt; redApple = apple -\u0026gt; apple.getColor().equals(Color.RED); Predicate\u0026lt;Apple\u0026gt; redAntHeavyApple = redApple.and(apple -\u0026gt; apple.getWeight() \u0026gt;150); List\u0026lt;Apple\u0026gt; finalResult = filterApples(apples, redAntHeavyApple); System.out.println(finalResult); ","date":"2021-02-14","permalink":"https://leeleelee3264.github.io/post/2021-02-14-java-in-action-part1/","tags":["Book"],"title":"[Modern Java in Action] Chapter 1,2,3"}]